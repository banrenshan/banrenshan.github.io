<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.36" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://banrenshan.github.io/post/filebeat.html"><meta property="og:site_name" content="å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€"><meta property="og:title" content="filebeat"><meta property="og:description" content="FileBeat æ¦‚è¿° Filebeat æ˜¯ä¸€ä¸ªç”¨äºè½¬å‘å’Œé›†ä¸­æ—¥å¿—æ•°æ®çš„è½»é‡çº§ä¼ é€å™¨ã€‚ä½œä¸ºä»£ç†å®‰è£…åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šï¼ŒFilebeat ç›‘æ§æ‚¨æŒ‡å®šä½ç½®çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ”¶é›†æ—¥å¿—äº‹ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬å‘åˆ°Elasticsearchæˆ– Logstashä»¥è¿›è¡Œç´¢å¼•ã€‚ ä»¥ä¸‹æ˜¯ Filebeat çš„å·¥ä½œåŸç†ï¼šå½“æ‚¨å¯åŠ¨ Filebeat æ—¶ï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œè¿™äº›è¾“å…¥å»æ‚¨æŒ‡..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-20T07:19:17.000Z"><meta property="article:author" content="banrenshan"><meta property="article:tag" content="filebeat"><meta property="article:tag" content="ç›‘æ§"><meta property="article:published_time" content="2022-11-27T20:15:32.000Z"><meta property="article:modified_time" content="2024-04-20T07:19:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"filebeat","image":[""],"datePublished":"2022-11-27T20:15:32.000Z","dateModified":"2024-04-20T07:19:17.000Z","author":[{"@type":"Person","name":"banrenshan","url":"https://github.com/banrenshan"}]}</script><title>filebeat | å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€</title><meta name="description" content="FileBeat æ¦‚è¿° Filebeat æ˜¯ä¸€ä¸ªç”¨äºè½¬å‘å’Œé›†ä¸­æ—¥å¿—æ•°æ®çš„è½»é‡çº§ä¼ é€å™¨ã€‚ä½œä¸ºä»£ç†å®‰è£…åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šï¼ŒFilebeat ç›‘æ§æ‚¨æŒ‡å®šä½ç½®çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ”¶é›†æ—¥å¿—äº‹ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬å‘åˆ°Elasticsearchæˆ– Logstashä»¥è¿›è¡Œç´¢å¼•ã€‚ ä»¥ä¸‹æ˜¯ Filebeat çš„å·¥ä½œåŸç†ï¼šå½“æ‚¨å¯åŠ¨ Filebeat æ—¶ï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œè¿™äº›è¾“å…¥å»æ‚¨æŒ‡...">
    <link rel="preload" href="/assets/style-wL6mR3b5.css" as="style"><link rel="stylesheet" href="/assets/style-wL6mR3b5.css">
    <link rel="modulepreload" href="/assets/app-CQgLfo2K.js"><link rel="modulepreload" href="/assets/filebeat.html-DQzh_Zse.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-DsptuOjj.js" as="script"><link rel="prefetch" href="/assets/go-Context.html-Diq3QG2t.js" as="script"><link rel="prefetch" href="/assets/goå‘½ä»¤è¡Œ.html-DqkBzyrn.js" as="script"><link rel="prefetch" href="/assets/goåŸºç¡€.html-Bk8__Uca.js" as="script"><link rel="prefetch" href="/assets/goå¹¶å‘.html-Dxqwrlyr.js" as="script"><link rel="prefetch" href="/assets/goæ ‡å‡†åº“-json.html-nIcga7wI.js" as="script"><link rel="prefetch" href="/assets/goæ ‡å‡†åº“-time.html-CV_cckd_.js" as="script"><link rel="prefetch" href="/assets/goæ¨¡å—.html-DHt1r0WN.js" as="script"><link rel="prefetch" href="/assets/goæ³›å‹.html-CufklmE7.js" as="script"><link rel="prefetch" href="/assets/goç¯å¢ƒ.html-E__pxGSf.js" as="script"><link rel="prefetch" href="/assets/goé¢å‘å¯¹è±¡.html-DxwX-Tj8.js" as="script"><link rel="prefetch" href="/assets/k8s-client-go.html-DdxWdx_P.js" as="script"><link rel="prefetch" href="/assets/è™šæ‹Ÿç¯å¢ƒ.html-CLz6s3ML.js" as="script"><link rel="prefetch" href="/assets/gradle.html-Cnf47bbw.js" as="script"><link rel="prefetch" href="/assets/springäº‹åŠ¡.html-Bz2W9nab.js" as="script"><link rel="prefetch" href="/assets/æ ¡éªŒæ³¨è§£.html-CFIHX7df.js" as="script"><link rel="prefetch" href="/assets/helm.html-CxegJR70.js" as="script"><link rel="prefetch" href="/assets/istio.html-DePLeOWv.js" as="script"><link rel="prefetch" href="/assets/minikube.html-Awa0btGd.js" as="script"><link rel="prefetch" href="/assets/00-é‡‘èçŸ¥è¯†.html-DfkM0grt.js" as="script"><link rel="prefetch" href="/assets/01-flyway.html-C-9a-ptD.js" as="script"><link rel="prefetch" href="/assets/02-jsonassert.html-BQ_9fKZW.js" as="script"><link rel="prefetch" href="/assets/03-Junit5.html-DcoHP9i0.js" as="script"><link rel="prefetch" href="/assets/04-mocktio.html-DajpRC7R.js" as="script"><link rel="prefetch" href="/assets/05-jsonpath.html-B0x7ASJ2.js" as="script"><link rel="prefetch" href="/assets/06-spring-cloud-common.html-5lpzZ7Q7.js" as="script"><link rel="prefetch" href="/assets/07-oracle.html-C840ZYZq.js" as="script"><link rel="prefetch" href="/assets/08-å¿«æ·é”®.html-CN6lCR1U.js" as="script"><link rel="prefetch" href="/assets/09-ç¼–ç¨‹è§„èŒƒ.html-NPAnAteq.js" as="script"><link rel="prefetch" href="/assets/10-å¤šçº¿ç¨‹.html-CatHGlke.js" as="script"><link rel="prefetch" href="/assets/11-åˆ†å¸ƒå¼äº‹åŠ¡.html-hM4b1l3P.js" as="script"><link rel="prefetch" href="/assets/12-autosys.html-BHpiILUV.js" as="script"><link rel="prefetch" href="/assets/13-spring-retryå®˜æ–¹æŒ‡å—.html-B-_Qq8QZ.js" as="script"><link rel="prefetch" href="/assets/14-spring-integration.html-CW2IWCJG.js" as="script"><link rel="prefetch" href="/assets/15-Hibernate.html-B_NEll-D.js" as="script"><link rel="prefetch" href="/assets/16-å¼€å‘ç¯å¢ƒ.html-hbAApSMa.js" as="script"><link rel="prefetch" href="/assets/17-OpenShiftè·¯ç”±.html-DD5Ks9zC.js" as="script"><link rel="prefetch" href="/assets/mysqlä¼˜åŒ–.html-SK2Kpcyq.js" as="script"><link rel="prefetch" href="/assets/mysqlç´¢å¼•.html-CRo1gZ1f.js" as="script"><link rel="prefetch" href="/assets/mysqlè¿ç»´å’Œç›‘æ§.html-DmPdqYX4.js" as="script"><link rel="prefetch" href="/assets/mysqlé«˜çº§.html-T37eQ7Wn.js" as="script"><link rel="prefetch" href="/assets/spring-data-jpa.html-CTF75I4e.js" as="script"><link rel="prefetch" href="/assets/spring-data-redis.html-BuMesFby.js" as="script"><link rel="prefetch" href="/assets/AirFlow.html-Dk2TC26L.js" as="script"><link rel="prefetch" href="/assets/ERå›¾.html-F2F8a_jN.js" as="script"><link rel="prefetch" href="/assets/Resilience4j.html-JLao9x5F.js" as="script"><link rel="prefetch" href="/assets/goè¯­è¨€.html-DzE6zmqC.js" as="script"><link rel="prefetch" href="/assets/gradle-basic.html-Cgz1SJ7J.js" as="script"><link rel="prefetch" href="/assets/gradle-depedency.html-BxL0xBFJ.js" as="script"><link rel="prefetch" href="/assets/gradle-java.html-CePGb3r0.js" as="script"><link rel="prefetch" href="/assets/grafana-1.html-Cp9H6StR.js" as="script"><link rel="prefetch" href="/assets/grafana.html-CnclXoKO.js" as="script"><link rel="prefetch" href="/assets/loki.html-FPk3k-yL.js" as="script"><link rel="prefetch" href="/assets/nginx.html-CR5SWhRZ.js" as="script"><link rel="prefetch" href="/assets/remoteConnection.html-aMRqn6Kv.js" as="script"><link rel="prefetch" href="/assets/zero-copy.html-Cl0paaQa.js" as="script"><link rel="prefetch" href="/assets/Vscode.html-B9reA2NV.js" as="script"><link rel="prefetch" href="/assets/404.html-CLcjZTAU.js" as="script"><link rel="prefetch" href="/assets/index.html-DhKvWbc8.js" as="script"><link rel="prefetch" href="/assets/index.html-ZTOrFSGB.js" as="script"><link rel="prefetch" href="/assets/index.html-DpeLxtng.js" as="script"><link rel="prefetch" href="/assets/index.html-DBnMeBkK.js" as="script"><link rel="prefetch" href="/assets/index.html-De04d4WN.js" as="script"><link rel="prefetch" href="/assets/index.html-Dd4DTdkt.js" as="script"><link rel="prefetch" href="/assets/index.html-ChbCIW_L.js" as="script"><link rel="prefetch" href="/assets/index.html-Ctb5LzoW.js" as="script"><link rel="prefetch" href="/assets/index.html-kUlgbvEF.js" as="script"><link rel="prefetch" href="/assets/index.html-DZ-5gjcd.js" as="script"><link rel="prefetch" href="/assets/index.html-AfPRzO8U.js" as="script"><link rel="prefetch" href="/assets/index.html-CMs1A7n1.js" as="script"><link rel="prefetch" href="/assets/index.html-FGem47cI.js" as="script"><link rel="prefetch" href="/assets/index.html-DPM3B8uR.js" as="script"><link rel="prefetch" href="/assets/index.html-Oa0Ll38r.js" as="script"><link rel="prefetch" href="/assets/index.html-aTZT0VIk.js" as="script"><link rel="prefetch" href="/assets/index.html-CMs1A7n1.js" as="script"><link rel="prefetch" href="/assets/index.html-Si46C0Wt.js" as="script"><link rel="prefetch" href="/assets/index.html-DVKjuxRW.js" as="script"><link rel="prefetch" href="/assets/index.html-BtBSVtER.js" as="script"><link rel="prefetch" href="/assets/index.html-BJTNgczH.js" as="script"><link rel="prefetch" href="/assets/index.html-2CA46d-p.js" as="script"><link rel="prefetch" href="/assets/index.html-BCwxRebr.js" as="script"><link rel="prefetch" href="/assets/index.html-BQ6rVKnl.js" as="script"><link rel="prefetch" href="/assets/index.html-FGem47cI.js" as="script"><link rel="prefetch" href="/assets/index.html-DPbHnTvX.js" as="script"><link rel="prefetch" href="/assets/index.html-C1bTwx5J.js" as="script"><link rel="prefetch" href="/assets/index.html-kUlgbvEF.js" as="script"><link rel="prefetch" href="/assets/index.html-ZwhlJgF6.js" as="script"><link rel="prefetch" href="/assets/index.html-D9YH4gK6.js" as="script"><link rel="prefetch" href="/assets/index.html-BpEvpn9r.js" as="script"><link rel="prefetch" href="/assets/index.html-_G8wl3af.js" as="script"><link rel="prefetch" href="/assets/index.html-CnBtQD8M.js" as="script"><link rel="prefetch" href="/assets/index.html-WOAXuKto.js" as="script"><link rel="prefetch" href="/assets/index.html-BcUneSkW.js" as="script"><link rel="prefetch" href="/assets/index.html-qlxSp_84.js" as="script"><link rel="prefetch" href="/assets/index.html-CjlhaBzD.js" as="script"><link rel="prefetch" href="/assets/index.html-DnFTN1uS.js" as="script"><link rel="prefetch" href="/assets/index.html-DmbUd0zR.js" as="script"><link rel="prefetch" href="/assets/index.html-DwGLDPXM.js" as="script"><link rel="prefetch" href="/assets/index.html-CbtDq10m.js" as="script"><link rel="prefetch" href="/assets/index.html-B_lvOyIj.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj__4M9e.js" as="script"><link rel="prefetch" href="/assets/index.html-CspPpC7Y.js" as="script"><link rel="prefetch" href="/assets/index.html-BrVWbye2.js" as="script"><link rel="prefetch" href="/assets/index.html-C-h8Cq47.js" as="script"><link rel="prefetch" href="/assets/index.html-CzchrIty.js" as="script"><link rel="prefetch" href="/assets/index.html-P6DcK6ZM.js" as="script"><link rel="prefetch" href="/assets/index.html-CxGMZmWt.js" as="script"><link rel="prefetch" href="/assets/index.html-DzEY01e9.js" as="script"><link rel="prefetch" href="/assets/index.html-DE-oCWTy.js" as="script"><link rel="prefetch" href="/assets/index.html-DpURVHhw.js" as="script"><link rel="prefetch" href="/assets/index.html-D93NiiyH.js" as="script"><link rel="prefetch" href="/assets/index.html-BvidJ9IT.js" as="script"><link rel="prefetch" href="/assets/index.html-C75IYjMj.js" as="script"><link rel="prefetch" href="/assets/index.html-Ctng0Tv7.js" as="script"><link rel="prefetch" href="/assets/index.html-C1Dp-1N-.js" as="script"><link rel="prefetch" href="/assets/index.html-BOnllhe8.js" as="script"><link rel="prefetch" href="/assets/index.html-C0zlp0TF.js" as="script"><link rel="prefetch" href="/assets/index.html-j4_nP9_s.js" as="script"><link rel="prefetch" href="/assets/index.html-BPT0r1v3.js" as="script"><link rel="prefetch" href="/assets/index.html-H5CbYo9N.js" as="script"><link rel="prefetch" href="/assets/index.html-pKlH_9Oe.js" as="script"><link rel="prefetch" href="/assets/index.html-DGEvEZ-0.js" as="script"><link rel="prefetch" href="/assets/index.html-DzbD83Eo.js" as="script"><link rel="prefetch" href="/assets/index.html-BcUneSkW.js" as="script"><link rel="prefetch" href="/assets/index.html-B_jh6IJ9.js" as="script"><link rel="prefetch" href="/assets/index.html-XiwwHBAt.js" as="script"><link rel="prefetch" href="/assets/index.html-DKhESgVi.js" as="script"><link rel="prefetch" href="/assets/index.html-C11GVfnk.js" as="script"><link rel="prefetch" href="/assets/index.html-DVuhDyeM.js" as="script"><link rel="prefetch" href="/assets/index.html-Re4vH6TW.js" as="script"><link rel="prefetch" href="/assets/index.html-CwXYQT25.js" as="script"><link rel="prefetch" href="/assets/index.html-5pBXPIij.js" as="script"><link rel="prefetch" href="/assets/index.html-D7obikNP.js" as="script"><link rel="prefetch" href="/assets/index.html-BMtOmBin.js" as="script"><link rel="prefetch" href="/assets/index.html-DI0CC6aB.js" as="script"><link rel="prefetch" href="/assets/index.html-CNcqiGMc.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="ä¸»é¡µ"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link active" href="/post/" aria-label="åšæ–‡"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>åšæ–‡<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/timeline/" aria-label="äº‹ä»¶è½´"><span class="font-icon icon fa-fw fa-sm fas fa-timeline" style=""></span>äº‹ä»¶è½´<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/tag/" aria-label="æ ‡ç­¾"><span class="font-icon icon fa-fw fa-sm fas fa-tags" style=""></span>æ ‡ç­¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/category/" aria-label="åˆ†ç±»"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>åˆ†ç±»<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/banrenshan/banrenshan.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/gudie/" aria-label="æŒ‡å—"><!---->æŒ‡å—<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/12-autosys.html" aria-label="AutoSys"><!---->AutoSys<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/01-flyway.html" aria-label="flywayæŒ‡å—"><!---->flywayæŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/15-Hibernate.html" aria-label="Hibernate æŒ‡å—"><!---->Hibernate æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/02-jsonassert.html" aria-label="JSONassertæŒ‡å—"><!---->JSONassertæŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/05-jsonpath.html" aria-label="JsonPath æŒ‡å—"><!---->JsonPath æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/03-Junit5.html" aria-label="JUnit5æŒ‡å—"><!---->JUnit5æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/04-mocktio.html" aria-label="mocktioæŒ‡å—"><!---->mocktioæŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/17-OpenShift%E8%B7%AF%E7%94%B1.html" aria-label="OpenShift è·¯ç”±"><!---->OpenShift è·¯ç”±<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/07-oracle.html" aria-label="OracleåŸºç¡€ æŒ‡å—"><!---->OracleåŸºç¡€ æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/spring-data-redis.html" aria-label="redisæ”¯æŒ"><!---->redisæ”¯æŒ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/spring-data-jpa.html" aria-label="Spring Data Repositories"><!---->Spring Data Repositories<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/14-spring-integration.html" aria-label="Spring Integration æŒ‡å—"><!---->Spring Integration æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/13-spring-retry%E5%AE%98%E6%96%B9%E6%8C%87%E5%8D%97.html" aria-label="Spring Retry æŒ‡å—"><!---->Spring Retry æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/06-spring-cloud-common.html" aria-label="Spring-CLoud-Common"><!---->Spring-CLoud-Common<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/mysql%E4%BC%98%E5%8C%96.html" aria-label="sqlè¯­å¥ä¸Šçš„ä¼˜åŒ–"><!---->sqlè¯­å¥ä¸Šçš„ä¼˜åŒ–<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/11-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡"><!---->åˆ†å¸ƒå¼äº‹åŠ¡<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/10-%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" aria-label="å¤šçº¿ç¨‹"><!---->å¤šçº¿ç¨‹<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/mysql%E9%AB%98%E7%BA%A7.html" aria-label="å®‰è£…"><!---->å®‰è£…<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/16-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" aria-label="å¼€å‘ç¯å¢ƒ"><!---->å¼€å‘ç¯å¢ƒ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/08-%E5%BF%AB%E6%8D%B7%E9%94%AE.html" aria-label="å¿«æ·é”®"><!---->å¿«æ·é”®<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/mysql%E7%B4%A2%E5%BC%95.html" aria-label="æ¦‚è¿°"><!---->æ¦‚è¿°<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/mysql%E8%BF%90%E7%BB%B4%E5%92%8C%E7%9B%91%E6%8E%A7.html" aria-label="ç›‘æ§"><!---->ç›‘æ§<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/09-%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83.html" aria-label="ç¼–ç¨‹è§„èŒƒ"><!---->ç¼–ç¨‹è§„èŒƒ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/gudie/00-%E9%87%91%E8%9E%8D%E7%9F%A5%E8%AF%86.html" aria-label="é‡‘èçŸ¥è¯†"><!---->é‡‘èçŸ¥è¯†<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ–‡ç« </span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/AirFlow.html" aria-label="AirFlow"><!---->AirFlow<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/ER%E5%9B%BE.html" aria-label="ERå›¾"><!---->ERå›¾<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/post/filebeat.html" aria-label="filebeat"><!---->filebeat<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/go%E8%AF%AD%E8%A8%80.html" aria-label="goåŸºç¡€è¯­æ³•"><!---->goåŸºç¡€è¯­æ³•<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/gradle-depedency.html" aria-label="gradle ä¾èµ–è§£æ"><!---->gradle ä¾èµ–è§£æ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/gradle-basic.html" aria-label="gradle-basic"><!---->gradle-basic<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/gradle-java.html" aria-label="gradle-java"><!---->gradle-java<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/grafana-1.html" aria-label="grafana1"><!---->grafana1<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/grafana.html" aria-label="grafana2"><!---->grafana2<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/loki.html" aria-label="loki"><!---->loki<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/nginx.html" aria-label="nginx"><!---->nginx<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/Resilience4j.html" aria-label="Resilience4j"><!---->Resilience4j<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/zero-copy.html" aria-label="zero-copy"><!---->zero-copy<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/post/remoteConnection.html" aria-label="è¿œç¨‹ç®¡ç†åè®®"><!---->è¿œç¨‹ç®¡ç†åè®®<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Go</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go-Context.html" aria-label="Go Context"><!---->Go Context<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E6%A0%87%E5%87%86%E5%BA%93-json.html" aria-label="Go Json"><!---->Go Json<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E6%A0%87%E5%87%86%E5%BA%93-time.html" aria-label="Go Time"><!---->Go Time<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E5%91%BD%E4%BB%A4%E8%A1%8C.html" aria-label="Go å‘½ä»¤è¡Œ"><!---->Go å‘½ä»¤è¡Œ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E5%9F%BA%E7%A1%80.html" aria-label="Go åŸºç¡€"><!---->Go åŸºç¡€<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E5%B9%B6%E5%8F%91.html" aria-label="Go å¹¶å‘"><!---->Go å¹¶å‘<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E6%A8%A1%E5%9D%97.html" aria-label="Go æ¨¡å—"><!---->Go æ¨¡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.html" aria-label="Go é¢å‘å¯¹è±¡"><!---->Go é¢å‘å¯¹è±¡<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E6%B3%9B%E5%9E%8B.html" aria-label="Goæ³›å‹"><!---->Goæ³›å‹<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/go%E7%8E%AF%E5%A2%83.html" aria-label="Goç¯å¢ƒ"><!---->Goç¯å¢ƒ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Go/k8s-client-go.html" aria-label="Kubernate Go"><!---->Kubernate Go<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">äº‘æŠ€æœ¯</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/cloud/helm.html" aria-label="Helm æŒ‡å—"><!---->Helm æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/cloud/istio.html" aria-label="Istio æŒ‡å—"><!---->Istio æŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/cloud/minikube.html" aria-label="minikube æŒ‡å—"><!---->minikube æŒ‡å—<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Python</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Python/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83.html" aria-label="è™šæ‹Ÿç¯å¢ƒ"><!---->è™šæ‹Ÿç¯å¢ƒ<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Tools</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/tool/Vscode.html" aria-label="Vscode"><!---->Vscode<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Spring</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/gradle.html" aria-label="GradleæŒ‡å—"><!---->GradleæŒ‡å—<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3.html" aria-label="Spring Validation"><!---->Spring Validation<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring%E4%BA%8B%E5%8A%A1.html" aria-label="Spring äº‹åŠ¡"><!---->Spring äº‹åŠ¡<!----></a></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->filebeat</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/banrenshan" target="_blank" rel="noopener noreferrer">banrenshan</a></span><span property="author" content="banrenshan"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-27T20:15:32.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/post/filebeat.html" data-page-key="/post/filebeat.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 33 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT33M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#filebeat-å¦‚ä½•ä¿æŒæ–‡ä»¶çš„çŠ¶æ€">Filebeat å¦‚ä½•ä¿æŒæ–‡ä»¶çš„çŠ¶æ€ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#filebeat-å¦‚ä½•ç¡®ä¿è‡³å°‘ä¸€æ¬¡äº¤ä»˜">Filebeat å¦‚ä½•ç¡®ä¿è‡³å°‘ä¸€æ¬¡äº¤ä»˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç´¢å¼•ç­–ç•¥">ç´¢å¼•ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç´¢å¼•æ¨¡æ¿">ç´¢å¼•æ¨¡æ¿</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é…ç½®-kibana-ä»ªè¡¨æ¿">é…ç½® Kibana ä»ªè¡¨æ¿</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é…ç½®é¡¹ç›®è·¯å¾„">é…ç½®é¡¹ç›®è·¯å¾„</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é…ç½®å…¨å±€å±æ€§">é…ç½®å…¨å±€å±æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¸¸è§„é…ç½®é€‰é¡¹">å¸¸è§„é…ç½®é€‰é¡¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶">åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å®æ—¶åŠ è½½é…ç½®æ–‡ä»¶">å®æ—¶åŠ è½½é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ—¥å¿—é…ç½®">æ—¥å¿—é…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸»è¦çš„é…ç½®">ä¸»è¦çš„é…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¤šè¡Œè®¾ç½®">å¤šè¡Œè®¾ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¿è¡Œæ–¹å¼é…ç½®">è¿è¡Œæ–¹å¼é…ç½®</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ignore-older">ignore_older</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#close-é…ç½®">close_* é…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#clean-é…ç½®">clean_*é…ç½®</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœºåˆ¶æ€»ç»“">æœºåˆ¶æ€»ç»“</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¤„ç†å™¨åœ¨å“ªé‡Œæœ‰æ•ˆ">å¤„ç†å™¨åœ¨å“ªé‡Œæœ‰æ•ˆï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ—¥å¿—è½®æ¢å¯¼è‡´äº‹ä»¶ä¸¢å¤±æˆ–é‡å¤">æ—¥å¿—è½®æ¢å¯¼è‡´äº‹ä»¶ä¸¢å¤±æˆ–é‡å¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#logstashè¿˜æ˜¯beats">logstashè¿˜æ˜¯beats</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç”¨æˆ·è‡ªå®šä¹‰ç¤ºä¾‹">ç”¨æˆ·è‡ªå®šä¹‰ç¤ºä¾‹</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="filebeat" tabindex="-1"><a class="header-anchor" href="#filebeat"><span>FileBeat</span></a></h1><h1 id="æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°"><span>æ¦‚è¿°</span></a></h1><p>Filebeat æ˜¯ä¸€ä¸ªç”¨äºè½¬å‘å’Œé›†ä¸­æ—¥å¿—æ•°æ®çš„è½»é‡çº§ä¼ é€å™¨ã€‚ä½œä¸ºä»£ç†å®‰è£…åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šï¼ŒFilebeat ç›‘æ§æ‚¨æŒ‡å®šä½ç½®çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ”¶é›†æ—¥å¿—äº‹ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬å‘åˆ°<a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æˆ– <a href="https://www.elastic.co/products/logstash" target="_blank" rel="noopener noreferrer">Logstash<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä»¥è¿›è¡Œç´¢å¼•ã€‚</p><p>ä»¥ä¸‹æ˜¯ Filebeat çš„å·¥ä½œåŸç†ï¼šå½“æ‚¨å¯åŠ¨ Filebeat æ—¶ï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œè¿™äº›è¾“å…¥å»æ‚¨æŒ‡å®šçš„ä½ç½®ä¸­æŸ¥æ‰¾æ—¥å¿—æ–‡ä»¶ã€‚å¯¹äº Filebeat å®šä½çš„æ¯ä¸ªæ—¥å¿—ï¼ŒFilebeat éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªæ”¶é›†å™¨**(harvester)**ã€‚æ¯ä¸ªharvester è¯»å–å•ä¸ªæ—¥å¿—ä»¥è·å–æ–°å†…å®¹å¹¶å°†æ–°æ—¥å¿—æ•°æ®å‘é€åˆ°libbeatï¼Œlibbeat èšåˆäº‹ä»¶å¹¶å°†èšåˆæ•°æ®å‘é€åˆ°é…ç½®å¥½çš„è¾“å‡ºã€‚</p><figure><img src="/assets/image-20221127201801253-BJ-ny9j0.png" alt="image-20221127201801253" tabindex="0" loading="lazy"><figcaption>image-20221127201801253</figcaption></figure><blockquote><p>Filebeat æ˜¯ Elastic Beatï¼ŒåŸºäºlibbeat æ¡†æ¶ã€‚</p></blockquote><p>ä¸ºæ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ªæ”¶é›†å™¨ï¼Œ å…¶é€è¡Œè¯»å–æ–‡ä»¶ï¼Œå¹¶å°†å†…å®¹å‘é€åˆ°è¾“å‡ºã€‚ æ”¶é›†å™¨è´Ÿè´£æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€åœ¨æ”¶é›†å™¨è¿è¡Œæ—¶æ–‡ä»¶æè¿°ç¬¦ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚</p><h3 id="filebeat-å¦‚ä½•ä¿æŒæ–‡ä»¶çš„çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#filebeat-å¦‚ä½•ä¿æŒæ–‡ä»¶çš„çŠ¶æ€"><span>Filebeat å¦‚ä½•ä¿æŒæ–‡ä»¶çš„çŠ¶æ€ï¼Ÿ</span></a></h3><p>Filebeat ä¼šä¿å­˜æ¯ä¸ªæ–‡ä»¶çš„çŠ¶æ€ï¼Œå¹¶ç»å¸¸åœ¨å°†çŠ¶æ€åˆ·æ–°åˆ°æ³¨å†Œè¡¨æ–‡ä»¶ã€‚ è¯¥çŠ¶æ€ç”¨äºè®°ä½æ”¶é›†å™¨è¯»å–çš„æœ€åä¸€ä¸ªåç§»é‡ï¼Œå¹¶ç¡®ä¿å‘é€æ‰€æœ‰æ—¥å¿—è¡Œã€‚ å¦‚æœæ— æ³•è®¿é—® Elasticsearch æˆ– Logstash ç­‰è¾“å‡ºï¼ŒFilebeat ä¼šè·Ÿè¸ªå‘é€çš„æœ€åå‡ è¡Œï¼Œå¹¶åœ¨è¾“å‡ºå†æ¬¡å¯ç”¨æ—¶ç»§ç»­è¯»å–æ–‡ä»¶ã€‚ åœ¨ Filebeat è¿è¡Œæ—¶ï¼Œæ¯ä¸ªè¾“å…¥çš„çŠ¶æ€ä¿¡æ¯ä¹Ÿä¼šä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ å½“ Filebeat é‡æ–°å¯åŠ¨æ—¶ï¼Œæ¥è‡ªæ³¨å†Œè¡¨æ–‡ä»¶çš„æ•°æ®ç”¨äºé‡å»ºçŠ¶æ€ï¼Œå¹¶ä¸” Filebeat åœ¨æœ€åä¸€ä¸ªå·²çŸ¥ä½ç½®ç»§ç»­æ¯ä¸ªæ”¶é›†å™¨ã€‚</p><p>å¯¹äºæ¯ä¸ªè¾“å…¥ï¼ŒFilebeat éƒ½ä¼šä¿å­˜å®ƒæ‰¾åˆ°çš„æ¯ä¸ªæ–‡ä»¶çš„çŠ¶æ€ã€‚ å› ä¸ºæ–‡ä»¶å¯ä»¥é‡å‘½åæˆ–ç§»åŠ¨ï¼Œæ‰€ä»¥æ–‡ä»¶åå’Œè·¯å¾„ä¸è¶³ä»¥è¯†åˆ«æ–‡ä»¶ã€‚ å¯¹äºæ¯ä¸ªæ–‡ä»¶ï¼ŒFilebeat éƒ½ä¼šå­˜å‚¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä»¥æ£€æµ‹æ–‡ä»¶æ˜¯å¦ä»¥å‰è¢«æ”¶é›†è¿‡ã€‚</p><h3 id="filebeat-å¦‚ä½•ç¡®ä¿è‡³å°‘ä¸€æ¬¡äº¤ä»˜" tabindex="-1"><a class="header-anchor" href="#filebeat-å¦‚ä½•ç¡®ä¿è‡³å°‘ä¸€æ¬¡äº¤ä»˜"><span>Filebeat å¦‚ä½•ç¡®ä¿è‡³å°‘ä¸€æ¬¡äº¤ä»˜ï¼Ÿ</span></a></h3><p>Filebeat ä¿è¯äº‹ä»¶å°†è‡³å°‘ä¼ é€’åˆ°é…ç½®çš„è¾“å‡ºä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸ä¼šä¸¢å¤±æ•°æ®ã€‚Filebeat èƒ½å¤Ÿå®ç°è¿™ç§è¡Œä¸ºæ˜¯å› ä¸ºå®ƒå°†æ¯ä¸ªäº‹ä»¶çš„ä¼ é€’çŠ¶æ€å­˜å‚¨åœ¨æ³¨å†Œè¡¨æ–‡ä»¶ä¸­ã€‚</p><p>åœ¨å®šä¹‰çš„è¾“å‡ºè¢«é˜»å¡å¹¶ä¸”æ²¡æœ‰ç¡®è®¤æ‰€æœ‰äº‹ä»¶çš„æƒ…å†µä¸‹ï¼ŒFilebeat å°†ç»§ç»­å°è¯•å‘é€äº‹ä»¶ï¼Œç›´åˆ°è¾“å‡ºç¡®è®¤å®ƒå·²æ”¶åˆ°äº‹ä»¶ã€‚</p><p>å¦‚æœ Filebeat åœ¨å‘é€äº‹ä»¶çš„è¿‡ç¨‹ä¸­å…³é—­ï¼Œå®ƒä¸ä¼šåœ¨å…³é—­å‰ç­‰å¾…è¾“å‡ºç¡®è®¤æ‰€æœ‰äº‹ä»¶ã€‚ä»»ä½•å‘é€åˆ°è¾“å‡ºä½†åœ¨ Filebeat å…³é—­ä¹‹å‰æœªç¡®è®¤çš„äº‹ä»¶ï¼Œåœ¨ Filebeat é‡æ–°å¯åŠ¨æ—¶ä¼šå†æ¬¡å‘é€ã€‚è¿™å¯ç¡®ä¿æ¯ä¸ªäº‹ä»¶è‡³å°‘å‘é€ä¸€æ¬¡ï¼Œä½†æœ€ç»ˆå¯èƒ½ä¼šå°†é‡å¤çš„äº‹ä»¶å‘é€åˆ°è¾“å‡ºã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®<code>shutdown_timeout</code>é€‰é¡¹å°† Filebeat é…ç½®ä¸ºåœ¨å…³é—­ä¹‹å‰ç­‰å¾…ç‰¹å®šçš„æ—¶é—´ã€‚</p><h1 id="ä¸esé›†æˆ" tabindex="-1"><a class="header-anchor" href="#ä¸esé›†æˆ"><span>ä¸esé›†æˆ</span></a></h1><h2 id="ç´¢å¼•ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•ç­–ç•¥"><span>ç´¢å¼•ç­–ç•¥</span></a></h2><p>ç´¢å¼•ç”Ÿå‘½å‘¨æœŸæ˜¯elasticsearchç®¡ç†ç´¢å¼•çš„ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®è¿è¡ŒçŠ¶æ€å†³å®šåˆ›å»ºæ–°çš„ç´¢å¼•ã€åˆ é™¤ç´¢å¼•ç­‰ã€‚</p><p>ä» 7.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒFilebeat åœ¨è¿æ¥æ”¯æŒç”Ÿå‘½å‘¨æœŸç®¡ç†çš„esé›†ç¾¤æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å…·ä½“è¯´ï¼Œfilebeatä¼šåœ¨è¿æ¥ESæ—¶ï¼Œåœ¨ESä¸Šåˆ›å»ºfilebeatå®šä¹‰å¥½çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‚¨å¯ä»¥åœ¨ Kibana çš„ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç­–ç•¥ UI ä¸­æŸ¥çœ‹å’Œç¼–è¾‘ç­–ç•¥ã€‚</p><figure><img src="/assets/image-20221127201817488-Crcxhrsj.png" alt="image-20221127201817488" tabindex="0" loading="lazy"><figcaption>image-20221127201817488</figcaption></figure><p>ä½ å¯ä»¥åœ¨filebeatä½¿ç”¨ä¸‹é¢çš„å±æ€§é…ç½®ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç­–ç•¥:</p><ul><li>setup.ilm.enabled: æœ‰æ•ˆå€¼ä¸º trueã€false å’Œ autoã€‚ åœ¨ 7.0 åŠæ›´é«˜ç‰ˆæœ¬æŒ‡å®š autoï¼ˆé»˜è®¤ï¼‰æ—¶ï¼Œå¦‚æœåœ¨ Elasticsearch ä¸­å¯ç”¨äº†è¯¥åŠŸèƒ½å¹¶å…·æœ‰æ‰€éœ€çš„è®¸å¯è¯ï¼ŒFilebeat ä¼šè‡ªåŠ¨ä½¿ç”¨ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼› å¦åˆ™ï¼ŒFilebeat ä¼šæ¯å¤©åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•ã€‚</li><li>setup.ilm.rollover_alias ç´¢å¼•ç”Ÿå‘½å‘¨æœŸå†™å…¥åˆ«åã€‚ é»˜è®¤å€¼ä¸º <code>filebeat-%{[agent.version]}</code>ã€‚ è®¾ç½®æ­¤é€‰é¡¹ä¼šæ›´æ”¹åˆ«åã€‚</li><li>setup.ilm.pattern ç¿»è½¬ç´¢å¼•çš„æ¨¡å¼ã€‚ é»˜è®¤å€¼ä¸º %{now/d}-000001ã€‚é…åˆ<code>setup.ilm.rollover_alias</code>å†³å®šç´¢å¼•çš„åç§°ï¼Œä¾‹å¦‚ï¼šfilebeat-7.7.1-2022.03.17-000001</li><li>setup.ilm.policy_name ç”¨äºç”Ÿå‘½å‘¨æœŸç­–ç•¥çš„åç§°ã€‚ é»˜è®¤ä¸ºfilebeatã€‚çœ‹ä¸Šå›¾</li><li>setup.ilm.policy_file åŒ…å«ç”Ÿå‘½å‘¨æœŸç­–ç•¥é…ç½®çš„ JSON æ–‡ä»¶çš„è·¯å¾„ã€‚ ä½¿ç”¨æ­¤è®¾ç½®åŠ è½½æ‚¨è‡ªå·±å®šä¹‰çš„ç”Ÿå‘½å‘¨æœŸç­–ç•¥ã€‚</li><li>setup.ilm.check_exists å½“è®¾ç½®ä¸º false æ—¶ï¼Œç¦ç”¨å¯¹ç°æœ‰ç”Ÿå‘½å‘¨æœŸç­–ç•¥çš„æ£€æŸ¥ã€‚ é»˜è®¤å€¼ä¸ºçœŸã€‚ å¦‚æœè¿æ¥åˆ°å®‰å…¨é›†ç¾¤çš„ Filebeat ç”¨æˆ·æ²¡æœ‰ read_ilm æƒé™ï¼Œæ‚¨éœ€è¦ç¦ç”¨æ­¤æ£€æŸ¥ã€‚å¦‚æœå°†æ­¤é€‰é¡¹è®¾ç½®ä¸º falseï¼Œè¯·è®¾ç½® setup.ilm.overwrite: true ä»¥ä¾¿å¯ä»¥å®‰è£…ç”Ÿå‘½å‘¨æœŸç­–ç•¥ã€‚</li><li>setup.ilm.overwrite è®¾ç½®ä¸º true æ—¶ï¼Œç”Ÿå‘½å‘¨æœŸç­–ç•¥åœ¨å¯åŠ¨æ—¶è¢«è¦†ç›–ã€‚ é»˜è®¤å€¼ä¸ºfalseã€‚</li></ul><blockquote><p><strong>æ›´å¤šé…ç½®å‚è€ƒæ–‡æ¡£</strong></p></blockquote><h2 id="ç´¢å¼•æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•æ¨¡æ¿"><span>ç´¢å¼•æ¨¡æ¿</span></a></h2><p>ç´¢å¼•æ¨¡æ¿å®šä¹‰äº†æ‚¨å¯ä»¥åœ¨åˆ›å»ºæ–°ç´¢å¼•æ—¶è‡ªåŠ¨åº”ç”¨çš„è®¾ç½®å’Œæ˜ å°„ã€‚ Elasticsearch æ ¹æ®ä¸ç´¢å¼•åç§°åŒ¹é…çš„ç´¢å¼•æ¨¡å¼å°†æ¨¡æ¿åº”ç”¨äºæ–°ç´¢å¼•ã€‚</p><p>æ‚¨å¯ä»¥è°ƒæ•´ä»¥ä¸‹è®¾ç½®ä»¥åŠ è½½è‡ªå·±çš„æ¨¡æ¿æˆ–è¦†ç›–ç°æœ‰æ¨¡æ¿ã€‚</p><ul><li>setup.template.enabled</li></ul><p>è®¾ç½®ä¸º false å¯ç¦ç”¨æ¨¡æ¿åŠ è½½ã€‚å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸º falseï¼Œåˆ™å¿…é¡»æ‰‹åŠ¨åŠ è½½æ¨¡æ¿ã€‚</p><ul><li>setup.template.name</li></ul><p>æ¨¡æ¿çš„åç§°ã€‚ç¼ºçœå€¼ä¸ºfilebeat ã€‚ç‰ˆæœ¬å§‹ç»ˆé™„åŠ åˆ°åç§°åï¼Œå› æ­¤æœ€ç»ˆåç§°ä¸º ã€‚<strong>filebeat-%{[agent.version]}</strong></p><ul><li>setup.template.pattern</li></ul><p>è¦åº”ç”¨äºé»˜è®¤ç´¢å¼•è®¾ç½®çš„æ¨¡æ¿æ¨¡å¼ã€‚ç¼ºçœæ¨¡å¼ä¸º<code>filebeat-*</code>ã€‚Filebeat ç‰ˆæœ¬å§‹ç»ˆåŒ…å«åœ¨æ¨¡å¼ä¸­ï¼Œå› æ­¤æœ€ç»ˆæ¨¡å¼ä¸º<code> filebeat-%{[agent.version]}-*</code>ã€‚é€šé…ç¬¦ç”¨äºåŒ¹é…æ‰€æœ‰æ—¥æœŸã€‚</p><ul><li>setup.template.fields</li></ul><p>æè¿°å­—æ®µçš„ YAML æ–‡ä»¶çš„è·¯å¾„ã€‚ç¼ºçœå€¼ä¸ºfields.yml ã€‚å¦‚æœè®¾ç½®äº†ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å°†å…¶è§†ä¸ºç›¸å¯¹äºé…ç½®è·¯å¾„ã€‚</p><ul><li>setup.template.overwrite</li></ul><p>ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå®ƒæŒ‡å®šæ˜¯å¦è¦†ç›–ç°æœ‰æ¨¡æ¿ã€‚é»˜è®¤å€¼ä¸º falseã€‚</p><ul><li>setup.template.settings</li></ul><p>esç´¢å¼•çš„è®¾ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">setup.template.name</span><span class="token punctuation">:</span> <span class="token string">&quot;filebeat&quot;</span>
<span class="token key atrule">setup.template.fields</span><span class="token punctuation">:</span> <span class="token string">&quot;fields.yml&quot;</span>
<span class="token key atrule">setup.template.overwrite</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">setup.template.settings</span><span class="token punctuation">:</span>
  <span class="token key atrule">index.number_of_shards</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">index.number_of_replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ›´å¤šé…ç½®å‚è€ƒæ–‡æ¡£</p></blockquote><h1 id="ä¸kibanaé›†æˆ" tabindex="-1"><a class="header-anchor" href="#ä¸kibanaé›†æˆ"><span>ä¸kibanaé›†æˆ</span></a></h1><h2 id="é…ç½®-kibana-ä»ªè¡¨æ¿" tabindex="-1"><a class="header-anchor" href="#é…ç½®-kibana-ä»ªè¡¨æ¿"><span>é…ç½® Kibana ä»ªè¡¨æ¿</span></a></h2><p>Filebeat é™„å¸¦äº†ç¤ºä¾‹ Kibana ä»ªè¡¨æ¿ã€å¯è§†åŒ–æ•ˆæœå’Œæœç´¢ï¼Œç”¨äºåœ¨ Kibana ä¸­å¯è§†åŒ– Filebeat æ•°æ®,ä¾‹å¦‚nginxã€mysqlç­‰ã€‚ä½ å¯ä»¥é€šè¿‡é…ç½®kibanaè¿æ¥ä¿¡æ¯ï¼Œæ¥å°†è¿™äº› ä»ªè¡¨æ¿å¯¼å…¥åˆ°kibanaã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">setup.kibana.host</span><span class="token punctuation">:</span> <span class="token string">&quot;192.0.2.255:5601&quot;</span>
<span class="token key atrule">setup.kibana.username</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
<span class="token key atrule">setup.kibana.password</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
<span class="token key atrule">setup.kibana.protocol</span><span class="token punctuation">:</span> <span class="token string">&quot;http&quot;</span>
<span class="token key atrule">setup.kibana.path</span><span class="token punctuation">:</span> /kibana
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦åŠ è½½ä»ªè¡¨æ¿ï¼Œæ‚¨å¯ä»¥åœ¨é…ç½®æ–‡ä»¶çš„éƒ¨åˆ†ä¸­å¯ç”¨ä»ªè¡¨æ¿åŠ è½½ï¼Œä¹Ÿå¯ä»¥è¿è¡Œ<code>setup</code>å‘½ä»¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»ªè¡¨æ¿åŠ è½½å¤„äºç¦ç”¨çŠ¶æ€ã€‚</p><p>å¯ç”¨ä»ªè¡¨æ¿åŠ è½½åï¼ŒFilebeat å°†ä½¿ç”¨ Kibana API åŠ è½½ç¤ºä¾‹ä»ªè¡¨æ¿ã€‚ä»…å½“ Filebeat å¯åŠ¨æ—¶ï¼Œæ‰ä¼šå°è¯•åŠ è½½ä»ªè¡¨æ¿ã€‚å¦‚æœ Kibana åœ¨å¯åŠ¨æ—¶ä¸å¯ç”¨ï¼ŒFilebeat å°†å› é”™è¯¯è€Œåœæ­¢ã€‚</p><p>è¦å¯ç”¨ä»ªè¡¨æ¿åŠ è½½ï¼Œè¯·å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>setup.dashboards.enabled: true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>æ›´å¤šé…ç½®å‚è€ƒæ–‡æ¡£ï¼Œå¦‚æœå•çº¯æ˜¯æ—¥å¿—é›†æˆï¼Œå¯èƒ½ä¸éœ€è¦é…ç½®è¿™äº›</p></blockquote><h1 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…"><span>å®‰è£…</span></a></h1><p>å®‰è£…å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">-O</span> https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.7.1-amd64.deb
<span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> filebeat-7.7.1-amd64.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç³»ç»Ÿï¼šUbuntu WSL</p><p>ç‰ˆæœ¬ï¼šfilebeat-7.7.1-amd64.deb</p><p>å®‰è£…ç›®å½•ä¿¡æ¯ï¼š</p><table><thead><tr><th>Type</th><th>Location</th></tr></thead><tbody><tr><td><strong>home</strong></td><td>/usr/share/filebeat</td></tr><tr><td><strong>bin</strong></td><td>/usr/share/filebeat/bin</td></tr><tr><td><strong>config</strong></td><td>/etc/filebeat</td></tr><tr><td><strong>data</strong></td><td>/var/lib/filebeat</td></tr><tr><td><strong>logs</strong></td><td>/var/log/filebeat</td></tr></tbody></table><h2 id="å¿«é€Ÿå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿå…¥é—¨"><span>å¿«é€Ÿå…¥é—¨</span></a></h2><p>å‰ç½®è¦æ±‚ï¼š</p><ul><li>å®‰è£…kibana</li><li>å®‰è£…elasticsearch</li></ul><p>å¯åŠ¨å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>filebeat  <span class="token parameter variable">-c</span> filebeat.yaml  <span class="token parameter variable">-e</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="é…ç½®" tabindex="-1"><a class="header-anchor" href="#é…ç½®"><span>é…ç½®</span></a></h1><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">filebeat.registry</span><span class="token punctuation">:</span>
  <span class="token key atrule">flush</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment">#æ‰©å±•</span>
<span class="token key atrule">path.config</span><span class="token punctuation">:</span> /etc/log_agent/filebeat
<span class="token key atrule">path.data</span><span class="token punctuation">:</span> /var/lib/log_agent/filebeat
<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /var/log/log_agent/filebeat


<span class="token key atrule">filebeat.config.inputs</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>path.config<span class="token punctuation">}</span>/<span class="token important">*.yml</span>  <span class="token comment">#æ‰©å±•</span>
  <span class="token key atrule">reload.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">reload.period</span><span class="token punctuation">:</span> 10s


<span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;d:\logs\**\*.log&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;e:\logs\**\*.log&#39;</span><span class="token punctuation">]</span>
  <span class="token key atrule">multiline.pattern</span><span class="token punctuation">:</span> <span class="token string">&#39;^\[[0-9]{4}-[0-9]{2}-[0-9]{2}&#39;</span>
  <span class="token key atrule">multiline.negate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">multiline.match</span><span class="token punctuation">:</span> after
  <span class="token key atrule">recursive_glob.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> 
  <span class="token key atrule">exclude_lines</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;\$no_es&#39;</span><span class="token punctuation">]</span>
  <span class="token key atrule">ignore_older</span><span class="token punctuation">:</span> 72h
  <span class="token key atrule">clean_inactive</span><span class="token punctuation">:</span> 120h
  <span class="token key atrule">scan_frequency</span><span class="token punctuation">:</span> 10s

<span class="token key atrule">fields_under_root</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">fields</span><span class="token punctuation">:</span>
  <span class="token key atrule">env</span><span class="token punctuation">:</span> staging  <span class="token comment">#æ‰©å±•</span>
  <span class="token key atrule">team</span><span class="token punctuation">:</span> apollo


<span class="token key atrule">output.elasticsearch</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;localhost:9200&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># output.console:</span>
<span class="token comment">#   pretty: true</span>

<span class="token comment"># output.logstash:</span>
<span class="token comment">#   hosts: [&quot;127.0.0.1:5044&quot;]</span>

<span class="token key atrule">processors</span><span class="token punctuation">:</span>
 <span class="token comment"># - add_host_metadata: ~</span>
  <span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span>
        <span class="token key atrule">contains</span><span class="token punctuation">:</span>
          <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;$to_decode&quot;</span>
      <span class="token key atrule">lang</span><span class="token punctuation">:</span> javascript
      <span class="token key atrule">id</span><span class="token punctuation">:</span> url_decode
      <span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">  
        function process(event) {
            var message=event.Get(&quot;message&quot;);
            event.Put(&quot;message&quot;, decodeURI(message)); 
        }</span>
  <span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span>
        <span class="token key atrule">contains</span><span class="token punctuation">:</span>
          <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;$to_encode&quot;</span>
      <span class="token key atrule">lang</span><span class="token punctuation">:</span> javascript
      <span class="token key atrule">id</span><span class="token punctuation">:</span> password_encode
      <span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">  
        function process(event) {
            var message=event.Get(&quot;message&quot;);
            message= message.replace(/\$to_encode\{(.*)\}/,&quot;*****&quot;);
            event.Put(&quot;message&quot;, message); 
            
        }</span>
  <span class="token punctuation">-</span> <span class="token key atrule">dissect</span><span class="token punctuation">:</span>
      <span class="token key atrule">tokenizer</span><span class="token punctuation">:</span> <span class="token string">&quot;[%{log_date}] - %{thread}  %{log_level}  %{logger}  %{msg}&quot;</span>
      <span class="token key atrule">field</span><span class="token punctuation">:</span> <span class="token string">&quot;message&quot;</span>
      <span class="token key atrule">target_prefix</span><span class="token punctuation">:</span> <span class="token string">&quot;service&quot;</span>
  <span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span>
      <span class="token key atrule">lang</span><span class="token punctuation">:</span> javascript
      <span class="token key atrule">id</span><span class="token punctuation">:</span> parse_service
      <span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
        function process(event) {
            var service=event.Get(&quot;log.file.path&quot;);
            var split=service.split(&quot;\\&quot;);
            var filname=split[split.length-1];
            var names=filname.split(&#39;-&#39;);
            if(names.length==2){
                event.Put(&quot;service.name&quot;, names[0]);
                var index=names[1].indexOf(&#39;.&#39;);
                if(index!=-1){
                   event.Put(&quot;service.subName&quot;, names[1].substring(0,index));
                }
              
            }
           
        }</span>
  <span class="token punctuation">-</span> <span class="token key atrule">drop_fields</span><span class="token punctuation">:</span>
      <span class="token key atrule">fields</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;agent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ecs&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">ignore_missing</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é…ç½®é¡¹ç›®è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#é…ç½®é¡¹ç›®è·¯å¾„"><span>é…ç½®é¡¹ç›®è·¯å¾„</span></a></h2><p>Filebeat åœ¨<code>path.config</code>æŸ¥æ‰¾ Elasticsearch æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶åœ¨<code>path.logs</code>å†™å…¥æ—¥å¿—æ–‡ä»¶ã€‚ Filebeat åœ¨<code>path.data</code>æŸ¥æ‰¾å…¶æ³¨å†Œè¡¨æ–‡ä»¶ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">path.home</span><span class="token punctuation">:</span> /usr/share/beat
<span class="token key atrule">path.config</span><span class="token punctuation">:</span> /etc/beat
<span class="token key atrule">path.data</span><span class="token punctuation">:</span> /var/lib/beat
<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /var/log/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>home: filebeatçš„å®‰è£…è·¯å¾„ã€‚é»˜è®¤å€¼ä¸º Filebeat äºŒè¿›åˆ¶æ–‡ä»¶çš„ä½ç½®</li><li>config: é…ç½®æ–‡ä»¶è·¯å¾„ï¼ŒåŒ…æ‹¬ä¸» YAML é…ç½®æ–‡ä»¶å’Œ Elasticsearch æ¨¡æ¿æ–‡ä»¶</li><li>data: æ•°æ®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿™äº›æ•°æ®æ–‡ä»¶ä¸»è¦å­˜è´®inputéœ€è¦ç›‘å¬çš„æ–‡ä»¶ä¿¡æ¯ã€‚filebeatç§°è¿™äº›æ–‡ä»¶ä¸ºæ³¨å†Œè¡¨æ–‡ä»¶ã€‚åœ¨åŒä¸€ä¸»æœºä¸Šè¿è¡Œå¤šä¸ª Filebeat å®ä¾‹æ—¶ï¼Œè¯·ç¡®ä¿æ¯ä¸ªå®ä¾‹éƒ½å…·æœ‰ä¸åŒçš„<code>path.data</code>å€¼ã€‚</li><li>log: filebeatè¿è¡Œæ—¥å¿—çš„ä½ç½®ã€‚</li></ul><blockquote><p>å½“ä½ æŠŠfilebeat.yamlæ”¾åœ¨å¤–éƒ¨ä½ç½®æ—¶ï¼Œå¯èƒ½éœ€è¦é…ç½®ä¸Šé¢çš„ä¿¡æ¯</p></blockquote><h2 id="é…ç½®å…¨å±€å±æ€§" tabindex="-1"><a class="header-anchor" href="#é…ç½®å…¨å±€å±æ€§"><span>é…ç½®å…¨å±€å±æ€§</span></a></h2><p>æ§åˆ¶è¯¸å¦‚å‘å¸ƒè€…è¡Œä¸ºå’ŒæŸäº›æ–‡ä»¶çš„ä½ç½®ã€‚ä¸‹é¢çš„é…ç½®éƒ½åœ¨filebeat å‘½åç©ºé—´ä¸‹ï¼Œå³ï¼š</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>filebeat.registry.path: ${path.data}/registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>registry.path</strong></p><p>æ³¨å†Œè¡¨çš„æ ¹è·¯å¾„ã€‚å¦‚æœä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å°†å…¶è§†ä¸ºç›¸å¯¹äºæ•°æ®è·¯å¾„ã€‚ç¼ºçœå€¼ä¸º <code>${path.data}/registry</code>ã€‚</p><p>æ³¨å†Œè¡¨å°†å…¶æ•°æ®å­˜å‚¨åœ¨å­ç›®å½• filebeat/data.json ä¸­ã€‚å®ƒè¿˜åŒ…å«ä¸€ä¸ªåä¸º filebeat/meta.json çš„å…ƒæ•°æ®æ–‡ä»¶ã€‚å…ƒæ–‡ä»¶åŒ…å«æ–‡ä»¶æ ¼å¼ç‰ˆæœ¬å·ã€‚data.jsonçš„å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;d:\\logs\\aa.log&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
        <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-03-19T21:16:07.1332085+08:00&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">-1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;meta&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">&quot;FileStateOS&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;idxhi&quot;</span><span class="token operator">:</span> <span class="token number">9043968</span><span class="token punctuation">,</span>
            <span class="token property">&quot;idxlo&quot;</span><span class="token operator">:</span> <span class="token number">148068</span><span class="token punctuation">,</span>
            <span class="token property">&quot;vol&quot;</span><span class="token operator">:</span> <span class="token number">3840767598</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å†Œè¡¨ä»…åœ¨åˆ·æ–°æ–°äº‹ä»¶æ—¶æ›´æ–°ï¼Œè€Œä¸æ˜¯åœ¨é¢„å®šä¹‰çš„æ—¶é—´æ®µå†…æ›´æ–°ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæŸäº›çŠ¶æ€çš„ TTL å·²è¿‡æœŸï¼Œåˆ™åªæœ‰åœ¨å¤„ç†æ–°äº‹ä»¶æ—¶æ‰ä¼šåˆ é™¤è¿™äº›çŠ¶æ€ã€‚</p><p><strong>registry.file_permissions</strong></p><p>åº”ç”¨äºæ³¨å†Œè¡¨æ•°æ®æ–‡ä»¶çš„æƒé™æ©ç ã€‚é»˜è®¤å€¼ä¸º 0600ã€‚</p><p><strong>registry.flush</strong></p><p>æ§åˆ¶ä½•æ—¶å°†æ³¨å†Œè¡¨é¡¹å†™å…¥ç£ç›˜ï¼ˆåˆ·æ–°ï¼‰çš„è¶…æ—¶å€¼ã€‚å¦‚æœè®¾ç½®ä¸º 0sï¼Œåˆ™åœ¨æ¯æ‰¹äº‹ä»¶æˆåŠŸå‘å¸ƒåï¼Œæ³¨å†Œè¡¨å°†å†™å…¥ç£ç›˜ã€‚é»˜è®¤å€¼ä¸º 0ã€‚</p><p>å½“ Filebeat æ­£å¸¸å…³é—­æ—¶ï¼Œæ³¨å†Œè¡¨å§‹ç»ˆä¼šæ›´æ–°ã€‚å¼‚å¸¸å…³é—­åï¼Œå¦‚æœå€¼ä¸º &gt;0sï¼Œåˆ™æ³¨å†Œè¡¨å°†ä¸æ˜¯æœ€æ–°çš„ã€‚Filebeat å°†å†æ¬¡å‘é€å·²å‘å¸ƒçš„äº‹ä»¶ï¼ˆå–å†³äºä¸Šæ¬¡æ›´æ–°çš„æ³¨å†Œè¡¨æ–‡ä»¶ä¸­çš„å€¼ï¼‰ã€‚</p><p>è®¾ç½®ä¸ºå€¼ &gt;0 å¯å‡å°‘å†™å…¥æ“ä½œï¼Œä»è€Œå¸®åŠ© Filebeat å¤„ç†æ›´å¤šäº‹ä»¶ã€‚</p><p><strong>shutdown_timeout</strong></p><p>åœ¨ Filebeat å…³é—­ä¹‹å‰ç­‰å¾…å‘å¸ƒæœåŠ¡å™¨å®Œæˆå‘é€äº‹ä»¶çš„å…³é—­æ—¶é—´ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤é€‰é¡¹å¤„äºç¦ç”¨çŠ¶æ€ï¼ŒFilebeat ä¸ä¼šç­‰å¾…å‘å¸ƒè€…å®Œæˆå‘é€äº‹ä»¶åæ‰å…³é—­ã€‚è¿™æ„å‘³ç€ï¼Œå½“æ‚¨é‡æ–°å¯åŠ¨ Filebeat æ—¶ï¼Œå°†å†æ¬¡å‘é€å‘é€åˆ°è¾“å‡ºä½†åœ¨ Filebeat å…³é—­ä¹‹å‰æœªç¡®è®¤çš„ä»»ä½•äº‹ä»¶ã€‚</p><p>æ‚¨å¯ä»¥é…ç½®è¯¥é€‰é¡¹ä»¥æŒ‡å®š Filebeat åœ¨å…³é—­ä¹‹å‰ç­‰å¾…å‘å¸ƒæœåŠ¡å™¨å®Œæˆå‘é€äº‹ä»¶çš„æœ€é•¿æ—¶é—´ã€‚</p><p>æ­¤é€‰é¡¹ä¸å»ºè®®è¿›è¡Œè®¾ç½®ï¼Œå› ä¸ºæ­£ç¡®å€¼åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äº Filebeat è¿è¡Œçš„ç¯å¢ƒå’Œè¾“å‡ºçš„å½“å‰çŠ¶æ€ã€‚</p><h2 id="å¸¸è§„é…ç½®é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#å¸¸è§„é…ç½®é€‰é¡¹"><span>å¸¸è§„é…ç½®é€‰é¡¹</span></a></h2><p>ç”±äºå®ƒä»¬æ˜¯å¸¸ç”¨é€‰é¡¹ï¼Œå› æ­¤å®ƒä»¬ä¸å¸¦å‘½åç©ºé—´ã€‚<strong>è¿™äº›å­—æ®µå¯ä»¥åœ¨ç”¨åœ¨inputå‘½åç©ºé—´ä¸‹</strong>ã€‚ä¾‹å¦‚ï¼š</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>name: &quot;my-shipper&quot;
tags: [&quot;service-X&quot;, &quot;web-tier&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>name</strong></p><p>filebeatçš„åç§°ã€‚å¦‚æœæ­¤é€‰é¡¹ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨æœåŠ¡å™¨çš„hostname ã€‚è¯¥åç§°ä½œä¸º<code>agent.name</code>å­—æ®µçš„å€¼ï¼ŒåŒ…å«åœ¨æ¯ä¸ªå·²å‘å¸ƒçš„äº‹ä»¶ä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¯¥åç§°å¯¹å•ä¸ª Beat å‘é€çš„æ‰€æœ‰äº¤æ˜“è¿›è¡Œåˆ†ç»„ã€‚</p><p><strong>tags</strong></p><p>è¯¥å€¼åŒ…å«åœ¨æ—¥å¿—äº‹ä»¶çš„<code>tags</code>å­—æ®µä¸­ã€‚è¯¥å€¼æ˜¯æ•°ç»„</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>tags: [&quot;my-service&quot;, &quot;hardware&quot;, &quot;test&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>fields</strong></p><p>è¯¥å€¼åŒ…å«åœ¨æ—¥å¿—äº‹ä»¶çš„<code>fields</code>å­—æ®µä¸­ã€‚è¯¥å€¼å¯ä»¥æ˜¯æ ‡é‡å€¼ã€æ•°ç»„ã€å­—å…¸æˆ–è¿™äº›å­—æ®µçš„ä»»ä½•åµŒå¥—ç»„åˆ</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>fields: {project: &quot;myproject&quot;, instance-id: &quot;574734885120952459&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>fields_under_root</strong></p><p>å¦‚æœæ­¤é€‰é¡¹è®¾ç½®ä¸º trueï¼Œåˆ™<strong>fieldså­—æ®µçš„å€¼</strong>å°†ä½œä¸ºé¡¶çº§åŸŸå­˜å‚¨åœ¨è¾“å‡ºæ–‡æ¡£ä¸­ï¼Œè€Œä¸æ˜¯åˆ†ç»„åˆ°<strong>fields</strong>å­å­—å…¸ä¸‹ã€‚å¦‚æœè‡ªå®šä¹‰å­—æ®µåç§°ä¸å…¶ä»–å­—æ®µåç§°å†²çªï¼Œåˆ™è‡ªå®šä¹‰å­—æ®µå°†è¦†ç›–å…¶ä»–å­—æ®µ</p><p><strong>processors</strong></p><p>æ•°æ®çš„å¤„ç†å™¨åˆ—è¡¨ã€‚å¯¹æ—¥å¿—äº‹ä»¶è¿›è¡Œè½¬åŒ–è§£æç­‰æ“ä½œ</p><p><strong>max_procs</strong></p><p>è®¾ç½®å¯ä»¥åŒæ—¶æ‰§è¡Œçš„ CPU çš„æœ€å¤§æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯ç³»ç»Ÿä¸­å¯ç”¨çš„é€»è¾‘ CPU æ•°ã€‚</p><h2 id="åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶"><span>åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶</span></a></h2><p>Filebeat å¯ä»¥ä¸ºè¾“å…¥å’Œæ¨¡å—åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œå…è®¸æ‚¨å°†é…ç½®åˆ†æˆå¤šä¸ªè¾ƒå°çš„é…ç½®æ–‡ä»¶ã€‚</p><p>å¯¹äºè¾“å…¥é…ç½®ï¼Œè¯·åœ¨æ–‡ä»¶éƒ¨åˆ†æŒ‡å®šfilebeat.config.inputsé€‰é¡¹ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">filebeat.config.inputs</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> inputs.d/<span class="token important">*.yml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰¾åˆ°çš„æ¯ä¸ªæ–‡ä»¶éƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å®šä¹‰çš„åˆ—è¡¨</p><p>æ¯ä¸ªå¤–éƒ¨é…ç½®æ–‡ä»¶çš„ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯ä»¥<code>type</code>å¼€å¤´çš„è¾“å…¥å®šä¹‰ã€‚ä¾‹å¦‚ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /var/log/mysql.log
  <span class="token key atrule">scan_frequency</span><span class="token punctuation">:</span> 10s

<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /var/log/apache.log
  <span class="token key atrule">scan_frequency</span><span class="token punctuation">:</span> 5s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®æ—¶åŠ è½½é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#å®æ—¶åŠ è½½é…ç½®æ–‡ä»¶"><span>å®æ—¶åŠ è½½é…ç½®æ–‡ä»¶</span></a></h2><p>Filebeat å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œæ”¯æŒåŠ¨æ€é‡æ–°åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ä¸æ”¯æŒé‡æ–°åŠ è½½ä¸»é…ç½®æ–‡ä»¶ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">filebeat.config.inputs</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> configs/<span class="token important">*.yml</span>
  <span class="token key atrule">reload.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">reload.period</span><span class="token punctuation">:</span> 10s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¦å°† <code>period </code>è®¾ç½®ä¸ºå°äº 1sï¼Œå› ä¸ºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´é€šå¸¸ä»¥ç§’ä¸ºå•ä½å­˜å‚¨ã€‚å°† <code>period</code>è®¾ç½®ä¸ºå°äº 1 å°†å¯¼è‡´ä¸å¿…è¦çš„å¼€é”€</p><h2 id="æ—¥å¿—é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—é…ç½®"><span>æ—¥å¿—é…ç½®</span></a></h2><p>filebeatè¿è¡Œæ—¥å¿—é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>logging.level: info
logging.to_files: true
logging.files:
  path: /var/log/filebeat
  name: filebeat
  keepfiles: 7
  permissions: 0644
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº†åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æ—¥å¿—è®°å½•é€‰é¡¹å¤–ï¼Œè¿˜å¯ä»¥ä»å‘½ä»¤è¡Œä¿®æ”¹æ—¥å¿—è®°å½•è¾“å‡ºé…ç½®ã€‚</p><p><strong>logging.to_stderr</strong></p><p>å¦‚æœä¸º trueï¼Œåˆ™å°†æ‰€æœ‰æ—¥å¿—è®°å½•è¾“å‡ºå†™å…¥æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚è¿™ç­‰æ•ˆäºä½¿ç”¨-eå‘½ä»¤è¡Œé€‰é¡¹ã€‚</p><p><strong>logging.to_syslog</strong></p><p>å¦‚æœä¸º trueï¼Œåˆ™å°†æ‰€æœ‰æ—¥å¿—è®°å½•è¾“å‡ºå†™å…¥ç³»ç»Ÿæ—¥å¿—ã€‚</p><p><strong>logging.to_eventlog</strong></p><p>å¦‚æœä¸º trueï¼Œåˆ™å°†æ‰€æœ‰æ—¥å¿—è®°å½•è¾“å‡ºå†™å…¥ Windows äº‹ä»¶æ—¥å¿—ã€‚</p><p><strong>logging.to_files</strong></p><p>å¦‚æœä¸º trueï¼Œåˆ™å°†æ‰€æœ‰æ—¥å¿—è®°å½•è¾“å‡ºå†™å…¥æ–‡ä»¶ã€‚å½“è¾¾åˆ°æ—¥å¿—æ–‡ä»¶å¤§å°é™åˆ¶æ—¶ï¼Œå°†è‡ªåŠ¨è½®æ¢æ—¥å¿—æ–‡ä»¶ã€‚</p><p><strong>logging.level</strong></p><p>debugã€infoã€warningã€errorã€‚ç¼ºçœæ—¥å¿—çº§åˆ«ä¸º infoã€‚</p><p><strong>logging.metrics.enabled</strong></p><p>è®°å½•æ€§èƒ½æŒ‡æ ‡ã€‚é»˜è®¤å€¼ä¸º trueã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹æ—¥å¿—è¡Œï¼š</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>2017-12-17T19:17:42.667-0500    INFO    [metrics]       log/log.go:110  Non-zero metrics in the last 30s: beat.info.uptime.ms=30004 beat.memstats.gc_next=5046416
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>logging.metrics.period</strong></p><p>è®°å½•å†…éƒ¨æŒ‡æ ‡çš„æ—¶é—´æ®µã€‚é»˜è®¤å€¼ä¸º 30 ç§’ã€‚</p><p><strong>logging.files.path</strong></p><p>æ—¥å¿—æ–‡ä»¶å†™å…¥çš„ç›®å½•ã€‚é»˜è®¤å€¼ä¸ºæ—¥å¿—è·¯å¾„ã€‚</p><p><strong>logging.files.name</strong></p><p>æ—¥å¿—å†™å…¥çš„æ–‡ä»¶çš„åç§°ã€‚é»˜è®¤å€¼ä¸º filebeatã€‚</p><p><strong>logging.files.rotateeverybytes</strong></p><p>æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ã€‚å¦‚æœè¾¾åˆ°é™åˆ¶ï¼Œå°†ç”Ÿæˆä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚é»˜è®¤å¤§å°é™åˆ¶ä¸º 10485760 ï¼ˆ10 MBï¼‰ã€‚</p><p><strong>logging.files.keepfiles</strong></p><p>è¦ä¿ç•™åœ¨ç£ç›˜ä¸Šçš„æœ€æ–°è½®æ¢æ—¥å¿—æ–‡ä»¶æ•°ã€‚è¾ƒæ—§çš„æ–‡ä»¶åœ¨æ—¥å¿—è½®æ¢æœŸé—´è¢«åˆ é™¤ã€‚é»˜è®¤å€¼ä¸º 7ã€‚é€‰é¡¹å¿…é¡»åœ¨ 2 åˆ° 1024 ä¸ªæ–‡ä»¶çš„èŒƒå›´å†…ã€‚</p><p><strong>logging.files.permissions</strong></p><p>è½®æ¢æ—¥å¿—æ–‡ä»¶æ—¶è¦åº”ç”¨çš„æƒé™æ©ç ã€‚é»˜è®¤å€¼ä¸º 0600ã€‚</p><h1 id="è¾“å…¥" tabindex="-1"><a class="header-anchor" href="#è¾“å…¥"><span>è¾“å…¥</span></a></h1><p>è¿™é‡Œä¸»è¦è®²logç±»å‹çš„è¾“å…¥ï¼Œå…¶ä»–ç±»å‹è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log 
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /var/log/system.log
    <span class="token punctuation">-</span> /var/log/wifi.log
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log 
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;/var/log/apache2/*&quot;</span>
  <span class="token key atrule">fields</span><span class="token punctuation">:</span>
    <span class="token key atrule">apache</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">fields_under_root</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸»è¦çš„é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦çš„é…ç½®"><span>ä¸»è¦çš„é…ç½®</span></a></h2><p><strong>paths</strong></p><p>Golang Globæ¨¡å¼çš„æ–‡ä»¶åˆ—è¡¨ã€‚ ä¾‹å¦‚ï¼š/var/log/*/*.logã€‚ è¿™ä¼šä» /var/log çš„å­æ–‡ä»¶å¤¹ä¸­è·å–æ‰€æœ‰ .log æ–‡ä»¶ï¼Œ ä½†æ˜¯ä¸ä¼šä» /var/log æ–‡ä»¶å¤¹æœ¬èº«è·å–æ—¥å¿—æ–‡ä»¶ã€‚</p><p></p><p><strong>recursive_glob.enabled</strong></p><p>å°† <code>** </code>æ‰©å±•ä¸ºé€’å½’ glob æ¨¡å¼ã€‚ å¯ç”¨æ­¤åŠŸèƒ½åï¼Œæ¯ä¸ªè·¯å¾„ä¸­æœ€å³è¾¹çš„ <code>**</code> å°†æ‰©å±•ä¸ºå›ºå®šæ•°é‡çš„ glob æ¨¡å¼ã€‚ ä¾‹å¦‚ï¼š<code>/foo/**</code> æ‰©å±•ä¸º <code>/fooã€/foo/*ã€/foo/*/*</code> ç­‰ã€‚ å¦‚æœå¯ç”¨ï¼Œå®ƒå°†å•ä¸ª<code>**</code>æ‰©å±•ä¸º 8 çº§æ·±åº¦<code>*</code>æ¨¡å¼ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨æ­¤åŠŸèƒ½ã€‚</p><p><strong>encoding</strong></p><p>æ—¥å¿—çš„æ–‡ä»¶ç¼–ç ã€‚</p><p><strong>exclude_lines</strong></p><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ’é™¤è¡Œã€‚å¦‚æœæŒ‡å®šäº†å¤šè¡Œè®¾ç½®ï¼Œåˆ™åœ¨ exclude_lines è¿‡æ»¤è¡Œä¹‹å‰ï¼Œå°†å¤šè¡Œæ¶ˆæ¯åˆå¹¶ä¸ºä¸€è¡Œã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹å°† Filebeat é…ç½®ä¸ºåˆ é™¤ä»»ä½•ä»¥ DBG å¼€å¤´çš„è¡Œã€‚</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>filebeat.inputs:
- type: log
  ...
  exclude_lines: [&#39;^DBG&#39;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>include_lines</strong></p><p>åŒ…å«æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„è¡Œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¡Œéƒ½è¢«å¯¼å‡ºã€‚ ç©ºè¡Œè¢«å¿½ç•¥ã€‚</p><p>å¦‚æœæŒ‡å®šäº†å¤šè¡Œè®¾ç½®ï¼Œåˆ™æ¯ä¸ªå¤šè¡Œæ¶ˆæ¯åœ¨è¢« include_lines è¿‡æ»¤ä¹‹å‰ç»„åˆæˆä¸€è¡Œã€‚</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>filebeat.inputs:
- type: log
  ...
  include_lines: [&#39;^ERR&#39;, &#39;^WARN&#39;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å¦‚æœåŒæ—¶å®šä¹‰äº† include_lines å’Œ exclude_linesï¼ŒFilebeat ä¼šå…ˆæ‰§è¡Œ include_linesï¼Œç„¶åå†æ‰§è¡Œ exclude_linesã€‚ è¿™ä¸¤ä¸ªé€‰é¡¹çš„å®šä¹‰é¡ºåºæ— å…³ç´§è¦ã€‚</p></blockquote><p><strong>harvester_buffer_size</strong></p><p>æ¯ä¸ªæ”¶é›†å™¨ä½¿ç”¨çš„ç¼“å†²åŒºå¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ é»˜è®¤å€¼ä¸º 16384ã€‚</p><p><strong>max_bytes</strong></p><p>å•ä¸ªæ—¥å¿—æ¶ˆæ¯å¯ä»¥æ‹¥æœ‰çš„æœ€å¤§å­—èŠ‚æ•°ã€‚ max_bytes ä¹‹åçš„æ‰€æœ‰å­—èŠ‚éƒ½è¢«ä¸¢å¼ƒå¹¶ä¸”ä¸å‘é€ã€‚ é»˜è®¤å€¼ä¸º 10MB (10485760)ã€‚</p><p><strong>exclude_files</strong></p><p>å¿½ç•¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥è¿›ä¸€æ­¥çª„åŒ–pathsæŒ‡å®šçš„æ–‡ä»¶èŒƒå›´ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log
  <span class="token punctuation">...</span>
  <span class="token key atrule">exclude_files</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;\.gz$&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¤šè¡Œè®¾ç½®" tabindex="-1"><a class="header-anchor" href="#å¤šè¡Œè®¾ç½®"><span>å¤šè¡Œè®¾ç½®</span></a></h2><p>ä¸‹é¢æ˜¯javaä¸­æŠ›å‡ºçš„å¼‚å¸¸æ—¥å¿—ã€‚æˆ‘ä»¬è¦æŠŠè¿™ä¸ªå¤šè¡Œå½’åˆ°ä¸€è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>beat-logstash-some-name-832-2015.11.28<span class="token punctuation">]</span> IndexNotFoundException<span class="token punctuation">[</span>no such index<span class="token punctuation">]</span>
    at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver<span class="token variable">$WildcardExpressionResolver</span>.resolve<span class="token punctuation">(</span>IndexNameExpressionResolver.java:566<span class="token punctuation">)</span>
    at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices<span class="token punctuation">(</span>IndexNameExpressionResolver.java:133<span class="token punctuation">)</span>
    at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices<span class="token punctuation">(</span>IndexNameExpressionResolver.java:77<span class="token punctuation">)</span>
    at org.elasticsearch.action.admin.indices.delete.TransportDeleteIndexAction.checkBlock<span class="token punctuation">(</span>TransportDeleteIndexAction.java:75<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥å‘ç°ï¼Œæ­£å¸¸çš„è¡Œå¼€å¤´éƒ½æ˜¯<code> [</code> , ä¸¤ä¸ª<code> [</code> ä¹‹é—´çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å½’ä¸ºä¸€è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">multiline.pattern</span><span class="token punctuation">:</span> <span class="token string">&#39;^\[&#39;</span>
<span class="token key atrule">multiline.negate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">multiline.match</span><span class="token punctuation">:</span> after
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„è¡Œè¢«è§†ä¸º<strong>å‰ä¸€è¡Œçš„å»¶ç»­</strong>æˆ–<strong>æ–°å¤šè¡Œäº‹ä»¶çš„å¼€å§‹</strong></p><p><strong>multiline.negate</strong></p><p>å®šä¹‰æ¨¡å¼æ˜¯å¦è¢«å¦å®šã€‚é»˜è®¤å€¼ä¸ºfalse.</p><p><strong>multiline.match</strong></p><p>æŒ‡å®š Filebeat å¦‚ä½•å°†åŒ¹é…çš„è¡Œç»„åˆæˆä¸€ä¸ªäº‹ä»¶ã€‚è®¾ç½®ä¸ºafteræˆ–beforeã€‚</p><table><thead><tr><th>è®¾ç½®ä¸º<code>negate</code></th><th>è®¾ç½®ä¸º<code>match</code></th><th>ç»“æœ</th><th>ä¾‹å­<code>pattern: ^b</code></th></tr></thead><tbody><tr><td>false</td><td>after</td><td>åŒ¹é…æ¨¡å¼çš„è¿ç»­è¡Œè¢«é™„åŠ åˆ°ä¸åŒ¹é…çš„å‰ä¸€è¡Œã€‚</td><td><img src="data:image/png;base64,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" alt="img" loading="lazy"></td></tr><tr><td>false</td><td>before</td><td>ä¸æ¨¡å¼åŒ¹é…çš„è¿ç»­è¡Œè¢«æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªä¸åŒ¹é…çš„è¡Œã€‚</td><td><img src="data:image/png;base64,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" alt="img" loading="lazy"></td></tr><tr><td>true</td><td>after</td><td>ä¸åŒ¹é…æ¨¡å¼çš„è¿ç»­è¡Œå°†é™„åŠ åˆ°åŒ¹é…çš„å‰ä¸€è¡Œã€‚</td><td><img src="data:image/png;base64,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" alt="img" loading="lazy"></td></tr><tr><td>true</td><td>before</td><td>ä¸æ¨¡å¼ä¸åŒ¹é…çš„è¿ç»­è¡Œè¢«æ·»åŠ åˆ°åŒ¹é…çš„ä¸‹ä¸€è¡Œã€‚</td><td><img src="data:image/png;base64,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" alt="img" loading="lazy"></td></tr></tbody></table><p>multiline.flush_pattern</p><p>æŒ‡å®šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå…¶ä¸­å½“å‰çš„å¤šè¡Œå°†ä»å†…å­˜ä¸­åˆ·æ–°ï¼Œç»“æŸå¤šè¡Œæ¶ˆæ¯ã€‚</p><p>multiline.max_lines</p><p>å¯ä»¥ç»„åˆæˆä¸€ä¸ªäº‹ä»¶çš„æœ€å¤§è¡Œæ•°ã€‚å¦‚æœå¤šè¡Œæ¶ˆæ¯åŒ…å«å¤šäºmax_linesï¼Œåˆ™ä¸¢å¼ƒä»»ä½•å…¶ä»–è¡Œã€‚é»˜è®¤å€¼ä¸º 500ã€‚</p><p>multiline.timeout</p><p>åœ¨æŒ‡å®šçš„è¶…æ—¶ä¹‹åï¼Œå³ä½¿æ²¡æœ‰æ‰¾åˆ°æ–°çš„æ¨¡å¼æ¥å¯åŠ¨æ–°äº‹ä»¶ï¼ŒFilebeat ä¹Ÿä¼šå‘é€å¤šè¡Œäº‹ä»¶ã€‚é»˜è®¤ä¸º 5 ç§’ã€‚</p><h2 id="è¿è¡Œæ–¹å¼é…ç½®" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæ–¹å¼é…ç½®"><span>è¿è¡Œæ–¹å¼é…ç½®</span></a></h2><h3 id="ignore-older" tabindex="-1"><a class="header-anchor" href="#ignore-older"><span><strong>ignore_older</strong></span></a></h3><p>å¦‚æœå¯ç”¨æ­¤é€‰é¡¹ï¼ŒFilebeat å°†å¿½ç•¥åœ¨æŒ‡å®šæ—¶é—´è·¨åº¦ä¹‹å‰ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p><p>å¦‚æœæ‚¨é•¿æ—¶é—´ä¿ç•™æ—¥å¿—æ–‡ä»¶ï¼Œé…ç½®ignore_older å¯èƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å¯åŠ¨ Filebeatï¼Œä½†åªæƒ³å‘é€æœ€æ–°çš„æ–‡ä»¶å’Œä¸Šå‘¨çš„æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥é…ç½®æ­¤é€‰é¡¹ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨æ—¶é—´å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 2hï¼ˆ2 å°æ—¶ï¼‰å’Œ 5mï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚ é»˜è®¤å€¼ä¸º 0ï¼Œå³ç¦ç”¨è¯¥è®¾ç½®ã€‚</p><p>å—æ­¤è®¾ç½®å½±å“çš„æ–‡ä»¶åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>ä¹‹å‰æœªæ›¾è¢«æ”¶é›†è¿‡çš„æ–‡ä»¶</li><li>ä¹‹å‰è¯»å–è¿‡ï¼Œä½†æ˜¯é•¿æ—¶é—´æ²¡æœ‰æ›´æ–°çš„æ–‡ä»¶</li></ul><p>å¯¹äºä»¥å‰ä»æœªè§è¿‡çš„æ–‡ä»¶ï¼Œåç§»çŠ¶æ€è®¾ç½®ä¸ºæ–‡ä»¶æœ«å°¾ã€‚ å¦‚æœçŠ¶æ€å·²ç»å­˜åœ¨ï¼Œåˆ™åç§»é‡ä¸ä¼šæ”¹å˜ã€‚ å¦‚æœç¨åå†æ¬¡æ›´æ–°æ–‡ä»¶ï¼Œåˆ™åœ¨è®¾ç½®çš„åç§»ä½ç½®ç»§ç»­è¯»å–ã€‚</p><p>ignore_older è®¾ç½®ä¾èµ–äºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ¥ç¡®å®šæ–‡ä»¶æ˜¯å¦è¢«å¿½ç•¥ã€‚ å¦‚æœåœ¨å°†è¡Œå†™å…¥æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ²¡æœ‰æ›´æ–°ï¼ˆè¿™å¯èƒ½åœ¨ Windows ä¸Šå‘ç”Ÿï¼‰ï¼Œignore_older è®¾ç½®å¯èƒ½ä¼šå¯¼è‡´ Filebeat å¿½ç•¥è¯¥æ–‡ä»¶ã€‚</p><p><strong>åœ¨ Filebeat å¯ä»¥å¿½ç•¥æ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»å…³é—­è¯¥æ–‡ä»¶ã€‚ ä¸ºç¡®ä¿æ–‡ä»¶åœ¨è¢«å¿½ç•¥æ—¶ä¸å†è¢«æ”¶é›†ï¼Œæ‚¨å¿…é¡»å°† ignore_older è®¾ç½®ä¸ºæ¯” close_inactive æ›´é•¿çš„æ—¶é—´ã€‚</strong></p><p>å¦‚æœå½“å‰æ­£åœ¨æ”¶å‰²çš„æ–‡ä»¶å±äºignore_olderï¼Œåˆ™æ”¶é›†å™¨å°†é¦–å…ˆå®Œæˆå¯¹è¯¥æ–‡ä»¶çš„è¯»å–ï¼Œå¹¶åœ¨è¾¾åˆ°close_inactiveåå°†å…¶å…³é—­ã€‚ ç„¶åï¼Œåœ¨é‚£ä¹‹åï¼Œè¯¥æ–‡ä»¶å°†è¢«å¿½ç•¥ã€‚</p><p><strong>scan_frequency</strong></p><p>æ£€æŸ¥æ–°æ–‡ä»¶çš„é¢‘ç‡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æŒ‡å®šåƒ /var/log/* è¿™æ ·çš„ globï¼Œåˆ™ä½¿ç”¨ scan_frequency æŒ‡å®šçš„é¢‘ç‡æ‰«æç›®å½•ä¸­çš„æ–°æ–‡ä»¶ã€‚ æˆ‘ä»¬ä¸å»ºè®®å°†æ­¤å€¼è®¾ç½®ä¸º &lt;1sã€‚</p><p>å¦‚æœæ‚¨éœ€è¦è¿‘ä¹å®æ—¶åœ°å‘é€æ—¥å¿—è¡Œï¼Œè¯·ä¸è¦ä½¿ç”¨éå¸¸ä½çš„ scan_frequencyï¼Œ è€Œæ˜¯è°ƒæ•´ close_inactive ä»¥ä¾¿æ–‡ä»¶å¤„ç†ç¨‹åºä¿æŒæ‰“å¼€çŠ¶æ€å¹¶ä¸æ–­è½®è¯¢æ‚¨çš„æ–‡ä»¶ã€‚</p><p>é»˜è®¤è®¾ç½®ä¸º 10 ç§’ã€‚</p><p><strong>scan.sort</strong></p><p>æŒ‡å®šæ‰«æçš„é¡ºåºï¼Œ å¯èƒ½çš„å€¼æ˜¯ modtime å’Œ filenameã€‚ è¦æŒ‰æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ’åºï¼Œè¯·ä½¿ç”¨ modtimeï¼Œå¦åˆ™ä½¿ç”¨ filenameã€‚ å°†æ­¤é€‰é¡¹ç•™ç©ºä»¥ç¦ç”¨å®ƒã€‚é»˜è®¤è®¾ç½®ä¸ºç¦ç”¨ã€‚</p><p><strong>scan.order</strong></p><p>æŒ‡å®šå‡åºæˆ–é™åºã€‚å¯èƒ½çš„å€¼æ˜¯ asc æˆ– descã€‚é»˜è®¤è®¾ç½®ä¸º ascã€‚</p><p><strong>tail_files</strong></p><p>å¦‚æœæ­¤é€‰é¡¹è®¾ç½®ä¸º trueï¼ŒFilebeat ä¼šåœ¨æ¯ä¸ªæ–‡ä»¶çš„æœ«å°¾è€Œä¸æ˜¯å¼€å¤´å¼€å§‹è¯»å–æ–°æ–‡ä»¶ã€‚ å½“æ­¤é€‰é¡¹ä¸æ—¥å¿—è½®æ¢ç»“åˆä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šè·³è¿‡æ–°æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªæ—¥å¿—æ¡ç›®ã€‚ é»˜è®¤è®¾ç½®ä¸ºFalseã€‚</p><p>æ­¤é€‰é¡¹é€‚ç”¨äº Filebeat å°šæœªå¤„ç†çš„æ–‡ä»¶ã€‚ å¦‚æœæ‚¨ä¹‹å‰è¿è¡Œè¿‡ Filebeat å¹¶ä¸”æ–‡ä»¶çš„çŠ¶æ€å·²ç»æŒä¹…åŒ–ï¼Œtail_files å°†ä¸é€‚ç”¨ã€‚</p><p><strong>symlinks</strong></p><p>é™¤äº†å¸¸è§„æ–‡ä»¶ä¹‹å¤–ï¼Œè¯¥é€‰é¡¹è¿˜å…è®¸ Filebeat æ”¶é›†ç¬¦å·é“¾æ¥ã€‚æ”¶é›†ç¬¦å·é“¾æ¥æ—¶ï¼ŒFilebeat æ‰“å¼€å¹¶è¯»å–åŸå§‹æ–‡ä»¶ã€‚</p><p>å½“æ‚¨é…ç½®ç¬¦å·é“¾æ¥ä»¥è¿›è¡Œæ”¶é›†æ—¶ï¼Œè¯·ç¡®ä¿æ’é™¤åŸå§‹è·¯å¾„ã€‚å¦‚æœå°†å•ä¸ªè¾“å…¥é…ç½®ä¸ºåŒæ—¶è·å–ç¬¦å·é“¾æ¥å’ŒåŸå§‹æ–‡ä»¶ï¼ŒFilebeat å°†æ£€æµ‹åˆ°é—®é¢˜å¹¶ä»…å¤„ç†å®ƒæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœé…ç½®äº†ä¸¤ä¸ªä¸åŒçš„è¾“å…¥ï¼ˆä¸€ä¸ªç”¨äºè¯»å–ç¬¦å·é“¾æ¥ï¼Œå¦ä¸€ä¸ªç”¨äºè¯»å–åŸå§‹è·¯å¾„ï¼‰ï¼Œåˆ™ä¸¤æ¡è·¯å¾„éƒ½å°†è¢«æ”¶é›†ï¼Œå¯¼è‡´ Filebeat å‘é€é‡å¤æ•°æ®å¹¶ä¸”è¾“å…¥ä¼šè¦†ç›–å½¼æ­¤çš„çŠ¶æ€ã€‚</p><p>å¦‚æœæ—¥å¿—æ–‡ä»¶çš„ç¬¦å·é“¾æ¥åœ¨æ–‡ä»¶åä¸­åŒ…å«å…¶ä»–å…ƒæ•°æ®ï¼Œå¹¶ä¸”æ‚¨å¸Œæœ›åœ¨ Logstash ä¸­å¤„ç†å…ƒæ•°æ®ï¼Œåˆ™è¯¥<code>symlinks</code>é€‰é¡¹å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼ŒKubernetes æ—¥å¿—æ–‡ä»¶å°±æ˜¯è¿™ç§æƒ…å†µã€‚</p><p>å› ä¸ºè¿™ä¸ªé€‰é¡¹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯ç¦ç”¨çš„ã€‚</p><h5 id="backoff" tabindex="-1"><a class="header-anchor" href="#backoff"><span><strong>backoff</strong></span></a></h5><p>è¯¥<code>backoff</code>é€‰é¡¹å®šä¹‰äº† Filebeat åœ¨åˆ°è¾¾ EOF åå†æ¬¡æ£€æŸ¥æ–‡ä»¶ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º 1sï¼Œè¿™æ„å‘³ç€å¦‚æœæ·»åŠ äº†æ–°è¡Œï¼Œåˆ™æ¯ç§’æ£€æŸ¥ä¸€æ¬¡æ–‡ä»¶ã€‚è¿™å¯ä»¥å®ç°è¿‘ä¹å®æ—¶çš„çˆ¬è¡Œã€‚æ¯æ¬¡æ–‡ä»¶ä¸­å‡ºç°æ–°è¡Œæ—¶ï¼Œè¯¥<code>backoff</code>å€¼éƒ½ä¼šé‡ç½®ä¸ºåˆå§‹å€¼ã€‚é»˜è®¤å€¼ä¸º 1 ç§’ã€‚</p><h5 id="max-backoff" tabindex="-1"><a class="header-anchor" href="#max-backoff"><span><strong>max_backoff</strong></span></a></h5><p>Filebeat åœ¨è¾¾åˆ° EOF åå†æ¬¡æ£€æŸ¥æ–‡ä»¶ä¹‹å‰ç­‰å¾…çš„æœ€é•¿æ—¶é—´ã€‚ç­‰å¾…æ—¶é—´æ˜¯ä¾æ¬¡å¢åŠ çš„ï¼Œä¾‹å¦‚ç¬¬ä¸€æ¬¡1ç§’ï¼Œç¬¬äºŒæ¬¡<code>2*1</code><em>ç§’ï¼Œç¬¬ä¸‰æ¬¡**2*2*1</em>ï¼Œç­‰å¾…æ—¶é—´ä¸ä¼šè¶…è¿‡<code>max_backoff</code>. è¿™ä¸ª2å°±æ˜¯å› å­ã€‚é»˜è®¤å€¼ä¸º 10 ç§’ã€‚</p><p>è¦æ±‚ï¼š<code>backoff &lt;= max_backoff &lt;= scan_frequency</code>ã€‚å¦‚æœ<code>max_backoff</code>éœ€è¦æ›´é«˜ï¼Œå»ºè®®æ”¹ä¸ºå…³é—­æ–‡ä»¶å¤„ç†ç¨‹åºï¼Œè®© Filebeat é‡æ–°æ‹¾å–æ–‡ä»¶ã€‚</p><h5 id="backoff-factor" tabindex="-1"><a class="header-anchor" href="#backoff-factor"><span><strong>backoff_factor</strong></span></a></h5><p>æ­¤é€‰é¡¹æŒ‡å®šç­‰å¾…æ—¶é—´å¢åŠ çš„é€Ÿåº¦ã€‚é€€é¿å› å­è¶Šå¤§ï¼Œè¾¾åˆ°<code>max_backoff</code>å€¼çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚é€€é¿å› å­å‘ˆæŒ‡æ•°å¢é•¿ã€‚é»˜è®¤å€¼ä¸º 2ã€‚</p><h5 id="harvester-limit" tabindex="-1"><a class="header-anchor" href="#harvester-limit"><span><strong>harvester_limit</strong></span></a></h5><p>ä¸ºä¸€ä¸ªè¾“å…¥å¹¶è¡Œå¯åŠ¨çš„æ”¶é›†å™¨æ•°é‡ã€‚è¿™ä¸æ‰“å¼€çš„æ–‡ä»¶å¤„ç†ç¨‹åºçš„æœ€å¤§æ•°é‡ç›´æ¥ç›¸å…³ã€‚é»˜è®¤ä¸º<code>harvester_limit</code>0ï¼Œè¡¨ç¤ºæ²¡æœ‰é™åˆ¶ã€‚å¦‚æœè¦æ”¶é›†çš„æ–‡ä»¶æ•°é‡è¶…è¿‡æ“ä½œç³»ç»Ÿçš„æ‰“å¼€æ–‡ä»¶å¤„ç†ç¨‹åºé™åˆ¶ï¼Œæ­¤é…ç½®å¾ˆæœ‰ç”¨ã€‚</p><p>å¯¹æ”¶é›†å™¨çš„æ•°é‡è®¾ç½®é™åˆ¶æ„å‘³ç€å¯èƒ½å¹¶éæ‰€æœ‰æ–‡ä»¶éƒ½å¹¶è¡Œæ‰“å¼€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨å°†æ­¤é€‰é¡¹ä¸<code>close_*</code>é€‰é¡¹ç»“åˆä½¿ç”¨ï¼Œä»¥ç¡®ä¿æ›´é¢‘ç¹åœ°åœæ­¢æ”¶é›†å™¨ï¼Œä»¥ä¾¿æ‹¾å–æ–°æ–‡ä»¶ã€‚</p><p>ç›®å‰ï¼Œå¦‚æœå¯ä»¥å†æ¬¡å¯åŠ¨æ–°çš„æ”¶é›†å™¨ï¼Œåˆ™æ”¶é›†å™¨æ˜¯éšæœºé‡‡é›†çš„ã€‚è¿™æ„å‘³ç€å¯èƒ½ä¼šå¯åŠ¨åˆšåˆšå…³é—­ç„¶åå†æ¬¡æ›´æ–°çš„æ–‡ä»¶çš„æ”¶é›†å™¨ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´æœªæ”¶å‰²çš„æ–‡ä»¶çš„æ”¶é›†å™¨ã€‚</p><h3 id="close-é…ç½®" tabindex="-1"><a class="header-anchor" href="#close-é…ç½®"><span>close_* é…ç½®</span></a></h3><p>close_* é…ç½®é€‰é¡¹ç”¨äºåœ¨ç‰¹å®šæ¡ä»¶æˆ–æ—¶é—´åå…³é—­æ”¶é›†å™¨ã€‚ å…³é—­æ”¶é›†å™¨æ„å‘³ç€å…³é—­æ–‡ä»¶å¤„ç†ç¨‹åºã€‚ scan_frequencyæ—¶é—´è¿‡å»åï¼Œ å°†å†æ¬¡æ”¶é›†è¯¥æ–‡ä»¶ã€‚ ä½†æ˜¯ï¼Œå¦‚æœåœ¨harvester å…³é—­æ—¶ç§»åŠ¨æˆ–åˆ é™¤æ–‡ä»¶ï¼ŒFilebeat å°†æ— æ³•å†æ¬¡æ‹¾å–è¯¥æ–‡ä»¶ï¼Œå¹¶ä¸”harvester å°šæœªè¯»å–çš„æ•°æ®éƒ½å°†ä¸¢å¤±ã€‚</p><p><strong>close_inactive</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼Œå¦‚æœåœ¨æŒ‡å®šçš„æ—¶é—´æ®µå†…æœªæ”¶é›†æ–‡ä»¶ï¼ŒFilebeat å°†å…³é—­æ–‡ä»¶å¥æŸ„ã€‚å½“æ”¶é›†å™¨è¯»å–æœ€åä¸€ä¸ªæ—¥å¿—è¡Œæ—¶ï¼Œå®šä¹‰æ—¶é—´æ®µçš„è®¡æ•°å™¨å¼€å§‹è®¡æ—¶ã€‚å®ƒä¸æ˜¯åŸºäºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚å¦‚æœå…³é—­çš„æ–‡ä»¶å†æ¬¡æ›´æ”¹ï¼Œåˆ™ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„æ”¶é›†å™¨ï¼Œå¹¶åœ¨ scan_frequency è¿‡å»åè·å–æœ€æ–°çš„æ›´æ”¹ã€‚</p><p>æˆ‘ä»¬å»ºè®®æ‚¨å°† close_inactive è®¾ç½®ä¸ºå¤§äºæ—¥å¿—æ–‡ä»¶æ›´æ–°çš„å€¼ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„æ—¥å¿—æ–‡ä»¶æ¯éš”å‡ ç§’æ›´æ–°ä¸€æ¬¡ï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°å°† close_inactive è®¾ç½®ä¸º 1mã€‚</p><p>å°† close_inactive è®¾ç½®ä¸ºè¾ƒä½çš„å€¼æ„å‘³ç€æ–‡ä»¶å¥æŸ„ä¼šæ›´å¿«å…³é—­ã€‚ ç„¶è€Œï¼Œè¿™æœ‰å‰¯ä½œç”¨ï¼Œå¦‚æœæ”¶é›†å™¨å…³é—­ï¼Œæ–°çš„æ—¥å¿—è¡Œä¸ä¼šè¿‘ä¹å®æ—¶åœ°å‘é€ã€‚</p><p>å…³é—­æ–‡ä»¶çš„æ—¶é—´æˆ³ä¸ä¾èµ–äºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚ ç›¸åï¼ŒFilebeat ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨æ—¶é—´æˆ³æ¥åæ˜ æ–‡ä»¶ä¸Šæ¬¡è·å–çš„æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœ close_inactive è®¾ç½®ä¸º 5 åˆ†é’Ÿï¼Œåˆ™ 5 åˆ†é’Ÿçš„å€’è®¡æ—¶åœ¨ Harvester è¯»å–æ–‡ä»¶çš„æœ€åä¸€è¡Œåå¼€å§‹ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨æ—¶é—´å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 2hï¼ˆ2 å°æ—¶ï¼‰å’Œ 5mï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚ é»˜è®¤å€¼ä¸º 5mã€‚</p><p><strong>close_renamed</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼ŒFilebeat ä¼šåœ¨é‡å‘½åæ–‡ä»¶æ—¶å…³é—­æ–‡ä»¶å¤„ç†ç¨‹åºã€‚ ä¾‹å¦‚ï¼Œåœ¨æ—‹è½¬æ–‡ä»¶æ—¶ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œharvester ä¿æŒæ‰“å¼€çŠ¶æ€å¹¶ç»§ç»­è¯»å–æ–‡ä»¶ï¼Œå› ä¸ºæ–‡ä»¶å¤„ç†ç¨‹åºä¸ä¾èµ–äºæ–‡ä»¶åã€‚ å¦‚æœå¯ç”¨äº† close_renamed é€‰é¡¹å¹¶ä¸”æ–‡ä»¶è¢«é‡å‘½åæˆ–ç§»åŠ¨ï¼Œä½¿å¾—å®ƒä¸å†ä¸æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼åŒ¹é…ï¼Œåˆ™ä¸ä¼šå†æ¬¡æ‹¾å–æ–‡ä»¶ã€‚ Filebeat å°†æ— æ³•å®Œæˆæ–‡ä»¶çš„è¯»å–ã€‚</p><blockquote><p>å¦‚æœæ‚¨çš„ Windows æ—¥å¿—è½®æ¢ç³»ç»Ÿç”±äºæ— æ³•è½®æ¢æ–‡ä»¶è€Œæ˜¾ç¤ºé”™è¯¯ï¼Œæ‚¨åº”è¯¥å¯ç”¨æ­¤é€‰é¡¹ã€‚</p></blockquote><p><strong>close_removed</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼ŒFilebeat ä¼šåœ¨åˆ é™¤æ–‡ä»¶æ—¶å…³é—­æ”¶é›†å™¨ã€‚ é€šå¸¸ï¼Œåªæœ‰åœ¨ close_inactive æŒ‡å®šçš„æ—¶é—´å†…å¤„äºéæ´»åŠ¨çŠ¶æ€åï¼Œæ‰åº”åˆ é™¤æ–‡ä»¶ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ–‡ä»¶è¢«æå‰åˆ é™¤å¹¶ä¸”æ‚¨æ²¡æœ‰å¯ç”¨ close_removedï¼ŒFilebeat ä¼šä¿æŒæ–‡ä»¶æ‰“å¼€ä»¥ç¡®ä¿æ”¶é›†å™¨å·²å®Œæˆã€‚ å¦‚æœæ­¤è®¾ç½®å¯¼è‡´æ–‡ä»¶ç”±äºè¿‡æ—©ä»ç£ç›˜ä¸­åˆ é™¤è€Œæœªå®Œå…¨è¯»å–ï¼Œè¯·ç¦ç”¨æ­¤é€‰é¡¹ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨æ­¤é€‰é¡¹ã€‚ å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œåˆ™è¿˜å¿…é¡»ç¦ç”¨ clean_removedã€‚</p><blockquote><p>å¦‚æœæ‚¨çš„ Windows æ—¥å¿—è½®æ¢ç³»ç»Ÿç”±äºæ— æ³•è½®æ¢æ–‡ä»¶è€Œæ˜¾ç¤ºé”™è¯¯ï¼Œè¯·ç¡®ä¿å¯ç”¨æ­¤é€‰é¡¹ã€‚</p></blockquote><p><strong>close_eof</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼ŒFilebeat ä¼šåœ¨åˆ°è¾¾æ–‡ä»¶æœ«å°¾æ—¶ç«‹å³å…³é—­æ–‡ä»¶ã€‚ å½“æ‚¨çš„æ–‡ä»¶åªå†™å…¥ä¸€æ¬¡å¹¶ä¸”ä¸æ—¶å¸¸æ›´æ–°æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨æ­¤é€‰é¡¹ã€‚</p><p><strong>close_timeout</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼ŒFilebeat ä¼šä¸ºæ¯ä¸ªæ”¶é›†å™¨æä¾›é¢„å®šä¹‰çš„ç”Ÿå‘½å‘¨æœŸã€‚æ— è®ºè¯»å–å™¨åœ¨æ–‡ä»¶ä¸­çš„å“ªä¸ªä½ç½®ï¼Œè¯»å–éƒ½å°†åœ¨ close_timeout æ—¶é—´è¿‡ååœæ­¢ã€‚</p><p>è™½ç„¶ close_timeout å°†åœ¨é¢„å®šä¹‰çš„è¶…æ—¶åå…³é—­æ–‡ä»¶ï¼Œä½†å¦‚æœæ–‡ä»¶ä»åœ¨æ›´æ–°ï¼ŒFilebeat å°†æ ¹æ®å®šä¹‰çš„ scan_frequency å†æ¬¡å¯åŠ¨æ–°çš„æ”¶é›†å™¨ã€‚å¹¶ä¸”è¿™ä¸ªæ”¶é›†å™¨çš„ close_timeout å°†é‡æ–°å¼€å§‹è¶…æ—¶å€’è®¡æ—¶ã€‚</p><p>è¿™ä¸ªé€‰é¡¹åœ¨è¾“å‡ºè¢«é˜»å¡çš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚å°† close_timeout è®¾ç½®ä¸º 5m å¯ç¡®ä¿æ–‡ä»¶å®šæœŸå…³é—­ï¼Œä»¥ä¾¿æ“ä½œç³»ç»Ÿå¯ä»¥é‡Šæ”¾å®ƒä»¬ã€‚</p><p>å¦‚æœæ‚¨å°† close_timeout è®¾ç½®ä¸ºç­‰äº ignore_olderï¼Œåˆ™å¦‚æœåœ¨æ”¶é›†å™¨å…³é—­æ—¶å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ™ä¸ä¼šæ‹¾å–è¯¥æ–‡ä»¶ã€‚è¿™ç§è®¾ç½®ç»„åˆé€šå¸¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå¹¶ä¸”ä¸ä¼šå‘é€å®Œæ•´çš„æ–‡ä»¶ã€‚</p><p>å½“æ‚¨å¯¹åŒ…å«å¤šè¡Œäº‹ä»¶çš„æ—¥å¿—ä½¿ç”¨ close_timeout æ—¶ï¼Œæ”¶é›†å™¨å¯èƒ½ä¼šåœ¨å¤šè¡Œäº‹ä»¶çš„ä¸­é—´åœæ­¢ï¼Œè¿™æ„å‘³ç€åªä¼šå‘é€éƒ¨åˆ†äº‹ä»¶ã€‚å¦‚æœå†æ¬¡å¯åŠ¨æ”¶é›†å™¨å¹¶ä¸”æ–‡ä»¶ä»ç„¶å­˜åœ¨ï¼Œåˆ™åªä¼šå‘é€äº‹ä»¶çš„ç¬¬äºŒéƒ¨åˆ†ã€‚</p><p>æ­¤é€‰é¡¹é»˜è®¤è®¾ç½®ä¸º 0ï¼Œè¿™æ„å‘³ç€å®ƒè¢«ç¦ç”¨ã€‚</p><h3 id="clean-é…ç½®" tabindex="-1"><a class="header-anchor" href="#clean-é…ç½®"><span>clean_*é…ç½®</span></a></h3><p>clean_* é€‰é¡¹ç”¨äºæ¸…ç†æ³¨å†Œè¡¨æ–‡ä»¶ä¸­çš„çŠ¶æ€æ¡ç›®ã€‚ è¿™äº›è®¾ç½®æœ‰åŠ©äºå‡å°æ³¨å†Œè¡¨æ–‡ä»¶çš„å¤§å°ï¼Œå¹¶ä¸”å¯ä»¥é˜²æ­¢æ½œåœ¨çš„ inode é‡ç”¨é—®é¢˜ã€‚</p><p><strong>clean_inactive</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼ŒFilebeat ä¼šåœ¨æŒ‡å®šçš„ä¸æ´»åŠ¨æ—¶é—´è¿‡ååˆ é™¤æ–‡ä»¶çš„çŠ¶æ€ã€‚ åªæœ‰å½“æ–‡ä»¶å·²ç»è¢« Filebeat å¿½ç•¥æ—¶ï¼Œæ‰èƒ½åˆ é™¤çŠ¶æ€ã€‚ **clean_inactive è®¾ç½®å¿…é¡»å¤§äº ignore_older **</p><p>scan_frequency ç¡®ä¿åœ¨ä»åœ¨æ”¶é›†æ–‡ä»¶æ—¶ä¸ä¼šè¢«åˆ é™¤ä»»ä½•çŠ¶æ€ã€‚ å¦åˆ™ï¼Œè¯¥è®¾ç½®å¯èƒ½ä¼šå¯¼è‡´ Filebeat ä¸æ–­åœ°é‡æ–°å‘é€å®Œæ•´å†…å®¹ï¼Œå› ä¸º clean_inactive ä¼šåˆ é™¤ Filebeat ä»æ£€æµ‹åˆ°çš„æ–‡ä»¶çš„çŠ¶æ€ã€‚ å¦‚æœæ–‡ä»¶è¢«æ›´æ–°æˆ–å†æ¬¡å‡ºç°ï¼Œåˆ™ä»å¤´å¼€å§‹è¯»å–è¯¥æ–‡ä»¶ã€‚</p><p>clean_inactive é…ç½®é€‰é¡¹å¯¹äºå‡å°æ³¨å†Œè¡¨æ–‡ä»¶çš„å¤§å°å¾ˆæœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨æ¯å¤©ç”Ÿæˆå¤§é‡æ–°æ–‡ä»¶çš„æƒ…å†µä¸‹ã€‚</p><p>æ­¤é…ç½®é€‰é¡¹å¯¹äºé˜²æ­¢ Linux ä¸Šå›  inode é‡ç”¨è€Œå¯¼è‡´çš„ Filebeat é—®é¢˜ä¹Ÿå¾ˆæœ‰ç”¨ã€‚</p><p><strong>clean_removed</strong></p><p>å¯ç”¨æ­¤é€‰é¡¹åï¼Œå¦‚æœæ— æ³•åœ¨ç£ç›˜ä¸Šæ‰¾åˆ°æ–‡ä»¶ï¼ŒFilebeat ä¼šä»æ³¨å†Œè¡¨ä¸­æ¸…é™¤æ–‡ä»¶ã€‚ è¿™æ„å‘³ç€é‡å‘½åçš„æ–‡ä»¶ä¹Ÿå°†è¢«åˆ é™¤ã€‚ é»˜è®¤æƒ…å†µä¸‹å¯ç”¨æ­¤é€‰é¡¹ã€‚</p><p>å¦‚æœå…±äº«é©±åŠ¨å™¨åœ¨çŸ­æ—¶é—´å†…æ¶ˆå¤±å¹¶å†æ¬¡å‡ºç°ï¼Œåˆ™ä¼šä»å¤´å¼€å§‹é‡æ–°è¯»å–æ‰€æœ‰æ–‡ä»¶ï¼Œå› ä¸ºå·²ä»æ³¨å†Œè¡¨æ–‡ä»¶ä¸­åˆ é™¤äº†çŠ¶æ€ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ç¦ç”¨ clean_removed é€‰é¡¹ã€‚</p><p>å¦‚æœæ‚¨è¿˜ç¦ç”¨ close_removedï¼Œåˆ™å¿…é¡»ç¦ç”¨æ­¤é€‰é¡¹ã€‚</p><h2 id="æœºåˆ¶æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æœºåˆ¶æ€»ç»“"><span>æœºåˆ¶æ€»ç»“</span></a></h2><p><strong>å½“æ–‡ä»¶åˆ°æœ«å°¾æ—¶ï¼Ÿ</strong></p><ol><li>å½“æ—¥å¿—æ”¶é›†åˆ°è¾¾æ–‡ä»¶æœ«å°¾æ—¶ï¼Œæ”¶é›†å™¨ä¼šç­‰å¾…backoffï¼ˆé»˜è®¤1sï¼‰,ç„¶åé‡æ–°è¯»å–æ–‡ä»¶æ˜¯å¦æœ‰æ›´æ–°ã€‚</li><li>å¦‚æœæ–‡ä»¶æ²¡æœ‰æ›´æ–°ï¼Œæ”¶é›†å™¨ä¼šç­‰å¾… backoff=backoff(ä¸Šä¸€æ¬¡çš„)*backoff_factor(é»˜è®¤2)</li><li>å½“backoffè¶…è¿‡max_backoffæ—¶ï¼Œbackoffä¼šé‡æ–°å¼€å§‹è®¡æ•°ã€‚</li></ol><p><strong>å½“æ–‡ä»¶é•¿æ—¶é—´ä¸æ›´æ–°æ—¶ï¼Ÿ</strong></p><ol><li>å½“åœ¨ close_inactiveï¼ˆé»˜è®¤5mï¼‰æ²¡æœ‰æ–°äº‹ä»¶è¢«æ”¶é›†ï¼Œæ”¶é›†å™¨ä¼šè¢«å…³é—­ã€‚</li><li>ç»è¿‡scan_frequencyï¼ˆé»˜è®¤10sï¼‰,æ”¶é›†å™¨ä¼šè¢«é‡æ–°æ‰“å¼€ã€‚</li></ol><p><strong>å½“æ–‡ä»¶æ—‹è½¬æ—¶ï¼Ÿ</strong></p><ol><li>æ–‡ä»¶æ—‹è½¬æ—¶ï¼Œä¼šæŠŠå½“å‰æ–‡ä»¶é‡å‘½åï¼Œç„¶åç§»åŠ¨ä½ç½®ã€‚ç„¶ååˆ›å»ºæ–°çš„ç©ºçš„æ–‡ä»¶å†™å…¥æ–°çš„æ—¥å¿—ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ æ”¶é›†å™¨è¿˜ä¼šç›‘å¬è€æ–‡ä»¶ï¼Œå³è¢«é‡å‘½åçš„æ–‡ä»¶ã€‚ç›´åˆ°è¶…è¿‡close_inactiveæ—¶é—´ï¼Œæ‰ä¼šå…³é—­è¿™ä¸ªæ–‡ä»¶ã€‚</li><li>ç»è¿‡scan_frequencyæ—¶é—´ï¼Œä¼šé‡æ–°è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ç§æƒ…å†µæ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ä¸€èˆ¬æ—‹è½¬åçš„æ–‡ä»¶éƒ½ä¼šè¢«å½’æ¡£ï¼ŒåŸºæœ¬ä¸ä¼šå‘ç”Ÿå˜æ›´äº†ï¼Œæ”¶é›†å™¨é‡æ–°æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œè™½ç„¶ä¸ä¼šè¯»å–å·²ç»è¯»å–è¿‡çš„æ•°æ®ï¼Œä½†æ˜¯ä¼šå ç”¨èµ„æºã€‚æ€æ ·é¿å…è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</li><li>ignore_olderå±æ€§å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œä»–ä¼šå¿½ç•¥é•¿æ—¶é—´æ²¡æœ‰æ›´æ–°çš„æ–‡ä»¶ã€‚</li><li>è™½ç„¶è¿™ä¸ªæ–‡ä»¶ä¸ä¼šè¢«è¯»å–äº†ï¼Œä½†æ˜¯ä»ç„¶åœ¨åœ¨æ³¨å†Œè¡¨ä¸­è®°å½•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ¸…é™¤è¿™ä¸ªè®°å½•ï¼Œé€šè¿‡é…ç½®clean_inactive è¾¾åˆ°ç›®çš„ï¼Œè¿™ä¸ªå€¼è¦å¤§äºignore_older</li></ol><p><strong>å½“æ–‡ä»¶åˆ é™¤æ—¶ï¼Ÿ</strong></p><ol><li>æ–‡ä»¶è¢«åˆ é™¤ï¼Œæ”¶é›†å™¨ä»ç„¶ä¼šå ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œç›´åˆ°è¶…è¿‡close_inactiveï¼Œè¯¥æ–‡ä»¶æ‰ä¼šè¢«çœŸæ­£åˆ é™¤</li></ol><h1 id="å®šä¹‰å¤„ç†å™¨" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰å¤„ç†å™¨"><span>å®šä¹‰å¤„ç†å™¨</span></a></h1><p>åœ¨å°†æ•°æ®å‘é€åˆ°é…ç½®çš„è¾“å‡ºä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨å¤„ç†å™¨æ¥ç­›é€‰å’Œå¢å¼ºæ•°æ®ã€‚è¦å®šä¹‰å¤„ç†å™¨ï¼Œè¯·æŒ‡å®šå¤„ç†å™¨åç§°ã€å¯é€‰æ¡ä»¶å’Œä¸€ç»„å‚æ•°ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">processors</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span>
        &lt;condition<span class="token punctuation">&gt;</span>
      &lt;parameters<span class="token punctuation">&gt;</span>

  <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span>
        &lt;condition<span class="token punctuation">&gt;</span>
      &lt;parameters<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>&lt;processor_name&gt;</code>æŒ‡å®šæ‰§è¡ŒæŸç§æ“ä½œï¼ˆå¦‚é€‰æ‹©å¯¼å‡ºçš„å­—æ®µæˆ–å‘äº‹ä»¶æ·»åŠ å…ƒæ•°æ®ï¼‰çš„<a href="https://www.elastic.co/guide/en/beats/filebeat/7.7/defining-processors.html#processors%20%22Processors%22" target="_blank" rel="noopener noreferrer">å¤„ç†å™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</li><li><code>&lt;condition&gt;</code>æŒ‡å®šå¯é€‰<a href="https://www.elastic.co/guide/en/beats/filebeat/7.7/defining-processors.html#conditions%20%22Conditions%22" target="_blank" rel="noopener noreferrer">æ¡ä»¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚å¦‚æœæ¡ä»¶å­˜åœ¨ï¼Œåˆ™ä»…å½“æ»¡è¶³æ¡ä»¶æ—¶æ‰æ‰§è¡Œæ“ä½œã€‚å¦‚æœæœªè®¾ç½®ä»»ä½•æ¡ä»¶ï¼Œåˆ™å§‹ç»ˆæ‰§è¡Œè¯¥æ“ä½œã€‚</li><li><code>&lt;parameters&gt;</code>æ˜¯è¦ä¼ é€’ç»™å¤„ç†å™¨çš„å‚æ•°åˆ—è¡¨ã€‚</li></ul><p>æ›´å¤æ‚çš„æ¡ä»¶å¤„ç†å¯ä»¥é€šè¿‡ä½¿ç”¨ if-then-else å¤„ç†å™¨é…ç½®æ¥å®Œæˆã€‚è¿™å…è®¸åŸºäºå•ä¸ªæ¡ä»¶æ‰§è¡Œå¤šä¸ªå¤„ç†å™¨ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">processors</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span>
      &lt;condition<span class="token punctuation">&gt;</span>
    <span class="token key atrule">then</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
          &lt;parameters<span class="token punctuation">&gt;</span>
      <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
          &lt;parameters<span class="token punctuation">&gt;</span>
      <span class="token punctuation">...</span>
    <span class="token key atrule">else</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
          &lt;parameters<span class="token punctuation">&gt;</span>
      <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
          &lt;parameters<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤„ç†å™¨åœ¨å“ªé‡Œæœ‰æ•ˆ" tabindex="-1"><a class="header-anchor" href="#å¤„ç†å™¨åœ¨å“ªé‡Œæœ‰æ•ˆ"><span>å¤„ç†å™¨åœ¨å“ªé‡Œæœ‰æ•ˆï¼Ÿ</span></a></h3><p>å¤„ç†å™¨æœ‰æ•ˆï¼š</p><ul><li>åœ¨é…ç½®çš„é¡¶å±‚ã€‚å¤„ç†å™¨åº”ç”¨äº Filebeat æ”¶é›†çš„æ‰€æœ‰æ•°æ®ã€‚</li><li>åœ¨ç‰¹å®šè¾“å…¥ä¸‹ã€‚å¤„ç†å™¨åº”ç”¨äºä¸ºè¯¥è¾“å…¥æ”¶é›†çš„æ•°æ®ã€‚</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> &lt;input_type<span class="token punctuation">&gt;</span>
  <span class="token key atrule">processors</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
        <span class="token key atrule">when</span><span class="token punctuation">:</span>
          &lt;condition<span class="token punctuation">&gt;</span>
        &lt;parameters<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h1><ul><li>ä¸¤ä¸ªæ­£åœ¨è¿è¡Œçš„è¾“å…¥æ²¡æœ‰å®šä¹‰é‡å çš„æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœå¤šä¸ªè¾“å…¥åŒæ—¶æ”¶é›†åŒä¸€æ–‡ä»¶ï¼Œåˆ™å¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸ºã€‚</li></ul><h2 id="æ—¥å¿—è½®æ¢å¯¼è‡´äº‹ä»¶ä¸¢å¤±æˆ–é‡å¤" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—è½®æ¢å¯¼è‡´äº‹ä»¶ä¸¢å¤±æˆ–é‡å¤"><span>æ—¥å¿—è½®æ¢å¯¼è‡´äº‹ä»¶ä¸¢å¤±æˆ–é‡å¤</span></a></h2><p>Filebeat æ”¯æŒä»æ—‹è½¬æ—¥å¿—æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚ä½†æ˜¯ï¼ŒæŸäº›æ—¥å¿—è½®æ¢ç­–ç•¥åœ¨ä½¿ç”¨ Filebeat è½¬å‘æ¶ˆæ¯æ—¶å¯èƒ½ä¼šå¯¼è‡´ä¸¢å¤±æˆ–é‡å¤çš„äº‹ä»¶ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li><strong>é¿å…å¤åˆ¶å’Œæˆªæ–­æ—¥å¿—æ–‡ä»¶çš„æ—¥å¿—è½®æ¢ç­–ç•¥</strong></li></ul><p>å¤åˆ¶å’Œæˆªæ–­è¾“å…¥æ—¥å¿—æ–‡ä»¶çš„æ—¥å¿—è½®æ¢ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´ Filebeat å‘é€é‡å¤äº‹ä»¶ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸º Filebeat é€šè¿‡ inode å’Œè®¾å¤‡åç§°æ ‡è¯†æ–‡ä»¶ã€‚åœ¨æ—¥å¿—è½®æ¢æœŸé—´ï¼ŒFilebeat å·²å¤„ç†çš„è¡Œå°†ç§»åŠ¨åˆ°æ–°æ–‡ä»¶ä¸­ã€‚å½“ Filebeat é‡åˆ°æ–°æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šä»å¤´å¼€å§‹è¯»å–ï¼Œå› ä¸ºä»¥å‰çš„çŠ¶æ€ä¿¡æ¯ï¼ˆåç§»é‡å’Œè¯»å–æ—¶é—´æˆ³ï¼‰ä¸æ—§æ–‡ä»¶çš„ inode å’Œè®¾å¤‡åç§°ç›¸å…³è”ã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœå°†è¡Œå†™å…¥æ—¥å¿—æ–‡ä»¶æ˜¯åœ¨å¤åˆ¶ä¹‹åä½†åœ¨æˆªæ–­ä¹‹å‰å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œåˆ™å¤åˆ¶å’Œæˆªæ–­è¾“å…¥æ—¥å¿—æ–‡ä»¶çš„ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´äº‹ä»¶ä¸¢å¤±ã€‚</p><ul><li><strong>ç¡®ä¿ Filebeat é…ç½®ä¸ºä»æ‰€æœ‰è½®æ¢çš„æ—¥å¿—ä¸­è¯»å–</strong></li></ul><p>åœ¨æ—¥å¿—è½®æ¢æœŸé—´ç§»åŠ¨æˆ–é‡å‘½åè¾“å…¥æ—¥å¿—æ–‡ä»¶æ—¶ï¼ŒFilebeat èƒ½å¤Ÿè¯†åˆ«è¯¥æ–‡ä»¶å·²è¢«è¯»å–ã€‚è½®æ¢æ–‡ä»¶åï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºå°†ç»§ç»­æ—¥å¿—è®°å½•ã€‚Filebeat åœ¨ä¸‹æ¬¡æ‰«ææœŸé—´é€‰å–æ–°æ–‡ä»¶ã€‚ç”±äºæ–‡ä»¶å…·æœ‰æ–°çš„ inode å’Œè®¾å¤‡åç§°ï¼Œå› æ­¤ Filebeat ä¼šä»å¤´å¼€å§‹è¯»å–å®ƒã€‚</p><p>è‹¥è¦é¿å…ä»è½®æ¢æ–‡ä»¶ä¸­ä¸¢å¤±äº‹ä»¶ï¼Œè¯·å°†è¾“å…¥é…ç½®ä¸ºä»æ—¥å¿—æ–‡ä»¶å’Œæ‰€æœ‰è½®æ¢æ–‡ä»¶ä¸­è¯»å–ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„é…ç½®ä¿¡æ¯ã€‚</p><p>logrotate æ˜¯ä¸€ç§ç”¨äºåœ¨ Linux ä¸Šæ‰§è¡Œæ—¥å¿—è½®æ¢çš„å¸¸ç”¨å·¥å…·ï¼Œåè·Ÿè¯»å–æ‰€æœ‰è½®æ¢æ—¥å¿—çš„ Filebeat é…ç½®ã€‚</p><p>**logrotate.confï¼Œ**æ—¥å¿—æ¯å¤©è½®æ¢ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„æƒé™åˆ›å»ºæ–°æ–‡ä»¶ã€‚</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>/var/log/my-server/my-server.log {
    daily
    missingok
    rotate 7
    notifempty
    create 0640 www-data www-data
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒFilebeat é…ç½®ä¸ºè¯»å–æ‰€æœ‰æ—¥å¿—æ–‡ä»¶ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šé”™è¿‡ä»»ä½•äº‹ä»¶ã€‚</p><div class="language-Plain line-numbers-mode" data-ext="Plain" data-title="Plain"><pre class="language-Plain"><code>filebeat.inputs:
- type: log
  enabled: false
  paths:
  - /var/log/my-server/my-server.log*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="logstashè¿˜æ˜¯beats" tabindex="-1"><a class="header-anchor" href="#logstashè¿˜æ˜¯beats"><span>logstashè¿˜æ˜¯beats</span></a></h2><p>Beats æ˜¯è½»é‡çº§æ•°æ®ä¼ é€å™¨ï¼Œæ‚¨å¯ä»¥å°†å…¶ä½œä¸ºä»£ç†å®‰è£…åœ¨æœåŠ¡å™¨ä¸Šï¼Œä»¥å°†ç‰¹å®šç±»å‹çš„æ“ä½œæ•°æ®å‘é€åˆ° Elasticsearchã€‚Beats å ç”¨ç©ºé—´å°ï¼Œä½¿ç”¨çš„ç³»ç»Ÿèµ„æºæ¯” Logstash å°‘ã€‚</p><p>Logstash çš„å ç”¨ç©ºé—´è¾ƒå¤§ï¼Œä½†æä¾›äº†å¹¿æ³›çš„è¾“å…¥ã€è¿‡æ»¤å™¨å’Œè¾“å‡ºæ’ä»¶ï¼Œç”¨äºä»å„ç§æºæ”¶é›†ã€ä¸°å¯Œå’Œè½¬æ¢æ•°æ®ã€‚</p><h1 id="è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#è§„èŒƒ"><span>è§„èŒƒ</span></a></h1><p>å¦‚ä½•æˆ‘ä»¬ä¸æƒ³åœ¨é¡¹ç›®ä¸­é…ç½®filebeatæ–‡ä»¶ï¼Œå°±éœ€è¦é¡¹ç›®äº§ç”Ÿæ—¥å¿—çš„æ—¶å€™ï¼Œéµå¾ªä¸‹é¢çš„çº¦å®š.</p><ol><li><strong>åŠ å¯†</strong></li></ol><p>å¦‚æœæŸè¡Œæ—¥å¿—éœ€è¦åŠ å¯†è¾“å‡ºï¼Œä½ åœ¨æ—¥å¿—ä¸­è¾“å‡º <code>$to_encode{content}ï¼Œ</code> æˆ‘ä»¬ä¼šå¯¹è¿™ä¸ªå­—ç¬¦ä¸²ä¹‹åçš„å†…å®¹è¿›è¡Œ <code>**</code>åŠ å¯†ï¼Œ æ³¨æ„è¿™ç§æ ¼å¼ä¸èƒ½è§£å¯†</p><ol start="2"><li><strong>è§£å¯†</strong></li></ol><p>å¦‚æœä½ çš„urlæ˜¯åŠ å¯†çš„ï¼Œï¼Œä½ åœ¨æ—¥å¿—ä¸­è¾“å‡º <code>$to_decodeï¼Œ</code> æˆ‘ä»¬ä¼šå¯¹è¿™ä¸ªå­—ç¬¦ä¸²ä¹‹åçš„å†…å®¹è¿›è¡Œbase64è§£å¯†</p><ol start="3"><li><strong>æ’é™¤è¡Œ</strong></li></ol><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æœ‰äº›æ—¥å¿—è¾“å‡ºåˆ°esï¼Œå¯ä»¥åœ¨æ—¥å¿—ä¸­åŒ…å«<code> $no_es</code> å­—ç¬¦ä¸²</p><ol start="4"><li><strong>æ—¥å¿—æ–‡ä»¶çš„å‘½å</strong></li></ol><p>æœåŠ¡åç§°-æœåŠ¡ç±»å‹-å…¶ä»–æ ‡è¯†.log</p><ul><li>æœåŠ¡åç§°ç”¨æ¥è¯†åˆ«æ˜¯å“ªä¸ªåº”ç”¨</li><li>æœåŠ¡ç±»å‹æœ‰è¿™å‡ ç±»ï¼š <ul><li>shortï¼šæ ‡è¯†æ˜¯ä¸ªjobï¼ˆè¿è¡Œå®Œä»»åŠ¡ä¹‹åï¼Œè¿›ç¨‹å°±ä¸å­˜åœ¨äº†ï¼‰ç±»å‹çš„åº”ç”¨äº§ç”Ÿçš„æ—¥å¿—ã€‚</li><li>shellï¼šæ ‡è¯†æ˜¯shellè„šæœ¬è¿è¡Œåäº§ç”Ÿçš„æ—¥å¿—ã€‚å­˜åœ¨shell è°ƒç”¨jobçš„æƒ…å†µï¼Œå¦‚ä½•å…³è”å‘¢ï¼Ÿ</li><li>service: æ ‡è¯†æ˜¯ä¸€ä¸ªwebæœåŠ¡äº§ç”Ÿçš„æ—¥å¿—ã€‚</li><li>å¦‚æœä½ ä¸çŸ¥é“è¿™ä¸ªå±æ€§æ€ä¹ˆè®¾ç½®ï¼Œå°±å†™æˆserviceå³å¯ã€‚</li></ul></li></ul><blockquote><p>æœåŠ¡çš„åç§°å’Œç±»å‹ä¼šåœ¨kibanaä¸­ç”¨äºæ£€ç´¢ã€‚</p></blockquote><ol start="5"><li><strong>æ—¥å¿—æ–‡ä»¶çš„ä½ç½®</strong></li></ol><p>filebeaté»˜è®¤ä¼šè¯»å– <code>/var/lib/applogs</code> ï¼ˆä¸€çº§ç›®å½•ï¼‰ç›®å½•ä¸‹çš„æ—¥å¿—ï¼Œä½ éœ€è¦æŠŠæ—¥å¿—å­˜å‚¨åˆ°è¿™ä¸ªç›®å½•ä¸‹çš„ä¸‰ä¸ªå­ç›®å½•ï¼ˆäºŒçº§ç›®å½•ï¼‰ï¼š</p><ul><li>shortï¼šå¯¹åº”æœåŠ¡ç±»å‹short</li><li>shellï¼šå¯¹åº”æœåŠ¡ç±»å‹shell</li><li>service: å¯¹åº”æœåŠ¡ç±»å‹service</li></ul><p>ä½ å¯ä»¥åœ¨äºŒçº§ç›®å½•ä¸‹é¢æ–°å»ºç›®å½•æ¥åŒºåˆ†æ—¥å¿—ï¼ŒåµŒå¥—ä¸è¦è¶…è¿‡ä¸‰å±‚ã€‚è¶…è¿‡è¿™äº›æ—¥å¿—æ•°æ®å¯èƒ½ä¸ä¼šè¢«æ¨é€ã€‚</p><blockquote><p>ä¹‹æ‰€ä»¥å¯¹æ—¥å¿—è¿™æ ·åˆ‡åˆ†ï¼Œæ˜¯ä¸ºäº†æ€§èƒ½è€ƒè™‘ã€‚serviceç±»å‹éœ€è¦æˆ‘ä»¬ä¸€ç›´ç›‘å¬äº‹ä»¶ ï¼Œshell å’Œshort æˆ‘ä»¬å¯ä»¥é—´éš”å¾ˆé•¿æ—¶é—´å»ç›‘å¬ä»¥ä¸‹æ˜¯å¦æœ‰æ–°æ•°æ®åˆ°è¾¾ã€‚</p></blockquote><ol start="6"><li><strong>æ—¥å¿—è½®è½¬é—®é¢˜</strong></li></ol><p>ä½¿ç”¨è€…ä¸éœ€è¦é…ç½®ã€‚ä½†æˆ‘ä»¬åº”è¯¥é…ç½®</p><ol start="7"><li><strong>å¤šè¡Œæ—¥å¿—</strong></li></ol><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token punctuation">[</span><span class="token datetime number">2022-03-21 14:19:47.891</span><span class="token punctuation">]</span> <span class="token punctuation">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span>  ERROR  cn.zhao.FileBeatTest  zzq exception
<span class="token key atrule">java.lang.ArithmeticException</span><span class="token punctuation">:</span> / by zero
	at cn.zhao.FileBeatTest.testError(FileBeatTest.java<span class="token punctuation">:</span>19)
	at cn.zhao.FileBeatTest.main(FileBeatTest.java<span class="token punctuation">:</span>13)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·ä¿è¯æ¯è¡Œçš„å¼€å¤´æ˜¯ [ , æ­£åˆ™æ ¼å¼æ˜¯ <code>^\[[0-9]{4}-[0-9]{2}-[0-9]{2}</code></p><p>é—®é¢˜ï¼š</p><p>æœåŠ¡åç§°å’ŒæœåŠ¡ç±»å‹å¯èƒ½ä¸ä¼šè¢«å¾ˆå¥½çš„è§„èŒƒï¼Œä½¿ç”¨java-agentæŠ€æœ¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>linux alias è§£å†³echo é—®é¢˜ï¼Ÿ</p><p>ä¸»é…ç½®æ–‡ä»¶å†…å®¹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>filebeat.registry:
  flush: <span class="token number">1</span>

<span class="token comment">#æ‰©å±•</span>
path.home: D:<span class="token punctuation">\</span>dev_soft<span class="token punctuation">\</span>filebeat-7.7.1-windows-x86_64
path.config: D:<span class="token punctuation">\</span>filebeat<span class="token punctuation">\</span>config
path.data: D:<span class="token punctuation">\</span>filebeat<span class="token punctuation">\</span>data
path.logs: D:<span class="token punctuation">\</span>filebeat<span class="token punctuation">\</span>logs


filebeat.config.inputs:
  enabled: <span class="token boolean">true</span>
  path: <span class="token variable">${path.config}</span>/*.yml  <span class="token comment">#æ‰©å±•</span>
  reload.enabled: <span class="token boolean">true</span>
  reload.period: 10s

filebeat.inputs:
- type: log
  enabled: <span class="token boolean">true</span>
  paths: <span class="token comment">#æ‰©å±•</span>
    - d:<span class="token punctuation">\</span>logs<span class="token punctuation">\</span>**<span class="token punctuation">\</span>*.log
  multiline.pattern: <span class="token string">&#39;^\[[0-9]{4}-[0-9]{2}-[0-9]{2}&#39;</span>
  multiline.negate: <span class="token boolean">true</span>
  multiline.match: after
  recursive_glob.enabled: <span class="token boolean">true</span> 
  exclude_lines: <span class="token punctuation">[</span><span class="token string">&#39;\$no_es&#39;</span><span class="token punctuation">]</span>
  ignore_older: 72h
  clean_inactive: 120h
  scan_frequency: 10s


filebeat.config.modules:
  path: <span class="token variable">${path.config}</span>/modules.d/*.yml <span class="token comment"># æ‰©å±•</span>
  reload.enabled: <span class="token boolean">true</span>

<span class="token comment">#name: # æ‰©å±•</span>
tags: <span class="token punctuation">[</span><span class="token string">&quot;apollo&quot;</span>,<span class="token string">&quot;158459&quot;</span><span class="token punctuation">]</span> <span class="token comment"># æ‰©å±•</span>
fields:
  env: staging  <span class="token comment">#æ‰©å±•</span>


<span class="token comment"># output.elasticsearch:</span>
<span class="token comment">#   hosts: [&quot;localhost:9200&quot;]</span>

output.console:
  pretty: <span class="token boolean">true</span>

processors:
 <span class="token comment"># - add_host_metadata: ~</span>
  - script:
      lang: javascript
      id: url_decode
      source: <span class="token operator">&gt;</span>  
        <span class="token keyword">function</span> process<span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            var <span class="token assign-left variable">message</span><span class="token operator">=</span>event.Get<span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            if<span class="token punctuation">(</span>message.indexOf<span class="token punctuation">(</span><span class="token string">&quot;<span class="token variable">$to_decode</span>&quot;</span><span class="token punctuation">)</span><span class="token operator">!=</span>-1<span class="token punctuation">)</span><span class="token punctuation">{</span>
              event.Put<span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span>, decodeURI<span class="token punctuation">(</span>message<span class="token punctuation">))</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  - script:
      lang: javascript
      id: password_encode
      source: <span class="token operator">&gt;</span>  
        <span class="token keyword">function</span> process<span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            var <span class="token assign-left variable">message</span><span class="token operator">=</span>event.Get<span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            if<span class="token punctuation">(</span>message.indexOf<span class="token punctuation">(</span><span class="token string">&quot;<span class="token variable">$to_encode</span>&quot;</span><span class="token punctuation">)</span><span class="token operator">!=</span>-1<span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token assign-left variable">message</span><span class="token operator">=</span> message.replace<span class="token punctuation">(</span>/<span class="token punctuation">\</span><span class="token variable">$to_encode</span><span class="token punctuation">\</span><span class="token punctuation">{</span><span class="token punctuation">(</span>.*<span class="token punctuation">)</span><span class="token punctuation">\</span><span class="token punctuation">}</span>/,<span class="token string">&quot;*****&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              event.Put<span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span>, message<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  - dissect:
      tokenizer: <span class="token string">&quot;[%{log_date}] - %{thread}  %{log_level}  %{logger}  %{msg}&quot;</span>
      field: <span class="token string">&quot;message&quot;</span>
      target_prefix: <span class="token string">&quot;service&quot;</span>
  - script:
      lang: javascript
      id: parse_service
      source: <span class="token operator">&gt;</span>
        <span class="token keyword">function</span> process<span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            var <span class="token assign-left variable">service</span><span class="token operator">=</span>event.Get<span class="token punctuation">(</span><span class="token string">&quot;log.file.path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            var <span class="token assign-left variable">split</span><span class="token operator">=</span>service.split<span class="token punctuation">(</span><span class="token string">&quot;<span class="token entity" title="\\">\\</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            var <span class="token assign-left variable">filname</span><span class="token operator">=</span>split<span class="token punctuation">[</span>split.length-1<span class="token punctuation">]</span><span class="token punctuation">;</span>
            var <span class="token assign-left variable">names</span><span class="token operator">=</span>filname.split<span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            if<span class="token punctuation">(</span>names.length<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                event.Put<span class="token punctuation">(</span><span class="token string">&quot;service.name&quot;</span>, names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                var <span class="token assign-left variable">index</span><span class="token operator">=</span>names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.indexOf<span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                if<span class="token punctuation">(</span>index<span class="token operator">!=</span>-1<span class="token punctuation">)</span><span class="token punctuation">{</span>
                   event.Put<span class="token punctuation">(</span><span class="token string">&quot;service.type&quot;</span>, names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.substring<span class="token punctuation">(</span><span class="token number">0</span>,index<span class="token punctuation">))</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              
            <span class="token punctuation">}</span>
           
        <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç”¨æˆ·è‡ªå®šä¹‰ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·è‡ªå®šä¹‰ç¤ºä¾‹"><span>ç”¨æˆ·è‡ªå®šä¹‰ç¤ºä¾‹</span></a></h2><p>å¦‚æœä¸Šé¢çš„è§„èŒƒä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰filebeaté…ç½®æ–‡ä»¶ã€‚</p><p>ä½ åªéœ€è¦å°†å®šä¹‰å¥½çš„é…ç½®æ–‡ä»¶ä¸Šä¼ åˆ°æˆ‘ä»¬æŒ‡å®šçš„ç›®å½•å³å¯ï¼Œå¤§çº¦10sï¼Œé…ç½®å°±ä¼šç”Ÿæ•ˆã€‚</p><p>æ³¨æ„ï¼š è‡ªå®šä¹‰æ”¯æŒï¼š</p><ul><li>æ—¥å¿—æ–‡ä»¶çš„ä½ç½®</li><li>å¤šè¡Œ</li><li>æ’é™¤è¡Œ</li><li>å¤„ç†å™¨</li></ul><p>ä¸‹é¢æ˜¯è¯¥æ–‡ä»¶çš„è¯¦ç»†æ ¼å¼ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token comment">#æ‰©å±•</span>
    <span class="token punctuation">-</span> d<span class="token punctuation">:</span>\logs\<span class="token important">**\*.log</span>  <span class="token comment"># æ—¥å¿—æ–‡ä»¶çš„ä½ç½®</span>
  <span class="token key atrule">multiline.pattern</span><span class="token punctuation">:</span> <span class="token string">&#39;^\[[0-9]{4}-[0-9]{2}-[0-9]{2}&#39;</span> <span class="token comment">#å¤šè¡Œå†…å®¹å¼€å§‹</span>
  <span class="token key atrule">multiline.negate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> 
  <span class="token key atrule">multiline.match</span><span class="token punctuation">:</span> after
  <span class="token key atrule">recursive_glob.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> 
  <span class="token key atrule">exclude_lines</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;\$no_es&#39;</span><span class="token punctuation">]</span> <span class="token comment"># æ’é™¤è¡Œçš„è§„åˆ™</span>
  <span class="token key atrule">ignore_older</span><span class="token punctuation">:</span> 72h   <span class="token comment"># é»˜è®¤</span>
  <span class="token key atrule">clean_inactive</span><span class="token punctuation">:</span> 120h <span class="token comment"># é»˜è®¤</span>
  <span class="token key atrule">scan_frequency</span><span class="token punctuation">:</span> 10s <span class="token comment"># é»˜è®¤</span>
  <span class="token key atrule">processors</span><span class="token punctuation">:</span>  <span class="token comment"># æŒ‡å®šå¤„ç†å™¨</span>
    <span class="token punctuation">-</span> <span class="token key atrule">&lt;processor_name&gt;</span><span class="token punctuation">:</span>
        <span class="token key atrule">when</span><span class="token punctuation">:</span>
          &lt;condition<span class="token punctuation">&gt;</span>
        &lt;parameters<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†å™¨ç±»å‹è¯·å‚è€ƒ <a href="https://www.elastic.co/guide/en/beats/filebeat/7.7/add-fields.html" target="_blank" rel="noopener noreferrer">Add fields | Filebeat Reference [7.7] | Elastic<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ³¨æ„ï¼š filebeatçš„ç‰ˆæœ¬æ˜¯7.x</p><p>ä¸Šçº¿çš„æ­¥éª¤ï¼š</p><ol><li>udeployç»Ÿä¸€éƒ¨ç½²filbeat ,å°†è‘—é…ç½®æ–‡ä»¶å®šä¹‰å¥½ï¼Œå°†ç›‘å¬é…ç½®æ–‡ä»¶å®šä¹‰å¥½</li><li>ç”¨æˆ·æŒ‰ç…§è§„èŒƒï¼Œæ˜¯ä¸éœ€è¦å®šä¹‰filebeatçš„é…ç½®æ–‡ä»¶çš„</li><li>å¦‚æœç”¨æˆ·æƒ³è¦è‡ªå®šä¹‰ä¸€äº›è§„èŒƒï¼Œè¯·å°†é…ç½®æ–‡ä»¶å®‰è£…åˆ°ç›‘å¬é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚</li></ol></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a href="https://github.com/banrenshan/banrenshan.github.io/edit/main/src/post/filebeat.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link vp-meta-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: CP_zhaozhiqiang@163.com">banrenshan</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/post/ER%E5%9B%BE.html" aria-label="ERå›¾"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ERå›¾</div></a><a class="route-link nav-link next" href="/post/go%E8%AF%AD%E8%A8%80.html" aria-label="goåŸºç¡€è¯­æ³•"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">goåŸºç¡€è¯­æ³•<!----></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CQgLfo2K.js" defer></script>
  </body>
</html>
