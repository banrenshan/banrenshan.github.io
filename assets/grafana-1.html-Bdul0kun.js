import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o,c as p,b as n,d as a,e,a as t}from"./app-Brzzz3sI.js";const c="/assets/exemplars--7a2hCpE.png",r="/assets/provisioning_cannot_save_dashboard-Bq-gmAPQ.png",u={},d=n("h1",{id:"exemplars",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#exemplars"},[n("span",null,"exemplars")])],-1),m=n("p",null,"exemplar表示在给定时间间隔内的metrics对应的trace。虽然metrics擅长为您提供系统的聚合视图，但trace可以为您提供单个请求的细粒度视图；exemplar是将两者联系起来的一种方式。",-1),v=n("p",null,"假设您的公司网站正在经历流量激增。虽然超过80%的用户能够在两秒内访问网站，但一些用户的响应时间比正常时间长，导致用户体验不佳。要确定导致延迟的因素，必须将快速响应的trace与慢速响应的trace进行比较。考虑到典型生产环境中的大量数据，这将是一项极其费力和耗时的工作。",-1),k=n("p",null,"使用exemplars，查询在一段时间间隔内表现出高延迟的trace，帮助诊断数据分布中的问题。一旦将延迟问题定位为几个exemplars trace，就可以将其与其他基于系统的信息或位置属性相结合，以更快地执行根本原因分析，从而快速解决性能问题。",-1),b={href:"https://grafana.com/docs/grafana/v9.3/datasources/prometheus/#configuring-exemplars",target:"_blank",rel:"noopener noreferrer"},g=t('<p>Grafana在Explore视图和仪表板中显示了exemplars以及metrics。每个exemplars为突出显示的星形。您可以将光标悬停在exemplars上查看更多，它是键值对的组合。要进一步调查，请单击traceID属性旁边的蓝色按钮。</p><figure><img src="'+c+`" alt="Screenshot showing the detail window of an Exemplar" tabindex="0" loading="lazy"><figcaption>Screenshot showing the detail window of an Exemplar</figcaption></figure><h1 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h1><p>Grafana具有默认和自定义配置文件。您可以通过修改自定义配置文件或使用环境变量来自定义Grafana实例。Grafana实例的默认设置存储在$WORKING_DIR/conf/defaults.ini 文件。不要更改此文件。你可以使用 --config 参数指定自定义文件。</p><blockquote><p>Grafana使用分号（；）注释.ini文件中的行。</p></blockquote><h2 id="变量替换" tabindex="-1"><a class="header-anchor" href="#变量替换"><span>变量替换</span></a></h2><p>不要使用环境变量添加新的配置。相反，使用环境变量替代现有选项。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>GF_&lt;SectionName&gt;_&lt;KeyName&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>SectionName 和 KeyName要全大写</li><li><code>. 和 -</code> 要替换成 <code>_</code></li></ul><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="token comment"># default section</span>
<span class="token key attr-name">instance_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">\${HOSTNAME}</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">security</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">admin_user</span> <span class="token punctuation">=</span> <span class="token value attr-value">admin</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">auth.google</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">client_secret</span> <span class="token punctuation">=</span> <span class="token value attr-value">0ldS3cretKey</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">plugin.grafana-image-renderer</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">rendering_ignore_https_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">feature_toggles</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">enable</span> <span class="token punctuation">=</span> <span class="token value attr-value">newNavigation</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">GF_DEFAULT_INSTANCE_NAME</span><span class="token operator">=</span>my-instance
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GF_SECURITY_ADMIN_USER</span><span class="token operator">=</span>owner
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GF_AUTH_GOOGLE_CLIENT_SECRET</span><span class="token operator">=</span>newS3cretKey
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GF_PLUGIN_GRAFANA_IMAGE_RENDERER_RENDERING_IGNORE_HTTPS_ERRORS</span><span class="token operator">=</span>true
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GF_FEATURE_TOGGLES_ENABLE</span><span class="token operator">=</span>newNavigation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="变量扩展" tabindex="-1"><a class="header-anchor" href="#变量扩展"><span>变量扩展</span></a></h2><p>如果配置包含表达式<code>$__&lt;provider&gt;{&lt;argument&gt;}</code>或<code>\${&lt;environmentvariable&gt;}</code>，则它们将由Grafana的变量扩展器处理。有三个提供程序：env、file和vault。</p><h3 id="env-provider" tabindex="-1"><a class="header-anchor" href="#env-provider"><span>Env provider</span></a></h3><p>env提供程序可用于扩展环境变量。如果将选项设置为<code>$__env｛PORT｝</code>，则将在其位置使用PORT环境变量。对于环境变量，您还可以使用速记语法<code>\${PORT}</code>。</p><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">paths</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">logs</span> <span class="token punctuation">=</span> <span class="token value attr-value">$__env{LOGDIR}/grafana</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="file-provider" tabindex="-1"><a class="header-anchor" href="#file-provider"><span>File provider</span></a></h3><p>file从文件系统读取文件。它删除文件开头和结尾的空白。以下示例中的数据库密码将替换为<code>/etc/secrets/gf_sql_password</code>文件的内容：</p><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">database</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">$__file{/etc/secrets/gf_sql_password}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vault-provider" tabindex="-1"><a class="header-anchor" href="#vault-provider"><span>Vault provider</span></a></h3><p>vault提供程序允许您使用Hashicorp vault管理机密。</p><h2 id="主要配置项" tabindex="-1"><a class="header-anchor" href="#主要配置项"><span>主要配置项</span></a></h2><ul><li><p>app_mode：可选值是<code>production（默认）</code> 和 <code>development</code>. 除非您正在开发Grafana，否则不要更改此选项。</p></li><li><p>instance_name：设置grafana服务器实例的名称。用于日志记录、内部度量和群集信息。默认值为：\${HOSTNAME｝，如果环境变量HOSTNAME为空或不存在，则该变量将被替换为HOSTNAME,Grafana将尝试使用系统调用获取机器名称。</p></li><li><p>force_migration: 强制迁移可能导致数据丢失。默认值为false。</p></li><li><p>paths</p><ul><li><p>data: Grafana存储sqlite3数据库（如果使用）、基于文件的会话（如果使用的话）和其他数据的路径。此路径通常通过init.d脚本或systemd服务文件指定。</p></li><li><p>temp_data_lifetime: 数据目录中的临时图片应保留多长时间。默认值为：24小时。支持的修饰符：h（小时）、m（分钟），例如：168h、30m、10h30m。使用0从不清理临时文件。</p></li><li><p>logs: Grafana存储日志的路径。此路径通常通过init.d脚本或systemd服务文件指定。您可以在配置文件或默认环境变量文件中覆盖它。但是，请注意，在Grafana完全初始化/启动之前，将临时使用默认日志路径。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>./grafana-server --config /custom/config.ini --homepath /custom/homepath cfg:default.paths.logs=/custom/path
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>plugins:Grafana自动扫描和查找插件的目录。</p></li><li><p>provisioning: 包含Grafana将在启动时应用的配置文件的文件夹。当json文件更改时，仪表板将重新加载。</p></li></ul></li><li><p>database: Grafana需要一个数据库来存储用户和仪表盘（以及其他东西）。默认情况下，它被配置为使用sqlite3，这是一个嵌入式数据库。</p><ul><li>type: 可选值 mysql, postgres ，sqlite3</li></ul></li><li><p>remote_cache：在配置的数据库Redis或Memcached中缓存身份验证详细信息和会话信息。此设置不配置Grafana Enterprise中的查询缓存。</p></li><li><p>log：</p><ul><li>mode： 可选值 “console”, “file”, “syslog”， 默认是 <code>console file</code>.</li><li>level： “debug”, “info”, “warn”, “error”, “critical”.</li><li>filters：为特定记录器设置不同级别的可选设置，例如 filters = sqlstore:debug</li></ul></li></ul><p>grafana对外暴漏的指标信息：</p><ul><li>Active Grafana instances</li><li>Number of dashboards, users, and playlists</li><li>HTTP status codes</li><li>Requests by routing group</li><li>Grafana active alerts</li><li>Grafana performance</li></ul><h1 id="provision" tabindex="-1"><a class="header-anchor" href="#provision"><span>Provision</span></a></h1><p>可以在配置文件中使用环境变量插值。允许的语法是<code>$ENV_VAR_NAME</code>或<code>\${ENV_VAR_NAME}</code>，并且只能用于值，而不能用于键。它在仪表板的定义文件中不可用，只能仪表板provisioning配置中使用。例子：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">datasources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Graphite
    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>$PORT
    <span class="token key atrule">user</span><span class="token punctuation">:</span> $USER
    <span class="token key atrule">secureJsonData</span><span class="token punctuation">:</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> $PASSWORD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果您的值中有一个文字<code>$</code>，并且希望避免插值，则可以使用<code>$$</code>。</p><p>目前，我们没有提供任何用于配置Grafana的脚本。但是有几个社区支持：</p><table><thead><tr><th>Puppet</th><th>https://forge.puppet.com/puppet/grafana</th></tr></thead><tbody><tr><td>Ansible</td><td>https://github.com/cloudalchemy/ansible-grafana</td></tr><tr><td>Chef</td><td>https://github.com/JonathanTron/chef-grafana</td></tr><tr><td>Saltstack</td><td>https://github.com/salt-formulas/salt-formula-grafana</td></tr><tr><td>Jsonnet</td><td>https://github.com/grafana/grafonnet-lib/</td></tr></tbody></table><h2 id="配置数据源" tabindex="-1"><a class="header-anchor" href="#配置数据源"><span>配置数据源</span></a></h2><p>您可以通过在provision/datasources目录中添加YAML配置文件来管理Grafana中的数据源。每个配置文件都可以包含启动期间要添加或更新的数据源列表。如果数据源已经存在，Grafana会重新配置它以匹配配置的配置文件。</p><p>配置文件还可以列出要自动删除的数据源，称为deleteDatasources。Grafana删除deleteDatasources中列出的数据源，然后再添加或更新数据源列表中的数据源。</p><blockquote><p>如果运行多个Grafana实例，请在配置中为每个数据源添加版本号，并在更新配置时增加版本号。Grafana仅更新版本号与配置中指定的版本号相同或更低的数据源。</p></blockquote><p>由于并非所有数据源都具有相同的配置设置，因此我们只将最常见的作为字段。要提供数据源的其余设置，请将它们作为JSON blob包含在jsonData字段中。</p><p>可以在Grafana UI中更改已配置的仪表板。但是，无法将更改自动保存回调配源。如果allowUiUpdates设置为true，并且您对配置的仪表板进行了更改，则可以保存仪表板，然后将更改保存到Grafana数据库中。</p><p>如果allowUiUpdates配置为false，则无法对配置的仪表板进行更改。单击“保存”时，Grafana将显示“无法保存已配置的仪表板”对话框。下面的截图说明了这种行为。</p><figure><img src="`+r+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>如果JSON文件中的仪表板包含UID，Grafana会强制插入/更新该UID。这允许您在Grafana实例之间迁移仪表板，并从配置中配置Grafana，而不破坏给定的URL，因为新的仪表板URL使用UID作为标识符。Grafana启动时，会更新/插入配置文件夹中的所有可用仪表板。如果修改文件，则仪表板也会更新。默认情况下，如果文件被删除，Grafana会删除数据库中的仪表板。可以使用disableDelete设置禁用此行为。</p><p>如果您已经使用git repo或文件系统中的文件夹存储仪表板，并且希望在Grafana菜单中具有相同的文件夹名称，则可以使用foldersFromFilesStructure选项。例如，为了将这些仪表板结构从文件系统复制到Grafana：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>/etc/dashboards
├── /server
│   ├── /common_dashboard.json
│   └── /network_dashboard.json
└── /application
    ├── /requests_dashboard.json
    └── /resources_dashboard.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>您只需要指定这个简短的配置文件:</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">providers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> dashboards
    <span class="token key atrule">type</span><span class="token punctuation">:</span> file
    <span class="token key atrule">updateIntervalSeconds</span><span class="token punctuation">:</span> <span class="token number">30</span>
    <span class="token key atrule">options</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/dashboards
      <span class="token key atrule">foldersFromFilesStructure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>folder和folderUid选项应为空或缺失，以使foldersFromFilesStructure正常工作。</p></blockquote><blockquote><p>要将仪表板设置到“General”文件夹，请将它们存储在路径的根目录中。</p></blockquote><h2 id="alerting" tabindex="-1"><a class="header-anchor" href="#alerting"><span>Alerting</span></a></h2><p>警报基础设施通常是复杂的，其中许多管道通常位于不同的地方。在多个团队和组织中扩展这一点是一项特别具有挑战性的任务。Grafana Alerting provisioning使您能够以最适合您的组织的方式创建、管理和维护警报数据，从而使此过程更加简单。</p><p>有三个选项可供选择：</p>`,49),h=n("ul",null,[n("li",null,"使用文件provisioning 通过磁盘上的文件配置Grafana Alerting资源，如警报规则和联系人。"),n("li",null,[a("使用警报配置HTTP API provisioning 警报资源。通常，您无法从Grafana UI编辑API provisioning 的警报规则。为了启用编辑，在API中创建或编辑警报规则时，将x-disable-provenance标头添加到以下请求中： "),n("ul",null,[n("li",null,"POST /api/v1/provisioning/alert-rules"),n("li",{UID:""},"PUT /api/v1/provisioning/alert-rules/")])]),n("li",null,"使用Terraform配置您的警报资源。")],-1),f=n("p",null,"目前，Grafana Alerting的provisioning 支持警报规则、联系人、静音计时和模板。使用文件配置或Terraform配置的警报资源只能在创建它们的源中编辑，而不能在Grafana或任何其他源中编辑。例如，如果您使用磁盘上的文件配置警报资源，则无法在Terraform或Grafana中编辑数据。",-1),y=n("h3",{id:"file-provisioning",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#file-provisioning"},[n("span",null,"file provisioning")])],-1),_=n("p",null,"使用磁盘中的文件配置警报资源。启动Grafana时，这些文件中的数据将在Grafana系统中创建。Grafana添加您创建的任何新资源，更新您更改的任何资源，并删除旧资源。",-1),x=n("p",null,"以最适合您的用例的方式在目录中排列文件。例如，您可以选择基于团队的布局，其中每个团队都有自己的文件，您可以为所有团队创建一个大文件；或者每个资源类型可以有一个文件。",-1),G=n("p",null,"下面列出了有关如何设置文件以及每个对象需要哪些字段的详细信息，具体取决于您正在配置的资源。",-1),q=n("p",null,"具体操作步骤：",-1),I=n("li",null,"在Grafana中创建警报规则。",-1),A={href:"https://grafana.com/docs/grafana/latest/developers/http_api/alerting/#get-alerts",target:"_blank",rel:"noopener noreferrer"},w=n("li",null,"将内容复制到YAML或JSON配置文件中。",-1),T=n("li",null,"确保您的文件位于运行Grafana服务器的节点上的正确目录中，以便它们与Grafana实例一起部署。",-1),N=n("li",null,"删除Grafana中的警报规则。如果不删除警报规则，则上载后将与设置的警报规则冲突。",-1),E=t(`<p>下面是用于创建警报规则的配置文件的示例。</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of rule groups to import or update</span>
<span class="token key atrule">groups</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; name of the rule group</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my_rule_group
    <span class="token comment"># &lt;string, required&gt; name of the folder the rule group will be stored in</span>
    <span class="token key atrule">folder</span><span class="token punctuation">:</span> my_first_folder
    <span class="token comment"># &lt;duration, required&gt; interval that the rule group should evaluated at</span>
    <span class="token key atrule">interval</span><span class="token punctuation">:</span> 60s
    <span class="token comment"># &lt;list, required&gt; list of rules that are part of the rule group</span>
    <span class="token key atrule">rules</span><span class="token punctuation">:</span>
      <span class="token comment"># &lt;string, required&gt; unique identifier for the rule</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uid</span><span class="token punctuation">:</span> my_id_1
        <span class="token comment"># &lt;string, required&gt; title of the rule that will be displayed in the UI</span>
        <span class="token key atrule">title</span><span class="token punctuation">:</span> my_first_rule
        <span class="token comment"># &lt;string, required&gt; which query should be used for the condition</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> A
        <span class="token comment"># &lt;list, required&gt; list of query objects that should be executed on each</span>
        <span class="token comment">#                  evaluation - should be obtained trough the API</span>
        <span class="token key atrule">data</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">refId</span><span class="token punctuation">:</span> A
            <span class="token key atrule">datasourceUid</span><span class="token punctuation">:</span> <span class="token string">&#39;-100&#39;</span>
            <span class="token key atrule">model</span><span class="token punctuation">:</span>
              <span class="token key atrule">conditions</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token key atrule">evaluator</span><span class="token punctuation">:</span>
                    <span class="token key atrule">params</span><span class="token punctuation">:</span>
                      <span class="token punctuation">-</span> <span class="token number">3</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> gt
                  <span class="token key atrule">operator</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> and
                  <span class="token key atrule">query</span><span class="token punctuation">:</span>
                    <span class="token key atrule">params</span><span class="token punctuation">:</span>
                      <span class="token punctuation">-</span> A
                  <span class="token key atrule">reducer</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> last
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> query
              <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> __expr__
                <span class="token key atrule">uid</span><span class="token punctuation">:</span> <span class="token string">&#39;-100&#39;</span>
              <span class="token key atrule">expression</span><span class="token punctuation">:</span> 1==0
              <span class="token key atrule">intervalMs</span><span class="token punctuation">:</span> <span class="token number">1000</span>
              <span class="token key atrule">maxDataPoints</span><span class="token punctuation">:</span> <span class="token number">43200</span>
              <span class="token key atrule">refId</span><span class="token punctuation">:</span> A
              <span class="token key atrule">type</span><span class="token punctuation">:</span> math
        <span class="token comment"># &lt;string&gt; UID of a dashboard that the alert rule should be linked to</span>
        <span class="token key atrule">dashboardUid</span><span class="token punctuation">:</span> my_dashboard
        <span class="token comment"># &lt;int&gt; ID of the panel that the alert rule should be linked to</span>
        <span class="token key atrule">panelId</span><span class="token punctuation">:</span> <span class="token number">123</span>
        <span class="token comment"># &lt;string&gt; the state the alert rule will have when no data is returned</span>
        <span class="token comment">#          possible values: &quot;NoData&quot;, &quot;Alerting&quot;, &quot;OK&quot;, default = NoData</span>
        <span class="token key atrule">noDataState</span><span class="token punctuation">:</span> Alerting
        <span class="token comment"># &lt;string&gt; the state the alert rule will have when the query execution</span>
        <span class="token comment">#          failed - possible values: &quot;Error&quot;, &quot;Alerting&quot;, &quot;OK&quot;</span>
        <span class="token comment">#          default = Alerting</span>
        <span class="token comment"># &lt;duration, required&gt; for how long should the alert fire before alerting</span>
        <span class="token key atrule">for</span><span class="token punctuation">:</span> 60s
        <span class="token comment"># &lt;map&lt;string, string&gt;&gt; a map of strings to pass around any data</span>
        <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
          <span class="token key atrule">some_key</span><span class="token punctuation">:</span> some_value
        <span class="token comment"># &lt;map&lt;string, string&gt; a map of strings that can be used to filter and</span>
        <span class="token comment">#                      route alerts</span>
        <span class="token key atrule">labels</span><span class="token punctuation">:</span>
          <span class="token key atrule">team</span><span class="token punctuation">:</span> sre_team_1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是用于删除警报规则的配置文件的示例。</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of alert rule UIDs that should be deleted</span>
<span class="token key atrule">deleteRules</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; unique identifier for the rule</span>
    <span class="token key atrule">uid</span><span class="token punctuation">:</span> my_id_1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="provision-联系人" tabindex="-1"><a class="header-anchor" href="#provision-联系人"><span>Provision 联系人</span></a></h3><p>在Grafana实例中创建或删除联系人。</p><ol><li>创建YAML或JSON配置文件。</li><li>将文件添加到GitOps工作流中，以便它们与Grafana实例一起部署。</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of contact points to import or update</span>
<span class="token key atrule">contactPoints</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; name of the contact point</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cp_1
    <span class="token key atrule">receivers</span><span class="token punctuation">:</span>
      <span class="token comment"># &lt;string, required&gt; unique identifier for the receiver</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uid</span><span class="token punctuation">:</span> first_uid
        <span class="token comment"># &lt;string, required&gt; type of the receiver</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> prometheus<span class="token punctuation">-</span>alertmanager
        <span class="token comment"># &lt;object, required&gt; settings for the specific receiver type</span>
        <span class="token key atrule">settings</span><span class="token punctuation">:</span>
          <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//test<span class="token punctuation">:</span><span class="token number">9000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是用于删除联系人的配置文件的示例。</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of receivers that should be deleted</span>
<span class="token key atrule">deleteContactPoints</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; unique identifier for the receiver</span>
    <span class="token key atrule">uid</span><span class="token punctuation">:</span> first_uid
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="provision-通知策略" tabindex="-1"><a class="header-anchor" href="#provision-通知策略"><span>Provision 通知策略</span></a></h3><ol><li>创建YAML或JSON配置文件。</li><li>将文件添加到GitOps工作流中，以便它们与Grafana实例一起部署。</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of notification policies</span>
<span class="token key atrule">policies</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string&gt; name of the contact point that should be used for this route</span>
    <span class="token key atrule">receiver</span><span class="token punctuation">:</span> grafana<span class="token punctuation">-</span>default<span class="token punctuation">-</span>email
    <span class="token comment"># &lt;list&gt; The labels by which incoming alerts are grouped together. For example,</span>
    <span class="token comment">#        multiple alerts coming in for cluster=A and alertname=LatencyHigh would</span>
    <span class="token comment">#        be batched into a single group.</span>
    <span class="token comment">#</span>
    <span class="token comment">#        To aggregate by all possible labels use the special value &#39;...&#39; as</span>
    <span class="token comment">#        the sole label name, for example:</span>
    <span class="token comment">#        group_by: [&#39;...&#39;]</span>
    <span class="token comment">#        This effectively disables aggregation entirely, passing through all</span>
    <span class="token comment">#        alerts as-is. This is unlikely to be what you want, unless you have</span>
    <span class="token comment">#        a very low alert volume or your upstream notification system performs</span>
    <span class="token comment">#        its own grouping.</span>
    <span class="token key atrule">group_by</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;...&#39;</span><span class="token punctuation">]</span>
    <span class="token comment"># &lt;list&gt; a list of matchers that an alert has to fulfill to match the node</span>
    <span class="token key atrule">matchers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> alertname = Watchdog
      <span class="token punctuation">-</span> severity =~ &quot;warning<span class="token punctuation">|</span>critical&quot;
    <span class="token comment"># &lt;list&gt; Times when the route should be muted. These must match the name of a</span>
    <span class="token comment">#        mute time interval.</span>
    <span class="token comment">#        Additionally, the root node cannot have any mute times.</span>
    <span class="token comment">#        When a route is muted it will not send any notifications, but</span>
    <span class="token comment">#        otherwise acts normally (including ending the route-matching process</span>
    <span class="token comment">#        if the \`continue\` option is not set)</span>
    <span class="token key atrule">mute_time_intervals</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> abc
    <span class="token comment"># &lt;duration&gt; How long to initially wait to send a notification for a group</span>
    <span class="token comment">#            of alerts. Allows to collect more initial alerts for the same group.</span>
    <span class="token comment">#            (Usually ~0s to few minutes), default = 30s</span>
    <span class="token key atrule">group_wait</span><span class="token punctuation">:</span> 30s
    <span class="token comment"># &lt;duration&gt; How long to wait before sending a notification about new alerts that</span>
    <span class="token comment">#            are added to a group of alerts for which an initial notification has</span>
    <span class="token comment">#            already been sent. (Usually ~5m or more), default = 5m</span>
    <span class="token key atrule">group_interval</span><span class="token punctuation">:</span> 5m
    <span class="token comment"># &lt;duration&gt;  How long to wait before sending a notification again if it has already</span>
    <span class="token comment">#             been sent successfully for an alert. (Usually ~3h or more), default = 4h</span>
    <span class="token key atrule">repeat_interval</span><span class="token punctuation">:</span> 4h
    <span class="token comment"># &lt;list&gt; Zero or more child routes</span>
    <span class="token comment"># routes:</span>
    <span class="token comment"># ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是用于重置通知策略的配置文件的示例:</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of orgIds that should be reset to the default policy</span>
<span class="token key atrule">resetPolicies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="provision-通知模板" tabindex="-1"><a class="header-anchor" href="#provision-通知模板"><span>Provision 通知模板</span></a></h3><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of templates to import or update</span>
<span class="token key atrule">templates</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgID</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; name of the template, must be unique</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my_first_template
    <span class="token comment"># &lt;string, required&gt; content of the the template</span>
    <span class="token key atrule">template</span><span class="token punctuation">:</span> Alerting with a custom text template
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除模板：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of alert rule UIDs that should be deleted</span>
<span class="token key atrule">deleteTemplates</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; name of the template, must be unique</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my_first_template
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="provision-静默" tabindex="-1"><a class="header-anchor" href="#provision-静默"><span>Provision 静默</span></a></h3><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of mute time intervals to import or update</span>
<span class="token key atrule">muteTimes</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; name of the mute time interval, must be unique</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> mti_1
    <span class="token comment"># &lt;list&gt; time intervals that should trigger the muting</span>
    <span class="token comment">#        refer to https://prometheus.io/docs/alerting/latest/configuration/#time_interval-0</span>
    <span class="token key atrule">time_intervals</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">times</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">start_time</span><span class="token punctuation">:</span> <span class="token string">&#39;06:00&#39;</span>
            <span class="token key atrule">end_time</span><span class="token punctuation">:</span> <span class="token string">&#39;23:59&#39;</span>
        <span class="token key atrule">weekdays</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;monday:wednesday&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;saturday&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sunday&#39;</span><span class="token punctuation">]</span>
        <span class="token key atrule">months</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;1:3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;may:august&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;december&#39;</span><span class="token punctuation">]</span>
        <span class="token key atrule">years</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;2020:2022&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2030&#39;</span><span class="token punctuation">]</span>
        <span class="token key atrule">days_of_month</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;1:5&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-3:-1&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除静默：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># config file version</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># List of mute time intervals that should be deleted</span>
<span class="token key atrule">deleteMuteTimes</span><span class="token punctuation">:</span>
  <span class="token comment"># &lt;int&gt; organization ID, default = 1</span>
  <span class="token punctuation">-</span> <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># &lt;string, required&gt; name of the mute time interval, must be unique</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> mti_1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="alert-notification-channels" tabindex="-1"><a class="header-anchor" href="#alert-notification-channels"><span>Alert Notification Channels</span></a></h2><blockquote></blockquote>`,25);function D(P,S){const s=l("ExternalLinkIcon");return o(),p("div",null,[d,m,v,k,n("p",null,[a("对exemplars的支持仅适用于Prometheus数据源。启用该功能后，默认情况下exemplars数据可用。具体配置参考 "),n("a",b,[a("configuring exemplars in Prometheus data source"),e(s)])]),g,h,f,y,_,x,G,q,n("ol",null,[I,n("li",null,[a("使用警报"),n("a",A,[a("设置API"),e(s)]),a("提取警报规则。")]),w,T,N]),E])}const O=i(u,[["render",D],["__file","grafana-1.html.vue"]]),L=JSON.parse('{"path":"/post/grafana-1.html","title":"grafana1","lang":"zh-CN","frontmatter":{"title":"grafana1","tags":["java"],"categories":["技术"],"date":"2022-12-10T13:56:12.000Z","description":"exemplars exemplar表示在给定时间间隔内的metrics对应的trace。虽然metrics擅长为您提供系统的聚合视图，但trace可以为您提供单个请求的细粒度视图；exemplar是将两者联系起来的一种方式。 假设您的公司网站正在经历流量激增。虽然超过80%的用户能够在两秒内访问网站，但一些用户的响应时间比正常时间长，导致用户体验不佳...","head":[["meta",{"property":"og:url","content":"https://banrenshan.github.io/post/grafana-1.html"}],["meta",{"property":"og:site_name","content":"心之所向，素履以往"}],["meta",{"property":"og:title","content":"grafana1"}],["meta",{"property":"og:description","content":"exemplars exemplar表示在给定时间间隔内的metrics对应的trace。虽然metrics擅长为您提供系统的聚合视图，但trace可以为您提供单个请求的细粒度视图；exemplar是将两者联系起来的一种方式。 假设您的公司网站正在经历流量激增。虽然超过80%的用户能够在两秒内访问网站，但一些用户的响应时间比正常时间长，导致用户体验不佳..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-20T07:19:17.000Z"}],["meta",{"property":"article:author","content":"banrenshan"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:published_time","content":"2022-12-10T13:56:12.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-20T07:19:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"grafana1\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-12-10T13:56:12.000Z\\",\\"dateModified\\":\\"2024-04-20T07:19:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"banrenshan\\",\\"url\\":\\"https://github.com/banrenshan\\"}]}"]]},"headers":[{"level":2,"title":"变量替换","slug":"变量替换","link":"#变量替换","children":[]},{"level":2,"title":"变量扩展","slug":"变量扩展","link":"#变量扩展","children":[{"level":3,"title":"Env provider","slug":"env-provider","link":"#env-provider","children":[]},{"level":3,"title":"File provider","slug":"file-provider","link":"#file-provider","children":[]},{"level":3,"title":"Vault provider","slug":"vault-provider","link":"#vault-provider","children":[]}]},{"level":2,"title":"主要配置项","slug":"主要配置项","link":"#主要配置项","children":[]},{"level":2,"title":"配置数据源","slug":"配置数据源","link":"#配置数据源","children":[]},{"level":2,"title":"Alerting","slug":"alerting","link":"#alerting","children":[{"level":3,"title":"file provisioning","slug":"file-provisioning","link":"#file-provisioning","children":[]},{"level":3,"title":"Provision 联系人","slug":"provision-联系人","link":"#provision-联系人","children":[]},{"level":3,"title":"Provision 通知策略","slug":"provision-通知策略","link":"#provision-通知策略","children":[]},{"level":3,"title":"Provision 通知模板","slug":"provision-通知模板","link":"#provision-通知模板","children":[]},{"level":3,"title":"Provision 静默","slug":"provision-静默","link":"#provision-静默","children":[]}]},{"level":2,"title":"Alert Notification Channels","slug":"alert-notification-channels","link":"#alert-notification-channels","children":[]}],"git":{"createdTime":1713597557000,"updatedTime":1713597557000,"contributors":[{"name":"banrenshan","email":"CP_zhaozhiqiang@163.com","commits":1}]},"readingTime":{"minutes":12.85,"words":3855},"filePathRelative":"post/grafana-1.md","localizedDate":"2022年12月10日","excerpt":"\\n<p>exemplar表示在给定时间间隔内的metrics对应的trace。虽然metrics擅长为您提供系统的聚合视图，但trace可以为您提供单个请求的细粒度视图；exemplar是将两者联系起来的一种方式。</p>\\n<p>假设您的公司网站正在经历流量激增。虽然超过80%的用户能够在两秒内访问网站，但一些用户的响应时间比正常时间长，导致用户体验不佳。要确定导致延迟的因素，必须将快速响应的trace与慢速响应的trace进行比较。考虑到典型生产环境中的大量数据，这将是一项极其费力和耗时的工作。</p>\\n<p>使用exemplars，查询在一段时间间隔内表现出高延迟的trace，帮助诊断数据分布中的问题。一旦将延迟问题定位为几个exemplars trace，就可以将其与其他基于系统的信息或位置属性相结合，以更快地执行根本原因分析，从而快速解决性能问题。</p>","autoDesc":true}');export{O as comp,L as data};
