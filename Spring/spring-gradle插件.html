<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.36" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://banrenshan.github.io/Spring/spring-gradle%E6%8F%92%E4%BB%B6.html"><meta property="og:site_name" content="心之所向，素履以往"><meta property="og:title" content="Spring Gradle 插件"><meta property="og:description" content="Gradle插件支持的功能 打包，支持jar，war包 依赖管理 该插件单独应用，对项目几乎没有任何更改。相反，插件会检测何时应用某些其他插件，并做出相应的反应。例如，当应用java插件时，会自动配置用于构建可执行jar的任务。 依赖管理 依赖管理有两种方式： 使用插件：io.spring.dependency-management 使用Gradle的..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-10T12:45:31.000Z"><meta property="article:author" content="banrenshan"><meta property="article:tag" content="Spring"><meta property="article:tag" content="gradle"><meta property="article:published_time" content="2024-04-27T00:00:00.000Z"><meta property="article:modified_time" content="2024-06-10T12:45:31.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Spring Gradle 插件","image":[""],"datePublished":"2024-04-27T00:00:00.000Z","dateModified":"2024-06-10T12:45:31.000Z","author":[{"@type":"Person","name":"banrenshan","url":"https://github.com/banrenshan"}]}</script><title>Spring Gradle 插件 | 心之所向，素履以往</title><meta name="description" content="Gradle插件支持的功能 打包，支持jar，war包 依赖管理 该插件单独应用，对项目几乎没有任何更改。相反，插件会检测何时应用某些其他插件，并做出相应的反应。例如，当应用java插件时，会自动配置用于构建可执行jar的任务。 依赖管理 依赖管理有两种方式： 使用插件：io.spring.dependency-management 使用Gradle的...">
    <link rel="preload" href="/assets/style-wL6mR3b5.css" as="style"><link rel="stylesheet" href="/assets/style-wL6mR3b5.css">
    <link rel="modulepreload" href="/assets/app-Crw0g0C7.js"><link rel="modulepreload" href="/assets/spring-gradle插件.html-BOEFUxTB.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CgSjbHEs.js" as="script"><link rel="prefetch" href="/assets/go-Context.html-DPwS_PFD.js" as="script"><link rel="prefetch" href="/assets/go命令行.html-CYXmtw-j.js" as="script"><link rel="prefetch" href="/assets/go基础.html-Cvcuzhe8.js" as="script"><link rel="prefetch" href="/assets/go并发.html-CPoXxqSK.js" as="script"><link rel="prefetch" href="/assets/go标准库-json.html-DtwMFbKu.js" as="script"><link rel="prefetch" href="/assets/go标准库-time.html-ColU3yuW.js" as="script"><link rel="prefetch" href="/assets/go模块.html-ByGNVFa3.js" as="script"><link rel="prefetch" href="/assets/go泛型.html-DCNXrMDi.js" as="script"><link rel="prefetch" href="/assets/go环境.html-BS7ZufSh.js" as="script"><link rel="prefetch" href="/assets/go面向对象.html-w66fSe_c.js" as="script"><link rel="prefetch" href="/assets/k8s-client-go.html-CL2gvSed.js" as="script"><link rel="prefetch" href="/assets/虚拟环境.html-ChML-lu7.js" as="script"><link rel="prefetch" href="/assets/06-spring-cloud-common.html-DHVFPgDJ.js" as="script"><link rel="prefetch" href="/assets/13-spring-retry官方指南.html-C6n8CFgP.js" as="script"><link rel="prefetch" href="/assets/14-spring-integration.html-B5vh5OEg.js" as="script"><link rel="prefetch" href="/assets/spring-data-jpa.html-8PJ1NQP4.js" as="script"><link rel="prefetch" href="/assets/spring-data-redis.html-ClliS7JX.js" as="script"><link rel="prefetch" href="/assets/spring-http-interface.html-VrLJ_jT6.js" as="script"><link rel="prefetch" href="/assets/spring-resource.html-Ch5j_zW1.js" as="script"><link rel="prefetch" href="/assets/spring-restclient.html-C0YT1Z70.js" as="script"><link rel="prefetch" href="/assets/spring-resttemplate.html-Df6p6iqu.js" as="script"><link rel="prefetch" href="/assets/spring-webclient.html-BMGX7xRu.js" as="script"><link rel="prefetch" href="/assets/spring-容器基础.html-PJaaK6Gi.js" as="script"><link rel="prefetch" href="/assets/spring-容器高级.html-91IZ5mCe.js" as="script"><link rel="prefetch" href="/assets/spring-类型转换.html-jt4CRhob.js" as="script"><link rel="prefetch" href="/assets/spring-表达式.html-CH0_jIWI.js" as="script"><link rel="prefetch" href="/assets/spring事务.html-1EGxJuad.js" as="script"><link rel="prefetch" href="/assets/校验注解.html-7vVfJ-9R.js" as="script"><link rel="prefetch" href="/assets/17-OpenShift路由.html-ruccYpsL.js" as="script"><link rel="prefetch" href="/assets/helm.html-Bu5FmARm.js" as="script"><link rel="prefetch" href="/assets/istio.html-CQQPV9tz.js" as="script"><link rel="prefetch" href="/assets/minikube.html-B4koh642.js" as="script"><link rel="prefetch" href="/assets/07-oracle.html-BS0H5_Fl.js" as="script"><link rel="prefetch" href="/assets/11-分布式事务.html-C5rUpp_w.js" as="script"><link rel="prefetch" href="/assets/mysql优化.html-D_LcTU7g.js" as="script"><link rel="prefetch" href="/assets/mysql索引.html-DZBYKMjm.js" as="script"><link rel="prefetch" href="/assets/mysql运维和监控.html-BC0urtwj.js" as="script"><link rel="prefetch" href="/assets/mysql高级.html-DCWJ5NsD.js" as="script"><link rel="prefetch" href="/assets/00-金融知识.html-BrxPvQR9.js" as="script"><link rel="prefetch" href="/assets/01-flyway.html-C9l5L9Kf.js" as="script"><link rel="prefetch" href="/assets/02-jsonassert.html-Cbcv1yV_.js" as="script"><link rel="prefetch" href="/assets/03-Junit5.html-Ce_j2Gx_.js" as="script"><link rel="prefetch" href="/assets/04-mocktio.html-BUhipTIP.js" as="script"><link rel="prefetch" href="/assets/05-jsonpath.html-D-JxxsdY.js" as="script"><link rel="prefetch" href="/assets/08-快捷键.html-DkegHcCy.js" as="script"><link rel="prefetch" href="/assets/09-编程规范.html-CvbxFmDx.js" as="script"><link rel="prefetch" href="/assets/10-多线程.html-CIelw2_6.js" as="script"><link rel="prefetch" href="/assets/15-Hibernate.html-DjMmBxix.js" as="script"><link rel="prefetch" href="/assets/16-开发环境.html-DIxfPEe0.js" as="script"><link rel="prefetch" href="/assets/12-autosys.html-DYSXE9TH.js" as="script"><link rel="prefetch" href="/assets/ews邮箱.html-CSgPUw4-.js" as="script"><link rel="prefetch" href="/assets/AirFlow.html-D_ar75DO.js" as="script"><link rel="prefetch" href="/assets/ER图.html-CqrRF-hl.js" as="script"><link rel="prefetch" href="/assets/Resilience4j.html-D4BCpyYk.js" as="script"><link rel="prefetch" href="/assets/filebeat.html-_I9aHfSN.js" as="script"><link rel="prefetch" href="/assets/go语言.html-RCk1FIrE.js" as="script"><link rel="prefetch" href="/assets/gradle-basic.html-CPPKRo1c.js" as="script"><link rel="prefetch" href="/assets/gradle-depedency.html-D9168v5v.js" as="script"><link rel="prefetch" href="/assets/gradle-java.html-BexGKP6J.js" as="script"><link rel="prefetch" href="/assets/grafana-1.html-Dn1d5Ru5.js" as="script"><link rel="prefetch" href="/assets/grafana.html-Bvkxcg8Q.js" as="script"><link rel="prefetch" href="/assets/java接口.html-BOabbf4G.js" as="script"><link rel="prefetch" href="/assets/java日期.html-DC8WdZRc.js" as="script"><link rel="prefetch" href="/assets/java注解.html-4229e8-d.js" as="script"><link rel="prefetch" href="/assets/loki.html-DTYspg9m.js" as="script"><link rel="prefetch" href="/assets/nginx.html-Bxzxo-dP.js" as="script"><link rel="prefetch" href="/assets/remoteConnection.html-DmLnH181.js" as="script"><link rel="prefetch" href="/assets/zero-copy.html-Brlrg3U6.js" as="script"><link rel="prefetch" href="/assets/多线程-Exchanger.html-CrCandBD.js" as="script"><link rel="prefetch" href="/assets/Vscode.html-BrLtul0l.js" as="script"><link rel="prefetch" href="/assets/git.html-Dz8T_vuB.js" as="script"><link rel="prefetch" href="/assets/gradle.html-Di9dL_u1.js" as="script"><link rel="prefetch" href="/assets/gradle高级.html-DyoclquZ.js" as="script"><link rel="prefetch" href="/assets/openrewrite.html-CKkK-1Df.js" as="script"><link rel="prefetch" href="/assets/代理.html-Bl7F-TaB.js" as="script"><link rel="prefetch" href="/assets/404.html-C2yqZNqK.js" as="script"><link rel="prefetch" href="/assets/index.html-Bm90axIR.js" as="script"><link rel="prefetch" href="/assets/index.html-DrkyagTJ.js" as="script"><link rel="prefetch" href="/assets/index.html-UEcsJAEs.js" as="script"><link rel="prefetch" href="/assets/index.html-D8z_KFUj.js" as="script"><link rel="prefetch" href="/assets/index.html-N0hzQdcq.js" as="script"><link rel="prefetch" href="/assets/index.html-BmkqurBc.js" as="script"><link rel="prefetch" href="/assets/index.html-D3XetJoB.js" as="script"><link rel="prefetch" href="/assets/index.html-lxEzrDdj.js" as="script"><link rel="prefetch" href="/assets/index.html-B8R1k7Wg.js" as="script"><link rel="prefetch" href="/assets/index.html-DlL1XHUH.js" as="script"><link rel="prefetch" href="/assets/index.html-DyiKr8Vg.js" as="script"><link rel="prefetch" href="/assets/index.html-DxxSVoqn.js" as="script"><link rel="prefetch" href="/assets/index.html-Bl691l2D.js" as="script"><link rel="prefetch" href="/assets/index.html-BnaVq3mw.js" as="script"><link rel="prefetch" href="/assets/index.html-BnaVq3mw.js" as="script"><link rel="prefetch" href="/assets/index.html-CZDkjIKG.js" as="script"><link rel="prefetch" href="/assets/index.html-CTAOfHSS.js" as="script"><link rel="prefetch" href="/assets/index.html-CTAOfHSS.js" as="script"><link rel="prefetch" href="/assets/index.html-C08ne508.js" as="script"><link rel="prefetch" href="/assets/index.html-dW7VjzyI.js" as="script"><link rel="prefetch" href="/assets/index.html-jCGN0kw6.js" as="script"><link rel="prefetch" href="/assets/index.html-Cs_bKQoI.js" as="script"><link rel="prefetch" href="/assets/index.html-DNVidSp6.js" as="script"><link rel="prefetch" href="/assets/index.html-BzHrjLfZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Bl0x00SE.js" as="script"><link rel="prefetch" href="/assets/index.html-CgjTKOyK.js" as="script"><link rel="prefetch" href="/assets/index.html-B_HRhFLS.js" as="script"><link rel="prefetch" href="/assets/index.html-CAtnyFMn.js" as="script"><link rel="prefetch" href="/assets/index.html-TkMzSiAI.js" as="script"><link rel="prefetch" href="/assets/index.html-DyiKr8Vg.js" as="script"><link rel="prefetch" href="/assets/index.html-CSRAeLqT.js" as="script"><link rel="prefetch" href="/assets/index.html-DDyvM4fK.js" as="script"><link rel="prefetch" href="/assets/index.html-B4q5DO0z.js" as="script"><link rel="prefetch" href="/assets/index.html-VtkMMFjj.js" as="script"><link rel="prefetch" href="/assets/index.html-DQUi5GP_.js" as="script"><link rel="prefetch" href="/assets/index.html-C9g3qdP6.js" as="script"><link rel="prefetch" href="/assets/index.html-BRwCmXND.js" as="script"><link rel="prefetch" href="/assets/index.html-BpEzlZW5.js" as="script"><link rel="prefetch" href="/assets/index.html-DOzSOY1u.js" as="script"><link rel="prefetch" href="/assets/index.html-CQdDJyrJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BwUY-ksj.js" as="script"><link rel="prefetch" href="/assets/index.html-Bw65ydEE.js" as="script"><link rel="prefetch" href="/assets/index.html-BgpDSG8S.js" as="script"><link rel="prefetch" href="/assets/index.html-DQ7acAeM.js" as="script"><link rel="prefetch" href="/assets/index.html-CIESHNle.js" as="script"><link rel="prefetch" href="/assets/index.html-BKV83iVd.js" as="script"><link rel="prefetch" href="/assets/index.html-ZsKDSBN0.js" as="script"><link rel="prefetch" href="/assets/index.html-CpIC0Tee.js" as="script"><link rel="prefetch" href="/assets/index.html-66IML7m3.js" as="script"><link rel="prefetch" href="/assets/index.html-DgQ3Yj2p.js" as="script"><link rel="prefetch" href="/assets/index.html-CCz3Gekr.js" as="script"><link rel="prefetch" href="/assets/index.html-NHYMLD6r.js" as="script"><link rel="prefetch" href="/assets/index.html-Ft1w718L.js" as="script"><link rel="prefetch" href="/assets/index.html-0PXDJjY6.js" as="script"><link rel="prefetch" href="/assets/index.html-D6hmHRxY.js" as="script"><link rel="prefetch" href="/assets/index.html-sxHoV73r.js" as="script"><link rel="prefetch" href="/assets/index.html-0CjPfjeW.js" as="script"><link rel="prefetch" href="/assets/index.html-CnBC0tzO.js" as="script"><link rel="prefetch" href="/assets/index.html-BvnBAkSd.js" as="script"><link rel="prefetch" href="/assets/index.html-DiS3w3Qg.js" as="script"><link rel="prefetch" href="/assets/index.html-caVLte3U.js" as="script"><link rel="prefetch" href="/assets/index.html-BsQ3EVQq.js" as="script"><link rel="prefetch" href="/assets/index.html-DJJQcA_4.js" as="script"><link rel="prefetch" href="/assets/index.html-C_mwJZmn.js" as="script"><link rel="prefetch" href="/assets/index.html-Qgx7sRTd.js" as="script"><link rel="prefetch" href="/assets/index.html-6A3Crrvy.js" as="script"><link rel="prefetch" href="/assets/index.html-DPlTGIfb.js" as="script"><link rel="prefetch" href="/assets/index.html-eIAbZFuv.js" as="script"><link rel="prefetch" href="/assets/index.html-DdT5r9o1.js" as="script"><link rel="prefetch" href="/assets/index.html-c0l1PIVx.js" as="script"><link rel="prefetch" href="/assets/index.html-D_NIuSQ6.js" as="script"><link rel="prefetch" href="/assets/index.html-Bgc83I7v.js" as="script"><link rel="prefetch" href="/assets/index.html-Cab7Mxyi.js" as="script"><link rel="prefetch" href="/assets/index.html-D9lGBO1x.js" as="script"><link rel="prefetch" href="/assets/index.html-Dwh0EszC.js" as="script"><link rel="prefetch" href="/assets/index.html-D9j75mRK.js" as="script"><link rel="prefetch" href="/assets/index.html-Bd9t0kxb.js" as="script"><link rel="prefetch" href="/assets/index.html-Tanp11CK.js" as="script"><link rel="prefetch" href="/assets/index.html-DyPtjDmo.js" as="script"><link rel="prefetch" href="/assets/index.html-BQ_L27QL.js" as="script"><link rel="prefetch" href="/assets/index.html-BI5BWU3r.js" as="script"><link rel="prefetch" href="/assets/index.html-B5J2t77s.js" as="script"><link rel="prefetch" href="/assets/index.html-D5gUzmAc.js" as="script"><link rel="prefetch" href="/assets/index.html-B3LHmHYC.js" as="script"><link rel="prefetch" href="/assets/index.html-B224ZraA.js" as="script"><link rel="prefetch" href="/assets/index.html-DjIQ8xxv.js" as="script"><link rel="prefetch" href="/assets/index.html-Bp-_5G3A.js" as="script"><link rel="prefetch" href="/assets/index.html-B4LCIUDn.js" as="script"><link rel="prefetch" href="/assets/index.html-BgpDSG8S.js" as="script"><link rel="prefetch" href="/assets/index.html-DssMbR7_.js" as="script"><link rel="prefetch" href="/assets/index.html-KuRhOVl-.js" as="script"><link rel="prefetch" href="/assets/index.html-CcRQseXw.js" as="script"><link rel="prefetch" href="/assets/index.html-DFm-_jW9.js" as="script"><link rel="prefetch" href="/assets/index.html-CFEllV9C.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">心之所向，素履以往</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="主页"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/post/" aria-label="Blog"><span class="font-icon icon fa-fw fa-sm fas fa-umbrella" style=""></span>Blog<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link active" href="/Spring/" aria-label="Spring"><span class="font-icon icon fa-fw fa-sm fas fa-umbrella" style=""></span>Spring<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/java/" aria-label="Java"><span class="font-icon icon fa-fw fa-sm fas fa-guitar" style=""></span>Java<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/Go/" aria-label="Go 语言"><span class="font-icon icon fa-fw fa-sm fas fa-fan" style=""></span>Go 语言<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/Python/" aria-label="Python"><span class="font-icon icon fa-fw fa-sm fas fa-fire" style=""></span>Python<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/cloud/" aria-label="云平台"><span class="font-icon icon fa-fw fa-sm fas fa-cloud" style=""></span>云平台<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/db/" aria-label="数据库"><span class="font-icon icon fa-fw fa-sm fas fa-sun" style=""></span>数据库<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/middle/" aria-label="中间件"><span class="font-icon icon fa-fw fa-sm fas fa-radiation" style=""></span>中间件<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/tool/" aria-label="工具"><span class="font-icon icon fa-fw fa-sm fas fa-anchor" style=""></span>工具<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/timeline/" aria-label="事件轴"><span class="font-icon icon fa-fw fa-sm fas fa-timeline" style=""></span>事件轴<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/tag/" aria-label="标签"><span class="font-icon icon fa-fw fa-sm fas fa-tags" style=""></span>标签<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/category/" aria-label="分类"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>分类<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/banrenshan/banrenshan.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-data-redis.html" aria-label="redis支持"><!---->redis支持<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-data-jpa.html" aria-label="Spring Data Repositories"><!---->Spring Data Repositories<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/Spring/spring-gradle%E6%8F%92%E4%BB%B6.html" aria-label="Spring Gradle 插件"><!---->Spring Gradle 插件<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-http-interface.html" aria-label="Spring Http Interface"><!---->Spring Http Interface<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/14-spring-integration.html" aria-label="Spring Integration 指南"><!---->Spring Integration 指南<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-restclient.html" aria-label="Spring RestClient"><!---->Spring RestClient<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-resttemplate.html" aria-label="Spring RestTemplate"><!---->Spring RestTemplate<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/13-spring-retry%E5%AE%98%E6%96%B9%E6%8C%87%E5%8D%97.html" aria-label="Spring Retry 指南"><!---->Spring Retry 指南<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3.html" aria-label="Spring Validation"><!---->Spring Validation<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-webclient.html" aria-label="Spring WebClient"><!---->Spring WebClient<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring%E4%BA%8B%E5%8A%A1.html" aria-label="Spring 事务"><!---->Spring 事务<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-%E5%AE%B9%E5%99%A8%E5%9F%BA%E7%A1%80.html" aria-label="Spring 容器基础"><!---->Spring 容器基础<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-%E5%AE%B9%E5%99%A8%E9%AB%98%E7%BA%A7.html" aria-label="Spring 容器高级"><!---->Spring 容器高级<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html" aria-label="Spring 类型转换"><!---->Spring 类型转换<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" aria-label="Spring 表达式"><!---->Spring 表达式<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/spring-resource.html" aria-label="Spring 资源处理"><!---->Spring 资源处理<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring/06-spring-cloud-common.html" aria-label="Spring-CLoud-Common"><!---->Spring-CLoud-Common<!----></a></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Spring Gradle 插件</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/banrenshan" target="_blank" rel="noopener noreferrer">banrenshan</a></span><span property="author" content="banrenshan"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-04-27T00:00:00.000Z"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/Spring/spring-gradle%E6%8F%92%E4%BB%B6.html" data-page-key="/Spring/spring-gradle%E6%8F%92%E4%BB%B6.html">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 19 分钟</span><meta property="timeRequired" content="PT19M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#依赖管理">依赖管理</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用插件引入依赖">使用插件引入依赖</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#gradle的原生bom支持">Gradle的原生bom支持</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#打包可执行包">打包可执行包</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#可执行jar">可执行jar</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#可执行war">可执行War</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#可执行文件和plain-archives">可执行文件和Plain Archives</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#配置可执行包">配置可执行包</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#打包oci镜像">打包OCI镜像</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker-daemon">Docker Daemon</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker-registry">Docker Registry</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#镜像自定义">镜像自定义</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#使用-maven-publish-插件发布包">使用 Maven-publish 插件发布包</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用application插件进行分发">使用application插件进行分发</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#使用gradle运行项目">使用gradle运行项目</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#传递启动参数">传递启动参数</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#传递系统属性">传递系统属性</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#reloading-resources">Reloading Resources</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#using-a-test-main-class">Using a Test Main Class</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#和-actuator-集成">和 Actuator 集成</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#生成build-信息">生成Build 信息</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#reacting-to-other-plugins">Reacting to Other Plugins</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><p>Gradle插件支持的功能</p><ul><li>打包，支持jar，war包</li><li>依赖管理</li></ul><p>该插件单独应用，对项目几乎没有任何更改。相反，插件会检测何时应用某些其他插件，并做出相应的反应。例如，当应用<code>java</code>插件时，会自动配置用于构建可执行<code>jar</code>的任务。</p><h2 id="依赖管理" tabindex="-1"><a class="header-anchor" href="#依赖管理"><span>依赖管理</span></a></h2><p>依赖管理有两种方式：</p><ul><li>使用插件：<a href="https://github.com/spring-gradle-plugins/dependency-management-plugin" target="_blank" rel="noopener noreferrer"><code>io.spring.dependency-management</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>使用Gradle的原生bom支持</li></ul><blockquote><p>之前可以使用属性覆盖版本，后者可以更快速的构建</p></blockquote><h3 id="使用插件引入依赖" tabindex="-1"><a class="header-anchor" href="#使用插件引入依赖"><span>使用插件引入依赖</span></a></h3><p>当引入<code>io.spring.dependency-management</code>插件时，底层会引入<code>spring-boot-dependencies</code> bom 文件。当使用此种方式，就可以省略版本号引入依赖：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
	<span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.boot:spring-boot-starter-web&#39;</span><span class="token punctuation">)</span>
	<span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>SpringBootPlugin</code>类提供了一个<code>BOM_CORDINATES</code>常量，该常量可用于导入BOM，而无需知道其组ID、工件ID或版本:</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>apply plugin<span class="token punctuation">:</span> <span class="token string">&#39;io.spring.dependency-management&#39;</span>

dependencyManagement <span class="token punctuation">{</span>
	imports <span class="token punctuation">{</span>
		mavenBom org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span>SpringBootPlugin<span class="token punctuation">.</span>BOM_COORDINATES
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>io.spring.dependency-management </code>插件也可以通过插件的方式单独引入，但是需要指定版本：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>plugins <span class="token punctuation">{</span>
	java
	<span class="token function">id</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;org.springframework.boot&quot;</span></span><span class="token punctuation">)</span> version <span class="token interpolation-string"><span class="token string">&quot;3.3.0&quot;</span></span> apply <span class="token boolean">false</span>
	<span class="token function">id</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;io.spring.dependency-management&quot;</span></span><span class="token punctuation">)</span> version <span class="token interpolation-string"><span class="token string">&quot;1.1.5&quot;</span></span>
<span class="token punctuation">}</span>

dependencyManagement <span class="token punctuation">{</span>
	imports <span class="token punctuation">{</span>
		<span class="token function">mavenBom</span><span class="token punctuation">(</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span>SpringBootPlugin<span class="token punctuation">.</span>BOM_COORDINATES<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="自定义版本号" tabindex="-1"><a class="header-anchor" href="#自定义版本号"><span>自定义版本号</span></a></h4><p>若要自定义托管版本，请设置其相应的<a href="https://docs.spring.io/spring-boot/appendix/dependency-versions/properties.html" target="_blank" rel="noopener noreferrer">属性<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。例如，要自定义由<code>slf4j.version</code>属性控制的SLF4J的版本：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>ext<span class="token punctuation">[</span><span class="token string">&#39;slf4j.version&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;1.7.20&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="gradle的原生bom支持" tabindex="-1"><a class="header-anchor" href="#gradle的原生bom支持"><span>Gradle的原生bom支持</span></a></h3><p><code>Gradle</code>允许使用<code>bom</code>来管理项目的版本，方法是将其声明为<code>platform</code>或<code>enforcedPlatform</code>依赖项。<code>platform</code>依赖关系将<code>bom</code>中的版本视为建议，依赖关系图中的其他版本和约束可能会导致使用<code>bom</code>中声明的依赖关系被覆盖。<code>enforcedPlatform</code>依赖关系将<code>bom</code>中的版本视为需求，它们将覆盖依赖关系图中的任何其他版本。</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
	implementation <span class="token function">platform</span><span class="token punctuation">(</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span>SpringBootPlugin<span class="token punctuation">.</span>BOM_COORDINATES<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="自定义版本号-1" tabindex="-1"><a class="header-anchor" href="#自定义版本号-1"><span>自定义版本号</span></a></h4><p>当使用Gradle的bom支持时，您不能使用<code>spring-boot-dependencies</code>中的属性来控制它管理的依赖项的版本。必须使用Gradle提供的机制。其中一个机制是解决策略。SLF4J的模块都在org.SLF4J组中，因此可以通过将该组中的每个依赖项配置为使用特定版本来控制其版本，如以下示例所示：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>configurations<span class="token punctuation">.</span>all <span class="token punctuation">{</span>
	resolutionStrategy<span class="token punctuation">.</span>eachDependency <span class="token punctuation">{</span> DependencyResolveDetails details <span class="token operator">-&gt;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>details<span class="token punctuation">.</span>requested<span class="token punctuation">.</span>group <span class="token operator">==</span> <span class="token string">&#39;org.slf4j&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			details<span class="token punctuation">.</span>useVersion <span class="token string">&#39;1.7.20&#39;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打包可执行包" tabindex="-1"><a class="header-anchor" href="#打包可执行包"><span>打包可执行包</span></a></h2><p>该插件可以创建包含应用程序所有依赖项的可执行档案（jar文件和war文件），然后可以使用<code>java -jar</code>运行。</p><h3 id="可执行jar" tabindex="-1"><a class="header-anchor" href="#可执行jar"><span>可执行jar</span></a></h3><p>可执行<code>jar</code>可以使用<code>bootJar</code>任务构建。该任务是在应用<code>java</code>插件时自动创建的。<code>assemble</code>任务被自动配置为依赖于<code>bootJar</code>任务，因此运行<code>assemble</code>（或<code>build</code>）也将运行<code>bootJar</code>。</p><h3 id="可执行war" tabindex="-1"><a class="header-anchor" href="#可执行war"><span>可执行War</span></a></h3><p>可执行的<code>war</code>可以使用<code>bootWar</code>任务构建。该任务是在应用<code>war</code>插件时自动创建的。<code>assemble</code>任务自动配置为依赖于<code>bootWar</code>任务，因此运行运行<code>assemble</code>（或<code>build</code>）也将运行<code>bootWar</code>。</p><h4 id="打包可执行和可部署的war" tabindex="-1"><a class="header-anchor" href="#打包可执行和可部署的war"><span>打包可执行和可部署的War</span></a></h4><p><code>war</code>文件可以打包，这样它就可以使用<code>java -jar</code>执行并部署到外部容器中。为此，应将嵌入的servlet容器依赖项添加到<code>providedRuntime</code>配置中，例如：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
	<span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.boot:spring-boot-starter-web&#39;</span><span class="token punctuation">)</span>
	<span class="token function">providedRuntime</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.boot:spring-boot-starter-tomcat&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这确保了它们被打包在<code>war</code>文件的<code>WEB-INF/lib</code>目录中，在那里它们不会与外部容器自己的类冲突。</p><h3 id="可执行文件和plain-archives" tabindex="-1"><a class="header-anchor" href="#可执行文件和plain-archives"><span>可执行文件和<code>Plain Archives</code></span></a></h3><p>默认情况下，当配置<code>bootJar</code>或<code>bootWar</code>任务时，<code>jar</code>或<code>war</code>任务被配置为使用<code>plain</code>作为其存档分类器的约定。这确保了<code>bootJar/jar</code>或<code>bootWar/war</code>具有不同的输出位置，从而允许同时构建可执行归档和普通归档。</p><p>如果您更喜欢可执行归档而不是普通归档，使用分类器，请按照以下<code>jar</code>和<code>bootJar</code>任务示例所示配置分类器：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	archiveClassifier <span class="token operator">=</span> <span class="token string">&#39;boot&#39;</span>
<span class="token punctuation">}</span>

tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;jar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	archiveClassifier <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者，如果您希望根本不构建普通存档，请禁用其任务，如以下<code>jar</code>任务示例所示：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string">&quot;jar&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	enabled <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置可执行包" tabindex="-1"><a class="header-anchor" href="#配置可执行包"><span>配置可执行包</span></a></h3><p><code>BootJar</code>和<code>BootWar</code>任务分别是<code>Gradle</code>的<code>Jar</code>和<code>War</code>任务的子类。因此，在打包<code>jar</code>或<code>war</code>时可用的所有标准配置选项在打包可执行<code>jar</code>或<code>war</code>时也可用。还提供了许多特定于可执行<code>jar</code>和<code>war</code>的配置选项。</p><h4 id="配置main-class" tabindex="-1"><a class="header-anchor" href="#配置main-class"><span>配置Main Class</span></a></h4><p>默认情况下，可执行归档文件的<code>main class</code>将通过在<code>main source set</code>的输出中查找具有<code>public static void main(String[])</code>方法的类来自动配置。</p><p>显式配置：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	mainClass <span class="token operator">=</span> <span class="token string">&#39;com.example.ExampleApplication&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者，可以使用<code>Spring Boot DSL</code>的<code>mainClass</code>属性在项目范围内配置：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>springBoot <span class="token punctuation">{</span>
	mainClass <span class="token operator">=</span> <span class="token string">&#39;com.example.ExampleApplication&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果应用了<code>application</code>插件，则必须配置其<code>mainClass</code>属性，并且该属性可以用于相同的目的：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>application <span class="token punctuation">{</span>
	mainClass <span class="token operator">=</span> &#39;<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span></span>ExampleApplication</span>&#39;
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后，可以在任务的清单上配置<code>StartClass</code>属性：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	manifest <span class="token punctuation">{</span>
		attributes <span class="token string">&#39;Start-Class&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;com.example.ExampleApplication&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="包含开发时依赖" tabindex="-1"><a class="header-anchor" href="#包含开发时依赖"><span>包含开发时依赖</span></a></h4><p>默认情况下，<code>developmentOnly</code>配置中声明的所有依赖项都将从可执行<code>jar</code>或<code>war</code>中排除。 如果要将<code>developmentOnly</code>配置中声明的依赖项包括在存档中，请将其任务的类路径配置为包括该配置，如以下<code>bootWar</code>任务示例所示：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootWar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	classpath configurations<span class="token punctuation">.</span>developmentOnly
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置需要解包的库" tabindex="-1"><a class="header-anchor" href="#配置需要解包的库"><span>配置需要解包的库</span></a></h4><p>可执行包中的依赖项大多数可以直接使用，但是有些可能会出现问题。例如，<code>JRuby</code>包含其自己的嵌套jar，这些jar假定<code>jruby-complete.jar</code>在文件系统上总是直接可用的。</p><p>为了处理任何有问题的库，可以配置可执行档案，以便在运行可执行档案时将特定的嵌套jar解压缩到临时目录。库可以被识别为需要使用与源jar文件的绝对路径匹配的Ant样式模式进行解包：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	requiresUnpack <span class="token string">&#39;**/jruby-complete-*.jar&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了进行更多的控制，还可以使用闭包。闭包被传递一个FileTreeElement，并且返回一个布尔值，指示是否需要拆包。</p><h4 id="使归档可执行" tabindex="-1"><a class="header-anchor" href="#使归档可执行"><span>使归档可执行</span></a></h4><p>Spring Boot提供了对完全可执行档案的支持。通过准备一个知道如何启动应用程序的shell脚本，可以使归档文件完全可执行。在类Unix平台上，此启动脚本允许归档文件像任何其他可执行文件一样直接运行，或者作为服务安装。</p><p>要使用此功能，必须启用包含启动脚本：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">launchScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这将把Spring Boot的默认启动脚本添加到存档中。默认启动脚本包括几个具有合理默认值的属性。可以使用properties属性自定义这些值：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	launchScript <span class="token punctuation">{</span>
		properties <span class="token string">&#39;logFilename&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;example-app.log&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果默认启动脚本不满足您的需要，则脚本属性可用于提供自定义启动脚本：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	launchScript <span class="token punctuation">{</span>
		script <span class="token operator">=</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&#39;src/custom.script&#39;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用propertieslauncher" tabindex="-1"><a class="header-anchor" href="#使用propertieslauncher"><span>使用PropertiesLauncher</span></a></h4><p>要使用<code>PropertiesLauncher</code>启动可执行jar或war，请配置任务的清单以设置Main Class属性：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootWar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	manifest <span class="token punctuation">{</span>
		attributes <span class="token string">&#39;Main-Class&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;org.springframework.boot.loader.launch.PropertiesLauncher&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="packaging-layered-jar-or-war" tabindex="-1"><a class="header-anchor" href="#packaging-layered-jar-or-war"><span>Packaging Layered Jar or War</span></a></h4><p>默认情况下，<code>bootJar</code>任务构建一个档案，其中分别包含<code>BOOT-INF/classes</code>和<code>BOOT-INF/lib</code>中应用程序的类和依赖项。类似地，<code>bootWar</code>构建了一个档案，其中包含<code>WEB-INF/classes</code>中的应用程序类以及所提供的<code>WEB-INF/lib</code>和<code>WEB-INF/lib</code>中的依赖项。对于需要从<code>jar</code>的内容构建<code>docker</code>映像的情况，能够进一步分离这些目录以将它们写入不同的层是非常有用的。</p><p>分层的jar使用与常规引导打包的jar相同的布局，但包括一个额外的元数据文件来描述每一层。默认情况下，将定义以下图层：</p><ul><li>项目依赖项，依赖项版本不包含SNAPSHOT。</li><li>spring-boot-loader 用于jar 包加载类。</li><li>项目依赖项，依赖项版本包含SNAPSHOT。</li><li>项目依赖项、应用程序类和资源。</li></ul><p>默认顺序是dependencies<code>, </code>spring-boot-loader<code>, </code>snapshot-dependencies<code>, </code>application。应首先添加最不可能更改的内容，然后添加有可能更改的图层。</p><p>要禁用此功能，可以按以下方式执行：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	layered <span class="token punctuation">{</span>
		enabled <span class="token operator">=</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当创建了一个分层的<code>jar</code>或<code>war</code>时，<code>spring-boot-jarmode-tools jar</code>将作为一个依赖项添加到您的归档中。有了类路径上的这个jar，可以提取层。如果您希望排除此依赖项，可以按以下方式执行：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	includeTools <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="自定义层" tabindex="-1"><a class="header-anchor" href="#自定义层"><span>自定义层</span></a></h5><p>您可能需要调整图层的创建方式并添加新图层。这可以使用描述如何将jar或war划分为多个层以及这些层的顺序的配置来完成。以下示例显示了如何明确定义上述默认顺序：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string">&quot;bootJar&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	layered <span class="token punctuation">{</span>
		application <span class="token punctuation">{</span>
			<span class="token function">intoLayer</span><span class="token punctuation">(</span><span class="token string">&quot;spring-boot-loader&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				include <span class="token string">&quot;org/springframework/boot/loader/**&quot;</span>
			<span class="token punctuation">}</span>
			<span class="token function">intoLayer</span><span class="token punctuation">(</span><span class="token string">&quot;application&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		dependencies <span class="token punctuation">{</span>
			<span class="token function">intoLayer</span><span class="token punctuation">(</span><span class="token string">&quot;application&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">includeProjectDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token function">intoLayer</span><span class="token punctuation">(</span><span class="token string">&quot;snapshot-dependencies&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				include <span class="token string">&quot;*:*:*SNAPSHOT&quot;</span>
			<span class="token punctuation">}</span>
			<span class="token function">intoLayer</span><span class="token punctuation">(</span><span class="token string">&quot;dependencies&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		layerOrder <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;dependencies&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;spring-boot-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot-dependencies&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application&quot;</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>分层DSL由三部分定义：</p><ul><li>application闭包定义了应用程序类和资源应该如何分层。</li><li>依赖关系闭包定义了应该如何对依赖关系进行分层。</li><li>layerOrder方法定义了应该写入图层的顺序。</li></ul><h2 id="打包oci镜像" tabindex="-1"><a class="header-anchor" href="#打包oci镜像"><span>打包OCI镜像</span></a></h2><p>该插件可以使用Cloud Native Buildpacks（CNB）从jar或war文件创建OCI映像。可以使用<code>bootBuildImage</code>任务构建图像。该任务是在应用java或war插件时自动创建的，并且是<code>BootBuildImage</code>的一个实例。</p><blockquote><p>OCI是一种镜像格式规范，相比于事实的Docker Image规范，OCI是为了制定统一的标准。</p><p><a href="https://juejin.cn/post/7026551617407156255" target="_blank" rel="noopener noreferrer">OCI 与容器镜像构建 - 掘金 (juejin.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.chenshaowen.com/blog/a-sample-intro-to-cloud-native-buildpacks.html" target="_blank" rel="noopener noreferrer">老树开新花 - Cloud Native Buildpacks – 陈少文的网站 (chenshaowen.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="docker-daemon" tabindex="-1"><a class="header-anchor" href="#docker-daemon"><span>Docker Daemon</span></a></h3><p><code>bootBuildImage</code>任务需要访问<code>Docker</code>守护进程。该任务将检查本地<code>Docker CLI</code>配置文件以确定当前上下文，并使用上下文连接信息与<code>Docker</code>守护进程进行通信。如果无法确定当前上下文或上下文没有连接信息，则任务将使用默认的本地连接。这可以在所有支持的平台上与Docker引擎一起工作，无需配置。</p><p>可以设置环境变量，将<code>bootBuildImage</code>任务配置为使用备用本地或远程连接。下表显示了环境变量及其值：</p><table><thead><tr><th style="text-align:left;">Environment variable</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">DOCKER_CONFIG</td><td style="text-align:left;">Docker CLI配置文件的位置( <code>$HOME/.docker</code>)</td></tr><tr><td style="text-align:left;">DOCKER_CONTEXT</td><td style="text-align:left;">上下文的名称，用于从Docker CLI配置文件中检索主机信息(覆盖<code>DOCKER_HOST</code>)</td></tr><tr><td style="text-align:left;">DOCKER_HOST</td><td style="text-align:left;">包含Docker守护进程的主机和端口的URL- <code>tcp://192.168.99.100:2376</code></td></tr><tr><td style="text-align:left;">DOCKER_TLS_VERIFY</td><td style="text-align:left;">设置为1时启用安全HTTPS协议（可选）</td></tr><tr><td style="text-align:left;">DOCKER_CERT_PATH</td><td style="text-align:left;">HTTPS的证书和密钥文件的路径（如果`DOCKER_TLS_VERIFY=1&#39;则为必需，否则忽略）</td></tr></tbody></table><p>Docker守护进程连接信息也可以使用插件配置中的Docker属性提供。下表总结了可用的属性：</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>context</code></td><td style="text-align:left;">上下文的名称，用于从Docker CLI配置文件中检索主机信息</td></tr><tr><td style="text-align:left;"><code>host</code></td><td style="text-align:left;">包含Docker守护进程的主机和端口的URL- <code>tcp://192.168.99.100:2376</code></td></tr><tr><td style="text-align:left;"><code>tlsVerify</code></td><td style="text-align:left;">设置为true，开启Https协议</td></tr><tr><td style="text-align:left;"><code>certPath</code></td><td style="text-align:left;">HTTPS的证书和密钥文件的路径（如果`DOCKER_TLS_VERIFY=1&#39;则为必需，否则忽略）</td></tr><tr><td style="text-align:left;">bindHostToBuilder</td><td style="text-align:left;">当true时，host属性的值将提供给为CNB生成器创建的容器（可选）</td></tr></tbody></table><h3 id="docker-registry" tabindex="-1"><a class="header-anchor" href="#docker-registry"><span>Docker Registry</span></a></h3><p>如果<code>builder</code>或<code>runImage</code>属性指定的Docker映像存储在需要身份验证的专用Docker Registry中，则可以使用<code>docker.builderRegistry</code>属性提供身份验证凭据。</p><p>如果生成的镜像发布到Docker Registry中，则可以使用<code>docker.publishRegistry</code>属性提供身份验证凭据。</p><p>下表列出了<code>docker.builderRegistry</code>和<code>docker.publishRegistry</code>可以指定的属性：</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>username</code></td><td style="text-align:left;">用户名，使用用户认证时必需</td></tr><tr><td style="text-align:left;"><code>password</code></td><td style="text-align:left;">密码，使用用户认证时必需</td></tr><tr><td style="text-align:left;"><code>url</code></td><td style="text-align:left;">注册中心的地址，使用用户认证时可选</td></tr><tr><td style="text-align:left;"><code>email</code></td><td style="text-align:left;">邮箱，使用用户认证时可选</td></tr><tr><td style="text-align:left;"><code>token</code></td><td style="text-align:left;">使用token认证时，必须要指定</td></tr></tbody></table><h3 id="镜像自定义" tabindex="-1"><a class="header-anchor" href="#镜像自定义"><span>镜像自定义</span></a></h3><p>插件调用builder来生成镜像，builder包含多个buildpack。下表列出了配置属性可以影响镜像的构建：</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Command-line option</th><th style="text-align:left;">Description</th><th style="text-align:left;">Default value</th></tr></thead><tbody><tr><td style="text-align:left;"><code>builder</code></td><td style="text-align:left;"><code>--builder</code></td><td style="text-align:left;">Builder使用的镜像</td><td style="text-align:left;"><code>paketobuildpacks/builder-jammy-base:latest</code> or <code>paketobuildpacks/builder-jammy-tiny:latest</code> when <a href="https://graalvm.github.io/native-build-tools/0.10.2/gradle-plugin.html" target="_blank" rel="noopener noreferrer">GraalVM Native Image plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> is applied.</td></tr><tr><td style="text-align:left;"><code>runImage</code></td><td style="text-align:left;"><code>--runImage</code></td><td style="text-align:left;">Name of the run image to use.</td><td style="text-align:left;">No default value, indicating the run image specified in Builder metadata should be used.</td></tr><tr><td style="text-align:left;"><code>imageName</code></td><td style="text-align:left;"><code>--imageName</code></td><td style="text-align:left;"><a href="https://docs.spring.io/spring-boot/api/java/org/springframework/boot/buildpack/platform/docker/type/ImageReference.html#of-java.lang.String-" target="_blank" rel="noopener noreferrer">Image name<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for the generated image.</td><td style="text-align:left;"><code>docker.io/library/${project.name}:${project.version}</code></td></tr><tr><td style="text-align:left;"><code>pullPolicy</code></td><td style="text-align:left;"><code>--pullPolicy</code></td><td style="text-align:left;"><a href="https://docs.spring.io/spring-boot/api/java/org/springframework/boot/buildpack/platform/build/PullPolicy.html" target="_blank" rel="noopener noreferrer">Policy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> used to determine when to pull the builder and run images from the registry. Acceptable values are <code>ALWAYS</code>, <code>NEVER</code>, and <code>IF_NOT_PRESENT</code>.</td><td style="text-align:left;"><code>ALWAYS</code></td></tr><tr><td style="text-align:left;"><code>environment</code></td><td style="text-align:left;"></td><td style="text-align:left;">Environment variables that should be passed to the builder.</td><td style="text-align:left;">Empty or <code>[&#39;BP_NATIVE_IMAGE&#39;: &#39;true&#39;]</code> when <a href="https://graalvm.github.io/native-build-tools/0.10.2/gradle-plugin.html" target="_blank" rel="noopener noreferrer">GraalVM Native Image plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> is applied.</td></tr><tr><td style="text-align:left;"><code>buildpacks</code></td><td style="text-align:left;"></td><td style="text-align:left;">Buildpacks that the builder should use when building the image. Only the specified buildpacks will be used, overriding the default buildpacks included in the builder. Buildpack references must be in one of the following forms:Buildpack in the builder - <code>[urn:cnb:builder:]&lt;buildpack ID&gt;[@&lt;version&gt;]</code>Buildpack in a directory on the file system - <code>[file://]&lt;path&gt;</code>Buildpack in a gzipped tar (.tgz) file on the file system - <code>[file://]&lt;path&gt;/&lt;file name&gt;</code>Buildpack in an OCI image - <code>[docker://]&lt;host&gt;/&lt;repo&gt;[:&lt;tag&gt;][@&lt;digest&gt;]</code></td><td style="text-align:left;">None, indicating the builder should use the buildpacks included in it.</td></tr><tr><td style="text-align:left;"><code>bindings</code></td><td style="text-align:left;"></td><td style="text-align:left;"><a href="https://docs.docker.com/storage/bind-mounts/" target="_blank" rel="noopener noreferrer">Volume bind mounts<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> that should be mounted to the builder container when building the image. The bindings will be passed unparsed and unvalidated to Docker when creating the builder container. Bindings must be in one of the following forms:<code>&lt;host source path&gt;:&lt;container destination path&gt;[:&lt;options&gt;]``&lt;host volume name&gt;:&lt;container destination path&gt;[:&lt;options&gt;]</code>Where <code>&lt;options&gt;</code> can contain:<code>ro</code> to mount the volume as read-only in the container<code>rw</code> to mount the volume as readable and writable in the container<code>volume-opt=key=value</code> to specify key-value pairs consisting of an option name and its value</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>network</code></td><td style="text-align:left;"><code>--network</code></td><td style="text-align:left;">The <a href="https://docs.docker.com/network/#network-drivers" target="_blank" rel="noopener noreferrer">network driver<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> the builder container will be configured to use. The value supplied will be passed unvalidated to Docker when creating the builder container.</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>cleanCache</code></td><td style="text-align:left;"><code>--cleanCache</code></td><td style="text-align:left;">Whether to clean the cache before building.</td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;"><code>verboseLogging</code></td><td style="text-align:left;"></td><td style="text-align:left;">Enables verbose logging of builder operations.</td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;"><code>publish</code></td><td style="text-align:left;"><code>--publishImage</code></td><td style="text-align:left;">Whether to publish the generated image to a Docker registry.</td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;"><code>tags</code></td><td style="text-align:left;"></td><td style="text-align:left;">A list of one or more additional tags to apply to the generated image. The values provided to the <code>tags</code> option should be <strong>full</strong> image references. See <a href="https://docs.spring.io/spring-boot/gradle-plugin/packaging-oci-image.html#build-image.customization.tags" target="_blank" rel="noopener noreferrer">the tags section<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for more details.</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>buildWorkspace</code></td><td style="text-align:left;"></td><td style="text-align:left;">A temporary workspace that will be used by the builder and buildpacks to store files during image building. The value can be a named volume or a bind mount location.</td><td style="text-align:left;">A named volume in the Docker daemon, with a name derived from the image name.</td></tr><tr><td style="text-align:left;"><code>buildCache</code></td><td style="text-align:left;"></td><td style="text-align:left;">A cache containing layers created by buildpacks and used by the image building process. The value can be a named volume or a bind mount location.</td><td style="text-align:left;">A named volume in the Docker daemon, with a name derived from the image name.</td></tr><tr><td style="text-align:left;"><code>launchCache</code></td><td style="text-align:left;"></td><td style="text-align:left;">A cache containing layers created by buildpacks and used by the image launching process. The value can be a named volume or a bind mount location.</td><td style="text-align:left;">A named volume in the Docker daemon, with a name derived from the image name.</td></tr><tr><td style="text-align:left;"><code>createdDate</code></td><td style="text-align:left;"><code>--createdDate</code></td><td style="text-align:left;">A date that will be used to set the <code>Created</code> field in the generated image’s metadata. The value must be a string in the ISO 8601 instant format, or <code>now</code> to use the current date and time.</td><td style="text-align:left;">A fixed date that enables <a href="https://buildpacks.io/docs/features/reproducibility/" target="_blank" rel="noopener noreferrer">build reproducibility<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</td></tr><tr><td style="text-align:left;"><code>applicationDirectory</code></td><td style="text-align:left;"><code>--applicationDirectory</code></td><td style="text-align:left;">The path to a directory that application contents will be uploaded to in the builder image. Application contents will also be in this location in the generated image.</td><td style="text-align:left;"><code>/workspace</code></td></tr><tr><td style="text-align:left;"><code>securityOptions</code></td><td style="text-align:left;"><code>--securityOptions</code></td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/run/#security-configuration" target="_blank" rel="noopener noreferrer">Security options<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> that will be applied to the builder container, provided as an array of string values</td><td style="text-align:left;"><code>[&quot;label=disable&quot;]</code> on Linux and macOS, <code>[]</code> on Windows</td></tr></tbody></table><h2 id="使用-maven-publish-插件发布包" tabindex="-1"><a class="header-anchor" href="#使用-maven-publish-插件发布包"><span>使用 Maven-publish 插件发布包</span></a></h2><p>要发布您的Spring Boot jar或war，请使用<code>MavenPublication</code>上的<code>artifact</code>方法将其添加到<code>MavenPublication</code>中。例如，要发布默认bootJar任务生成的工件：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>publishing <span class="token punctuation">{</span>
	publications <span class="token punctuation">{</span>
		<span class="token function">bootJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			artifact tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootJar&quot;</span></span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	repositories <span class="token punctuation">{</span>
		maven <span class="token punctuation">{</span>
			url <span class="token string">&#39;https://repo.example.com&#39;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用application插件进行分发" tabindex="-1"><a class="header-anchor" href="#使用application插件进行分发"><span>使用application插件进行分发</span></a></h3><p>当存在<code>application</code>插件时，将创建一个名为<code>boot</code>的分发。此发行版包含<code>bootJar</code>或<code>bootWar</code>任务生成的存档，以及在类<code>Unix</code>平台和<code>Windows</code>上启动它的脚本。<code>Zip</code>和<code>tar</code>分发版可以分别由<code>bootDistZip</code>和<code>bootDistTar</code>任务构建。若要使用application插件，必须使用应用程序主类的名称配置其<code>mainClassName</code>属性。</p><h2 id="使用gradle运行项目" tabindex="-1"><a class="header-anchor" href="#使用gradle运行项目"><span>使用gradle运行项目</span></a></h2><p>要在不首先构建存档的情况下运行应用程序，请使用bootRun任务：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ ./gradlew bootRun
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>bootRun</code>任务是<code>bootRun</code>的一个实例，它是<code>JavaExec</code>子类。因此，您可以使用Gradle中执行Java进程的所有常见配置选项。任务会自动配置为使用主源集的运行时类路径。</p><p>默认情况下，将通过在主源集的输出中查找具有<code>public static void main(String[])</code>方法的类来自动配置主类。</p><p>显式配置main class:</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootRun&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	mainClass <span class="token operator">=</span> <span class="token string">&#39;com.example.ExampleApplication&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你也可以使用下面的方式配置：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>springBoot <span class="token punctuation">{</span>
	mainClass <span class="token operator">=</span> <span class="token string">&#39;com.example.ExampleApplication&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以使用application 插件配置：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>application <span class="token punctuation">{</span>
	mainClass <span class="token operator">=</span> <span class="token string">&#39;com.example.ExampleApplication&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认情况下，bootRun将配置JVM以优化其启动，从而在开发过程中更快地启动。可以使用optimizedLaunch属性禁用此行为，如以下示例所示：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootRun&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	optimizedLaunch <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="传递启动参数" tabindex="-1"><a class="header-anchor" href="#传递启动参数"><span>传递启动参数</span></a></h3><p>与所有JavaExec任务一样，可以使用<code>--args=&#39;&lt;arguments&gt;&#39;</code>从命令行将参数传递到bootRun。例如，要使用名为dev的profile运行应用程序，可以使用以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ ./gradlew bootRun <span class="token parameter variable">--args</span><span class="token operator">=</span><span class="token string">&#39;--spring.profiles.active=dev&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="传递系统属性" tabindex="-1"><a class="header-anchor" href="#传递系统属性"><span>传递系统属性</span></a></h3><p>由于bootRun是一个标准的JavaExec任务，因此可以通过在构建脚本中指定系统属性来将系统属性传递给应用程序的JVM。要使系统属性的值可配置，请使用项目属性设置其值。若要允许项目属性是可选的，请使用findProperty引用它。这样做还允许使用 <code>?: Elvis</code>运算符，如以下示例所示：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootRun&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	systemProperty <span class="token string">&#39;com.example.property&#39;</span><span class="token punctuation">,</span> <span class="token function">findProperty</span><span class="token punctuation">(</span><span class="token string">&#39;example&#39;</span><span class="token punctuation">)</span> <span class="token operator">?:</span> <span class="token string">&#39;default&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前面的示例将<code>com.example.properties</code>系统属性设置为示例项目属性的值。如果未设置示例项目属性，则系统属性的值将为默认值。</p><p>Gradle允许以多种方式设置项目属性，包括在命令行中使用<code>-P</code>标志，如以下示例所示：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ ./gradlew bootRun <span class="token parameter variable">-Pexample</span><span class="token operator">=</span>custom
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>上例将示例项目属性的值设置为<code>custom</code>。bootRun将使用它作为com.example.properties系统属性的值。</p><h3 id="reloading-resources" tabindex="-1"><a class="header-anchor" href="#reloading-resources"><span>Reloading Resources</span></a></h3><p>如果已经将<code>devtools</code>添加到您的项目中，它将自动监视应用程序的类路径是否发生更改。请注意，修改后的文件需要重新编译以更新类路径，从而触发使用<code>devtools</code>的重新加载。 或者，您可以配置bootRun，以便从其源位置加载应用程序的静态资源：</p><div class="language-gradle line-numbers-mode" data-ext="gradle" data-title="gradle"><pre class="language-gradle"><code><span class="token keyword">tasks</span><span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;bootRun&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	sourceResources <span class="token keyword">sourceSets</span><span class="token punctuation">.</span>main
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这使得它们可以在实时应用程序中重新加载，这在开发时很有帮助。</p><h3 id="using-a-test-main-class" tabindex="-1"><a class="header-anchor" href="#using-a-test-main-class"><span>Using a Test Main Class</span></a></h3><p>除了<code>bootRun</code>，还注册了<code>bootTestRun</code>任务。与<code>bootRun</code>一样，<code>bootTestRun</code>是<code>bootRun</code>的一个实例，但它被配置为使用测试源集输出中的主类，而不是主源集。它还使用测试源集的运行时类路径，而不是主源集的执行时类路径。由于<code>bootTestRun</code>是<code>BootRun</code>的一个实例，上面为<code>BootRun</code>描述的所有配置选项也可以与<code>bootTestRun</code>一起使用。</p><h2 id="和-actuator-集成" tabindex="-1"><a class="header-anchor" href="#和-actuator-集成"><span>和 Actuator 集成</span></a></h2><h3 id="生成build-信息" tabindex="-1"><a class="header-anchor" href="#生成build-信息"><span>生成Build 信息</span></a></h3><p>Spring Boot Actuator的信息端点会在<code>META-INF/build-info.properties</code>文件的存在下自动发布有关构建的信息。提供了一个<code>BuildInfo</code>任务来生成此文件。使用该任务的最简单方法是通过插件的DSL：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>springBoot <span class="token punctuation">{</span>
	<span class="token function">buildInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这将配置一个名为<code>bootBuildInfo</code>的<code>BuildInfo</code>任务，如果它存在，则使Java插件的<code>classes</code>任务依赖于它。该任务的目标目录是主源集资源（通常为build/resources/main）的输出目录中的META-INF。</p><p>默认情况下，生成的信息源自项目：</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Default value</th></tr></thead><tbody><tr><td style="text-align:left;"><code>build.artifact</code></td><td style="text-align:left;">The base name of the <code>bootJar</code> or <code>bootWar</code> task</td></tr><tr><td style="text-align:left;"><code>build.group</code></td><td style="text-align:left;">The group of the project</td></tr><tr><td style="text-align:left;"><code>build.name</code></td><td style="text-align:left;">The name of the project</td></tr><tr><td style="text-align:left;"><code>build.version</code></td><td style="text-align:left;">The version of the project</td></tr><tr><td style="text-align:left;"><code>build.time</code></td><td style="text-align:left;">The time at which the project is being built</td></tr></tbody></table><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>springBoot <span class="token punctuation">{</span>
	buildInfo <span class="token punctuation">{</span>
		properties <span class="token punctuation">{</span>
			artifact <span class="token operator">=</span> <span class="token string">&#39;example-app&#39;</span>
			version <span class="token operator">=</span> <span class="token string">&#39;1.2.3&#39;</span>
			group <span class="token operator">=</span> <span class="token string">&#39;com.example&#39;</span>
			name <span class="token operator">=</span> <span class="token string">&#39;Example application&#39;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要从生成的信息中排除任何默认属性，请将其名称添加到排除中。例如，可以按以下方式排除时间特性：</p><div class="language-gradle line-numbers-mode" data-ext="gradle" data-title="gradle"><pre class="language-gradle"><code>springBoot <span class="token punctuation">{</span>
	buildInfo <span class="token punctuation">{</span>
		excludes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;time&#39;</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>build.time的默认值是生成项目的时刻。这样做的一个副作用是，任务永远不会是最新的。因此，由于需要执行更多的任务，包括项目的测试，构建将需要更长的时间。另一个副作用是，任务的输出总是会更改，因此，构建不会真正可重复。如果您对构建性能或可重复性的重视程度高于build.time属性的准确性，请排除前面示例中所示的时间属性。</p><p>还可以将其他属性添加到生成信息中：</p><div class="language-groovy line-numbers-mode" data-ext="groovy" data-title="groovy"><pre class="language-groovy"><code>springBoot <span class="token punctuation">{</span>
	buildInfo <span class="token punctuation">{</span>
		properties <span class="token punctuation">{</span>
			additional <span class="token operator">=</span> <span class="token punctuation">[</span>
				<span class="token string">&#39;a&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;alpha&#39;</span><span class="token punctuation">,</span>
				<span class="token string">&#39;b&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;bravo&#39;</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以使用<code>Provider</code>延迟计算附加属性的值。</p><h2 id="reacting-to-other-plugins" tabindex="-1"><a class="header-anchor" href="#reacting-to-other-plugins"><span>Reacting to Other Plugins</span></a></h2><p>可以很容易地将Spring Boot uber jar打包为docker映像。然而，复制和运行docker映像中的uber jar有各种缺点。当在不解压的情况下运行uber jar时，总是会有一定的开销，而在容器化环境中，这一点很明显。另一个问题是，将应用程序的代码及其所有依赖项放在Docker映像的一层中并不是最优的。由于重新编译代码的频率可能比升级所使用的Spring Boot版本的频率更高，因此通常最好多分离一些东西。如果您将jar文件放在应用程序类之前的层中，Docker通常只需要更改最底层，就可以从其缓存中提取其他文件。</p><p>为了更容易创建优化的Docker镜像，Spring Boot支持在jar中添加一个层索引文件。它提供了一个层列表以及应该包含在其中的jar部分。索引中的层列表是根据层应添加到Docker/OCI图像的顺序排列的。开箱即用，支持以下图层：</p><ul><li><code>dependencies</code> (for regular released dependencies)</li><li><code>spring-boot-loader</code> (for everything under <code>org/springframework/boot/loader</code>)</li><li><code>snapshot-dependencies</code> (for snapshot dependencies)</li><li><code>application</code> (for application classes and resources)</li></ul><p>以下显示了layers.idx文件的示例：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>- <span class="token string">&quot;dependencies&quot;</span><span class="token builtin class-name">:</span>
  - BOOT-INF/lib/library1.jar
  - BOOT-INF/lib/library2.jar
- <span class="token string">&quot;spring-boot-loader&quot;</span><span class="token builtin class-name">:</span>
  - org/springframework/boot/loader/launch/JarLauncher.class
  - <span class="token punctuation">..</span>. <span class="token operator">&lt;</span>other classes<span class="token operator">&gt;</span>
- <span class="token string">&quot;snapshot-dependencies&quot;</span><span class="token builtin class-name">:</span>
  - BOOT-INF/lib/library3-SNAPSHOT.jar
- <span class="token string">&quot;application&quot;</span><span class="token builtin class-name">:</span>
  - META-INF/MANIFEST.MF
  - BOOT-INF/classes/a/b/C.class
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种分层设计用于根据应用程序构建之间变化的可能性来分离代码。库代码不太可能在构建时发生变化，因此它被放置在自己的层中，以允许工具重用缓存中的层。应用程序代码更有可能在不同的构建之间发生变化，因此它被隔离在一个单独的层中。</p><p>Spring Boot还支持在layers.idx的帮助下对war文件进行分层。</p><p>虽然只需Dockerfile中的几行就可以将Spring Boot uber jar转换为docker映像，但我们将使用分层功能来创建优化的docker映像。当您创建一个包含层索引文件的jar时，spring boot jarmode tools jar将作为依赖项添加到您的jar中。有了类路径上的这个jar，您可以以一种特殊的模式启动应用程序，这种模式允许引导程序代码运行与应用程序完全不同的东西，例如提取层的东西。</p><p>以下是如何使用工具jar模式启动jar：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">java</span> <span class="token parameter variable">-Djarmode</span><span class="token operator">=</span>tools <span class="token parameter variable">-jar</span> my-app.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这将提供以下输出：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Usage:
  <span class="token function">java</span> <span class="token parameter variable">-Djarmode</span><span class="token operator">=</span>tools <span class="token parameter variable">-jar</span> my-app.jar

Available commands:
  extract      Extract the contents from the jar
  list-layers  List layers from the jar that can be extracted
  <span class="token builtin class-name">help</span>         Help about any <span class="token builtin class-name">command</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>extract</code>命令可用于轻松地将应用程序拆分为要添加到<code>dockerfile</code>中的层。下面是一个使用<code>jarmode</code>的<code>Dockerfile</code>示例:</p><div class="language-docker line-numbers-mode" data-ext="docker" data-title="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> bellsoft/liberica-runtime-container:jre-17-cds-slim-glibc <span class="token keyword">as</span> builder</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /builder</span>
<span class="token instruction"><span class="token keyword">ARG</span> JAR_FILE=target/*.jar</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token variable">${JAR_FILE}</span> application.jar</span>
<span class="token instruction"><span class="token keyword">RUN</span> java -Djarmode=tools -jar application.jar extract --layers --destination extracted</span>

<span class="token instruction"><span class="token keyword">FROM</span> bellsoft/liberica-runtime-container:jre-17-cds-slim-glibc</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /application</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /builder/extracted/dependencies/ ./</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /builder/extracted/spring-boot-loader/ ./</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /builder/extracted/snapshot-dependencies/ ./</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /builder/extracted/application/ ./</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>, <span class="token string">&quot;-jar&quot;</span>, <span class="token string">&quot;application.jar&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a href="https://github.com/banrenshan/banrenshan.github.io/edit/main/src/Spring/spring-gradle插件.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link vp-meta-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: CP_zhaozhiqiang@163.com">banrenshan</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/Spring/spring-data-jpa.html" aria-label="Spring Data Repositories"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Spring Data Repositories</div></a><a class="route-link nav-link next" href="/Spring/spring-http-interface.html" aria-label="Spring Http Interface"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Spring Http Interface<!----></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Crw0g0C7.js" defer></script>
  </body>
</html>
