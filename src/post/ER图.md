---
title: ER图
tags:
  - java
  - gradle
categories:
  - 中间件
---


实体图主要有两个作用：

* 显示系统范围内的主要实体
* 显示实体之间的相互关系





实体是系统内可以定义的事物或概念，也就是数据库中的表。 在ER图，实现表示成圆角矩形



实体还可以进一步分为弱实体和复合实体：

* 弱实体必须依赖另一个实体存在，例如成绩单必须依赖学生存在，因此成绩单是弱实体。弱实体使用双线矩形表示。
* 复合常常用于实现两个多是个实体的M:N关系，他由每个关联实体的主键组成，用矩形内加菱形来表示







实体属性，对应数据表中的列，表示实体的特性

* 复合属性
* 多值属性： 双线椭圆表示
* 派生属性：非永久性存储于数据库的属性，由其他属性或其他数据（如当前日期）派生出来，用虚线椭圆表示
* 可选属性： 在椭圆的文字后用（O）来表示
* 联系属性：联系属性用于表示多个实体之间联系所具有的属性，一般来讲M:N的两个实体具有联系属性，在1：1和1：M的实体联系中，联系属性并不需要。





主键，简写PK,用于界定数据表中记录的唯一性



外键，用于识别实体之间的关系



关系，表示两个实体之间以某种方式相互关联



基数，定义一个实体与另一个实体的关系里面，某方可能出现的次数。





ER图在以下的层次上抽象：

* 概念数据模型
* 逻辑数据模型
* 物理数据模型

一般而言，业务分析人员使用概念和逻辑模型来展示系统中存在的业务对象，而数据库设计人员会为概念和逻辑模型加入更多的细节，进而生成物理模型，好为创建实际的数据库做准备。



下面是三种模式的区别：

| ER对象       | 概念模型 | 逻辑模型 | 物理模型 |
| ------------ | -------- | -------- | -------- |
| 实体【名称】 | Y        | Y        | Y        |
| 关系         | Y        | Y        | Y        |
| 列           |          | Y        | Y        |
| 列的类型     |          | 随意     | Y        |
| 主键         |          |          | Y        |
| 外键         |          |          | Y        |



概念模型定义了系统中存在的业务对象以及他们之间的关系。建立概念模型，是为了识别所涉及的业务对象，来呈现系统的宏观图像。概念模型定义了那些实体存在，而非那些表。例如，逻辑和物理模型中可能存在多对多关系的表，但在概念模型下，他们只会表示为无基数的关系。



逻辑模型是概念模型的详细版本，通过明确定义每个实体中的列并引入操作和事务来让概念模型丰富起来。虽然逻辑模型仍是高层次的设计（非为特定数据库系统绘制），但是已经很接近了。



物理模型是数据库的实际设计蓝图。物理数据模型通过为每列执行类型，长度，非空等信息来详细刻画逻辑模型。由于物理模型表达了如何在特定的DNMS中构造和关系数据，因此设计时需要考虑实际数据库的需要和限制。